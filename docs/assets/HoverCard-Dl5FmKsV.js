import{s as f,j as O,c,m as g,S as x,P as U,d as b,e as X,a as Y,g as Z,u as J,h as K}from"./iframe-rVoFtZu9.js";import{P as _,a as E}from"./2CTBMVJ4-CSCl13rC.js";import{D as N}from"./3VFJM5NZ-yJJf6KC2.js";import{c as Q}from"./E53DB7BS-COn9pcus.js";import{L as V}from"./3JA5IX2L-Bh0937NJ.js";import{_ as ee}from"./5WXHJDCZ-DghNgBBa.js";import{m as te,A as oe,a as C,h as L,j as ne,w as re}from"./index-kLgwDL5l.js";import{s as se}from"./index-Dla5E_GO.js";import{m as $}from"./index-TjBUJP2H.js";import{c as ae}from"./combineProps-CsPhi8Vl.js";import{L as ie}from"./Utils-DvLkKxqJ.js";var ce={};ee(ce,{Arrow:()=>E,Content:()=>T,HoverCard:()=>ue,Portal:()=>y,Root:()=>R,Trigger:()=>w,useHoverCardContext:()=>P});var k=Z();function P(){const s=J(k);if(s===void 0)throw new Error("[kobalte]: `useHoverCardContext` must be used within a `HoverCard` component");return s}function T(s){const o=P(),[a,i]=f(s,["ref","style"]);return c(x,{get when(){return o.contentPresent()},get children(){return c(_.Positioner,{get children(){return c(N,g({ref(n){var e=$(t=>{o.setContentRef(t)},a.ref);typeof e=="function"&&e(n)},disableOutsidePointerEvents:!1,get style(){return ae({"--kb-hovercard-content-transform-origin":"var(--kb-popper-content-transform-origin)",position:"relative"},a.style)},onFocusOutside:n=>n.preventDefault(),get onDismiss(){return o.close}},()=>o.dataset(),i))}})}})}function y(s){const o=P();return c(x,{get when(){return o.contentPresent()},get children(){return c(U,s)}})}function le(s,o,a){const i=s.split("-")[0],n=o.getBoundingClientRect(),e=a.getBoundingClientRect(),t=[],l=n.left+n.width/2,r=n.top+n.height/2;switch(i){case"top":t.push([n.left,r]),t.push([e.left,e.bottom]),t.push([e.left,e.top]),t.push([e.right,e.top]),t.push([e.right,e.bottom]),t.push([n.right,r]);break;case"right":t.push([l,n.top]),t.push([e.left,e.top]),t.push([e.right,e.top]),t.push([e.right,e.bottom]),t.push([e.left,e.bottom]),t.push([l,n.bottom]);break;case"bottom":t.push([n.left,r]),t.push([e.left,e.top]),t.push([e.left,e.bottom]),t.push([e.right,e.bottom]),t.push([e.right,e.top]),t.push([n.right,r]);break;case"left":t.push([l,n.top]),t.push([e.right,e.top]),t.push([e.left,e.top]),t.push([e.left,e.bottom]),t.push([e.right,e.bottom]),t.push([l,n.bottom]);break}return t}function R(s){const o=`hovercard-${K()}`,a=te({id:o,openDelay:700,closeDelay:300},s),[i,n]=f(a,["id","open","defaultOpen","onOpenChange","openDelay","closeDelay","ignoreSafeArea","forceMount"]);let e,t;const[l,r]=b(),[u,B]=b(),[I,W]=b(n.placement),d=Q({open:()=>i.open,defaultOpen:()=>i.defaultOpen,onOpenChange:p=>i.onOpenChange?.(p)}),{present:F}=se({show:()=>i.forceMount||d.isOpen(),element:()=>u()??null}),{addGlobalListener:j,removeGlobalListener:z}=oe(),G=()=>{e=window.setTimeout(()=>{e=void 0,d.open()},i.openDelay)},A=()=>{t=window.setTimeout(()=>{t=void 0,d.close()},i.closeDelay)},H=()=>{window.clearTimeout(e),e=void 0},h=()=>{window.clearTimeout(t),t=void 0},D=p=>L(l(),p)||L(u(),p),M=p=>{const v=l(),m=u();if(!(!v||!m))return le(p,v,m)},S=p=>{const v=p.target;if(D(v)){h();return}if(!i.ignoreSafeArea){const m=M(I());if(m&&ne(re(p),m)){h();return}}t||A()};X(()=>{d.isOpen()&&(j(document,"pointermove",S,!0),O(()=>{z(document,"pointermove",S,!0)}))}),O(()=>{H(),h()});const q={dataset:Y(()=>({"data-expanded":d.isOpen()?"":void 0,"data-closed":d.isOpen()?void 0:""})),isOpen:d.isOpen,contentPresent:F,openWithDelay:G,closeWithDelay:A,cancelOpening:H,cancelClosing:h,close:d.close,isTargetOnHoverCard:D,setTriggerRef:r,setContentRef:B};return c(k.Provider,{value:q,get children(){return c(_,g({anchorRef:l,contentRef:u,onCurrentPlacementChange:W},n))}})}function w(s){const o=P(),[a,i]=f(s,["ref","onPointerEnter","onPointerLeave","onFocus","onBlur"]),n=r=>{C(r,a.onPointerEnter),!(r.pointerType==="touch"||i.disabled||r.defaultPrevented)&&(o.cancelClosing(),o.isOpen()||o.openWithDelay())},e=r=>{C(r,a.onPointerLeave),r.pointerType!=="touch"&&o.cancelOpening()},t=r=>{C(r,a.onFocus),!(i.disabled||r.defaultPrevented)&&(o.cancelClosing(),o.isOpen()||o.openWithDelay())},l=r=>{C(r,a.onBlur),o.cancelOpening();const u=r.relatedTarget;o.isTargetOnHoverCard(u)||o.closeWithDelay()};return O(o.cancelOpening),c(V,g({ref(r){var u=$(o.setTriggerRef,a.ref);typeof u=="function"&&u(r)},onPointerEnter:n,onPointerLeave:e,onFocus:t,onBlur:l},()=>o.dataset(),i))}var ue=Object.assign(R,{Arrow:E,Content:T,Portal:y,Trigger:w});function ye(s){const[o,a]=f(s,[]);return c(w,g(a,{"bool:n$":!1}))}function Re(s){const[o,a]=f(s,[]);return c(R,g({gutter:4},a,{"bool:n$":!1}))}function we(s){const[o,a]=f(s,["class"]);return c(y,{get children(){return c(T,g({get class(){return ie([`z-50 w-64 rounded-md border bg-popover p-4 text-popover-foreground\r
                shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out\r
                data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\r
                data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95\r
                data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2\r
                data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2`,o.class])}},a,{"bool:n$":!1}))}})}export{Re as H,ye as a,we as b};
