import{s as m,b as x,a as w,c as s,m as g,d as E,e as R,x as T,u as $,f as F,i as b,t as I,j as S,l as B,w as D}from"./iframe-DpV9HfhM.js";import{U as O}from"./Types-B1RBmUUG.js";import{d as k}from"./Option-CYzlgCrd.js";import{p as A,C as H}from"./ColorSwatch-CkOPHnRl.js";import{T as M,a as U}from"./MKJEDDFV-Bno4mMUs.js";import{d as _,e as j,f as W}from"./ZZYKR3VO-B4jzXJej.js";import{b as Z}from"./FN6EICGO-R98tchyQ.js";import{m as q,e as z}from"./index-CmLBBZhh.js";import{L as f}from"./Utils-BwHSRaIp.js";var y=E();function N(){const t=$(y);if(t===void 0)throw new Error("[kobalte]: `useColorFieldContext` must be used within a `ColorField` component");return t}function V(t){const e=N(),[n,l]=m(t,["onBlur"]);return s(U,g({autoComplete:"off",autoCorrect:"off",spellCheck:"false",get onBlur(){return z([n.onBlur,e.onBlur])}},l))}function L(t){const e=`colorfield-${R()}`,n=q({id:e},t),[l,p]=m(n,["value","defaultValue","onChange"]),c=x(()=>{let r=l.defaultValue;try{r=A(r?.startsWith("#")?r:`#${r}`).toString("hex")}catch{r=""}return r}),[a,u]=Z({value:()=>l.value,defaultValue:c,onChange:r=>l.onChange?.(r)}),[d,h]=w(a()),i=r=>{G(r)&&u(r)},C={onBlur:r=>{if(!a().length){h("");return}let v;try{v=A(a().startsWith("#")?a():`#${a()}`).toString("hex")}catch{d()?u(d()):u("");return}T(()=>{u(v),h(v)})}};return s(y.Provider,{value:C,get children(){return s(M,g({get value(){return a()},get defaultValue(){return c()},onChange:i},p))}})}function G(t){return t===""||!!t.match(/^#?[0-9a-f]{0,6}$/i)?.[0]}Object.assign(L,{Description:W,ErrorMessage:j,Input:V,Label:_});var J=I("<div>");class P extends O{constructor(e,n){super(),this.tag=e,this.fields=n}cases(){return["Description","Error","Label"]}}function K(t){const e=k(t,new P(2,[]));return"text-sm font-medium leading-none peer-disabled:cursor-not-allowedpeer-disabled:opacity-70 group-disabled:opacity-70group-disabled:cursor-not-allowed "+(e.tag===1?"text-xs text-destructive":e.tag===2?"data-[invalid]:text-destructive":"font-normal text-muted-foreground")}function Q(t){const[e,n]=m(t,["class"]);return s(_,g({get class(){return f([K(new P(2,[])),e.class])}},n,{"bool:n$":!1}))}function se(t){t=g({swatchType:"left",slots:{}},t);const[e,n]=m(t,["value","onChange","onColorChange","color","class","slots","label","swatchType"]),l=w(void 0),p=l[1],c=x(()=>e.value?e.value:l[0]()),a=o=>{e.onChange?e.onChange(o):p(o)},u=w(void 0),d=u[1],h=x(()=>e.onColorChange?o=>{T(()=>{d(o),e.onColorChange(o)})}:d),i=()=>e.color?e.color:u[0]();return F(()=>{i()&&c()&&a(i().toString("hexa"))}),F(()=>{try{h()(A(c()))}catch{}}),s(L,g({get class(){return f(["group flex flex-col gap-1",e.class,e.slots.root])},onChange:o=>{T(()=>{p(o),a(o)})},get value(){return c()}},n,{"bool:n$":!1,get children(){return[b(()=>b(()=>!!e.label)()?s(Q,{get class(){return e.slots.label},get children(){return e.label}}):void 0),(()=>{var o=J();return S(o,(()=>{var C=b(()=>!!(i()&&e.swatchType!=="none"));return()=>C()?s(H,{get value(){return i()},get class(){return f(["place-self-center",e.slots.root])}}):void 0})(),null),S(o,s(V,{get class(){return f(["grow size-full outline-none pl-1",e.slots.input])}}),null),B(()=>D(o,f(["flex h-10 w-full rounded-md border border-input bg-transparent px-2 py-2 text-sm ring-offset-background placeholder:text-muted-foreground has-focus-visible:outline-none has-focus-visible:ring-2 has-focus-visible:ring-ring has-focus-visible:ring-offset-2 has-disabled:cursor-not-allowed has-disabled:opacity-50 has-data-[invalid]:border-error-foreground has-data-[invalid]:text-error-foreground",e.swatchType==="left"?i()?"flex-row pl-1":"flex-row":e.swatchType==="none"?"":"flex-row-reverse pr-1",e.slots.input]))),o})()]}}))}export{se as C};
