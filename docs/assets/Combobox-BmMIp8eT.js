import{c as a,m as g,s as h,b as E,S as De,e as M,P as tt,u as ot,g as nt,z as st,h as rt,d as x,a as A,f as te,j as lt}from"./iframe-CxGoIJAb.js";import{L as at,g as Fe,H as it,a as se,b as re,c as le,d as Pe,e as ae}from"./2I3Q5YLM-3oSBakSw.js";import{P as Ve,a as Ee}from"./2CTBMVJ4-CHEA7d3E.js";import{L as ct}from"./N3GAC5SS-DzppKbBE.js";import{b as ut,c as dt,S as pt}from"./QZDH5R5B-Qkec8v-Q.js";import{b as ft}from"./LR7LBJN3-kBELrHTO.js";import{a as gt,c as mt}from"./FBCYWU27-vfj_3iis.js";import{D as bt}from"./3VFJM5NZ-BluivHlh.js";import{a as oe}from"./JHMNWOLY-BsaNL2h9.js";import{c as ht}from"./E53DB7BS-BNvrQJoi.js";import{F as Ct,c as St}from"./NGHEENNE-wo5LYtNh.js";import{u as H,F as Ot,c as yt,a as xt,b as vt,d as _e,e as Ke,f as ke}from"./ZZYKR3VO-BhF5XW0P.js";import{c as At}from"./JNCCF6MP-4sxnBYeu.js";import{b as It}from"./FN6EICGO-lOlungVQ.js";import{P as W}from"./FLVHQV4A-CBdIuREj.js";import{m as _,a as I,f as Te,z as V,o as ne,c as Rt,h as Be}from"./index-DQYZI0kA.js";import{s as Lt}from"./index-DsOiINGQ.js";import{s as Mt}from"./index-D2aTQ-Yz.js";import{m as K}from"./index-Dg1yJhWd.js";import{a as T}from"./index-BmLeoKbC.js";import{c as wt}from"./combineProps-uLaRYQYT.js";import{B as Ft}from"./UKTBL2JL-wUtxpG-t.js";import{_ as Tt}from"./5WXHJDCZ-DghNgBBa.js";import{L as D}from"./Utils-C5KSfAah.js";import{c as Dt}from"./check-BMUYh2yQ.js";import{I as Pt}from"./Icon-CqHicZQ1.js";var $e=nt();function R(){const l=ot($e);if(l===void 0)throw new Error("[kobalte]: `useComboboxContext` must be used within a `Combobox` component");return l}function ie(l){let n;const e=R(),[s,t]=h(l,["ref","style","onCloseAutoFocus","onFocusOutside"]),p=()=>{e.resetInputValue(e.listState().selectionManager().selectedKeys()),e.close(),setTimeout(()=>{e.close()})},f=u=>{s.onFocusOutside?.(u),e.isOpen()&&e.isModal()&&u.preventDefault()};return gt({isDisabled:()=>!(e.isOpen()&&e.isModal()),targets:()=>{const u=[];n&&u.push(n);const C=e.controlRef();return C&&u.push(C),u}}),Lt({element:()=>n??null,enabled:()=>e.contentPresent()&&e.preventScroll()}),mt({trapFocus:()=>e.isOpen()&&e.isModal(),onMountAutoFocus:u=>{u.preventDefault()},onUnmountAutoFocus:u=>{s.onCloseAutoFocus?.(u),u.defaultPrevented||(Be(e.inputRef()),u.preventDefault())}},()=>n),a(De,{get when(){return e.contentPresent()},get children(){return a(Ve.Positioner,{get children(){return a(bt,g({ref(u){var C=K(S=>{e.setContentRef(S),n=S},s.ref);typeof C=="function"&&C(u)},get disableOutsidePointerEvents(){return E(()=>!!e.isModal())()&&e.isOpen()},get excludedElements(){return[e.controlRef]},get style(){return wt({"--kb-combobox-content-transform-origin":"var(--kb-popper-content-transform-origin)",position:"relative"},s.style)},onFocusOutside:f,onDismiss:p},()=>e.dataset(),t))}})}})}function ce(l){let n;const e=H(),s=R(),t=_({id:s.generateId("input")},l),[p,f,u]=h(t,["ref","disabled","onClick","onInput","onKeyDown","onFocus","onBlur","onTouchEnd"],Ct),C=()=>s.listState().collection(),S=()=>s.listState().selectionManager(),m=()=>p.disabled||s.isDisabled()||e.isDisabled(),{fieldProps:v}=St(f),w=i=>{I(i,p.onClick),s.triggerMode()==="focus"&&!s.isOpen()&&s.open(!1,"focus")},G=i=>{if(I(i,p.onInput),e.isReadOnly()||m())return;const b=i.target;s.setInputValue(b.value),b.value=s.inputValue()??"",s.isOpen()?C().getSize()<=0&&!s.allowsEmptyCollection()&&s.close():(C().getSize()>0||s.allowsEmptyCollection())&&s.open(!1,"input")},N=i=>{if(I(i,p.onKeyDown),!(e.isReadOnly()||m()))switch(s.isOpen()&&I(i,s.onInputKeyDown),i.key){case"Enter":if(s.isOpen()){i.preventDefault();const b=S().focusedKey();b!=null&&S().select(b)}break;case"Tab":s.isOpen()&&(s.close(),s.resetInputValue(s.listState().selectionManager().selectedKeys()));break;case"Escape":s.isOpen()?(s.close(),s.resetInputValue(s.listState().selectionManager().selectedKeys())):s.setInputValue("");break;case"ArrowDown":s.isOpen()||s.open(i.altKey?!1:"first","manual");break;case"ArrowUp":s.isOpen()?i.altKey&&(s.close(),s.resetInputValue(s.listState().selectionManager().selectedKeys())):s.open("last","manual");break;case"ArrowLeft":case"ArrowRight":S().setFocusedKey(void 0);break;case"Backspace":if(s.removeOnBackspace()&&S().selectionMode()==="multiple"&&s.inputValue()===""){const b=[...S().selectedKeys()].pop()??"";S().toggleSelection(b)}break}},q=i=>{I(i,p.onFocus),!s.isInputFocused()&&s.setIsInputFocused(!0)},P=i=>{I(i,p.onBlur),!(Te(s.controlRef(),i.relatedTarget)||Te(s.contentRef(),i.relatedTarget))&&s.setIsInputFocused(!1)};let k=0;return a(W,g({as:"input",ref(i){var b=K(L=>{s.setInputRef(L),n=L},p.ref);typeof b=="function"&&b(i)},get id(){return v.id()},get value(){return s.inputValue()},get required(){return e.isRequired()},get disabled(){return e.isDisabled()},get readonly(){return e.isReadOnly()},get placeholder(){return s.placeholder()},type:"text",role:"combobox",autoComplete:"off",autoCorrect:"off",spellCheck:"false","aria-haspopup":"listbox","aria-autocomplete":"list",get"aria-expanded"(){return s.isOpen()},get"aria-controls"(){return E(()=>!!s.isOpen())()?s.listboxId():void 0},get"aria-activedescendant"(){return s.activeDescendant()},get"aria-label"(){return v.ariaLabel()},get"aria-labelledby"(){return v.ariaLabelledBy()},get"aria-describedby"(){return v.ariaDescribedBy()},get"aria-invalid"(){return e.validationState()==="invalid"||void 0},get"aria-required"(){return e.isRequired()||void 0},get"aria-disabled"(){return e.isDisabled()||void 0},get"aria-readonly"(){return e.isReadOnly()||void 0},onClick:w,onInput:G,onKeyDown:N,onFocus:q,onBlur:P,onTouchEnd:i=>{if(I(i,p.onTouchEnd),!n||e.isReadOnly()||m())return;if(i.timeStamp-k<500){i.preventDefault(),n.focus();return}const b=i.target.getBoundingClientRect(),L=i.changedTouches[0],B=Math.ceil(b.left+.5*b.width),j=Math.ceil(b.top+.5*b.height);L.clientX===B&&L.clientY===j&&(i.preventDefault(),n.focus(),s.toggle(!1,"manual"),k=i.timeStamp)}},()=>s.dataset(),()=>e.dataset(),u))}function ue(l){const n=H(),e=R(),s=_({id:e.generateId("listbox")},l),[t,p]=h(s,["ref"]),f=()=>n.getAriaLabelledBy(p.id,e.listboxAriaLabel(),void 0);return M(()=>lt(e.registerListboxId(p.id))),a(at,g({ref(u){var C=K(e.setListboxRef,t.ref);typeof C=="function"&&C(u)},get state(){return e.listState()},get autoFocus(){return e.autoFocus()},shouldUseVirtualFocus:!0,shouldSelectOnPressUp:!0,shouldFocusOnHover:!0,get"aria-label"(){return e.listboxAriaLabel()},get"aria-labelledby"(){return f()},get renderItem(){return e.renderItem},get renderSection(){return e.renderSection},get virtualized(){return e.isVirtualized()}},p))}function de(l){const n=R();return a(De,{get when(){return n.contentPresent()},get children(){return a(tt,l)}})}function pe(l){const n=H(),e=R(),[s,t]=h(l,["ref","children"]),p=()=>e.listState().selectionManager();return a(W,g({as:"div",ref(f){var u=K(e.setControlRef,s.ref);typeof u=="function"&&u(f)}},()=>e.dataset(),()=>n.dataset(),t,{get children(){return a(Vt,{state:{selectedOptions:()=>e.selectedOptions(),remove:f=>e.removeOptionFromSelection(f),clear:()=>p().clearSelection()},get children(){return s.children}})}}))}function Vt(l){const n=st(()=>{const e=l.children;return V(e)?e(l.state):e});return E(n)}function ze(l){const n=R();return a(it,g({get collection(){return n.listState().collection()},get selectionManager(){return n.listState().selectionManager()},get isOpen(){return n.isOpen()},get isMultiple(){return n.isMultiple()},get isVirtualized(){return n.isVirtualized()},focusTrigger:()=>n.inputRef()?.focus()},l))}function fe(l){const n=R(),e=_({children:"â–¼"},l);return a(W,g({as:"span","aria-hidden":"true"},()=>n.dataset(),e))}var Et={focusAnnouncement:(l,n)=>`${l}${n?", selected":""}`,countAnnouncement:l=>{switch(l){case 1:return"one option available"}},selectedAnnouncement:l=>`${l}, selected`,triggerLabel:"Show suggestions",listboxLabel:"Suggestions"};function _t(l){const n=`combobox-${rt()}`,e=ft({sensitivity:"base"}),s=_({id:n,selectionMode:"single",allowsEmptyCollection:!1,disallowEmptySelection:!1,allowDuplicateSelectionEvents:!0,closeOnSelection:l.selectionMode==="single",removeOnBackspace:!0,gutter:8,sameWidth:!0,modal:!1,defaultFilter:"contains",triggerMode:"input",translations:Et},l),[t,p,f,u]=h(s,["noResetInputOnBlur","translations","itemComponent","sectionComponent","open","defaultOpen","onOpenChange","onInputChange","value","defaultValue","onChange","triggerMode","placeholder","options","optionValue","optionTextValue","optionLabel","optionDisabled","optionGroupChildren","keyboardDelegate","allowDuplicateSelectionEvents","disallowEmptySelection","defaultFilter","shouldFocusWrap","allowsEmptyCollection","closeOnSelection","removeOnBackspace","selectionBehavior","selectionMode","virtualized","modal","preventScroll","forceMount"],["getAnchorRect","placement","gutter","shift","flip","slide","overlap","sameWidth","fitViewport","hideWhenDetached","detachedPadding","arrowPadding","overflowPadding"],Ot),[C,S]=x(),[m,v]=x(),[w,G]=x(),[N,q]=x(),[P,k]=x(),[U,i]=x(),[b,L]=x(!1),[B,j]=x(!1),[X,be]=x(!1),[He,he]=x(t.options),y=ht({open:()=>t.open,defaultOpen:()=>t.defaultOpen,onOpenChange:o=>t.onOpenChange?.(o,Oe)}),[Y,Z]=It({defaultValue:()=>"",onChange:o=>{t.onInputChange?.(o),o===""&&t.selectionMode==="single"&&!c.selectionManager().isEmpty()&&t.value===void 0&&c.selectionManager().setSelectedKeys([]),c.selectionManager().setFocusedKey(void 0)}}),F=o=>{const r=t.optionValue;return r==null?String(o):String(V(r)?r(o):o[r])},We=o=>{const r=t.optionLabel;return r==null?String(o):String(V(r)?r(o):o[r])},Ge=o=>{const r=t.optionTextValue;return r==null?String(o):String(V(r)?r(o):o[r])},Ce=A(()=>{const o=t.optionGroupChildren;return o==null?t.options:t.options.flatMap(r=>r[o]??r)}),Se=o=>{const r=Y()??"";if(V(t.defaultFilter))return t.defaultFilter?.(o,r);const d=Ge(o);switch(t.defaultFilter){case"startsWith":return e.startsWith(d,r);case"endsWith":return e.endsWith(d,r);case"contains":return e.contains(d,r)}},J=A(()=>{const o=t.optionGroupChildren;if(o==null)return t.options.filter(Se);const r=[];for(const d of t.options){const O=d[o].filter(Se);O.length!==0&&r.push({...d,[o]:O})}return r}),Ne=A(()=>y.isOpen()?X()?t.options:J():He());let Oe="focus";const ye=o=>[...o].map(r=>Ce().find(d=>F(d)===r)).filter(r=>r!=null),c=ut({selectedKeys:()=>t.value!=null?t.value.map(F):t.value,defaultSelectedKeys:()=>t.defaultValue!=null?t.defaultValue.map(F):t.defaultValue,onSelectionChange:o=>{t.onChange?.(ye(o)),t.closeOnSelection&&y.isOpen()&&o.size>0&&($(),setTimeout($));const r=w();r&&(r.setSelectionRange(r.value.length,r.value.length),Be(r))},allowDuplicateSelectionEvents:()=>T(t.allowDuplicateSelectionEvents),disallowEmptySelection:()=>t.disallowEmptySelection,selectionBehavior:()=>T(t.selectionBehavior),selectionMode:()=>t.selectionMode,dataSource:Ne,getKey:()=>t.optionValue,getTextValue:()=>t.optionTextValue,getDisabled:()=>t.optionDisabled,getSectionChildren:()=>t.optionGroupChildren}),qe=A(()=>ye(c.selectionManager().selectedKeys())),Ue=o=>{c.selectionManager().toggleSelection(F(o))},{present:je}=Mt({show:()=>t.forceMount||y.isOpen(),element:()=>P()??null}),Q=(o,r)=>{if(t.triggerMode==="manual"&&r!=="manual"||!(be(r==="manual")?t.options.length>0:J().length>0)&&!t.allowsEmptyCollection)return;Oe=r,L(o),y.open();let z=c.selectionManager().firstSelectedKey();z==null&&(o==="first"?z=c.collection().getFirstKey():o==="last"&&(z=c.collection().getLastKey())),c.selectionManager().setFocused(!0),c.selectionManager().setFocusedKey(z)},$=()=>{y.close(),c.selectionManager().setFocused(!1),c.selectionManager().setFocusedKey(void 0)},Xe=(o,r)=>{y.isOpen()?$():Q(o,r)},{formControlContext:ee}=yt(f);xt(w,()=>{const o=t.defaultValue?[...t.defaultValue].map(F):new pt;c.selectionManager().setSelectedKeys(o)});const xe=A(()=>{const o=T(t.keyboardDelegate);return o||new ct(c.collection,U,void 0)}),Ye=dt({selectionManager:()=>c.selectionManager(),keyboardDelegate:xe,disallowTypeAhead:!0,disallowEmptySelection:!0,shouldFocusWrap:()=>t.shouldFocusWrap,isVirtualized:!0},w),Ze=o=>{o&&t.triggerMode==="focus"&&Q(!1,"focus"),j(o),c.selectionManager().setFocused(o)},Je=A(()=>{const o=c.selectionManager().focusedKey();if(o)return U()?.querySelector(`[data-key="${o}"]`)?.id}),ve=o=>{if(t.selectionMode==="single"){const r=[...o][0],d=Ce().find(O=>F(O)===r);if(t.noResetInputOnBlur&&!d)return;Z(d?We(d):"")}else{if(t.noResetInputOnBlur)return;Z("")}},Qe=o=>t.itemComponent?.({item:o}),et=o=>t.sectionComponent?.({section:o});M(te([J,X],(o,r)=>{if(y.isOpen()&&r!=null){const d=r[0],O=r[1];he(O?t.options:d)}else{const d=o[0],O=o[1];he(O?t.options:d)}})),M(te(Y,()=>{X()&&be(!1)})),M(te(()=>c.selectionManager().selectedKeys(),ve));let Ae="";M(()=>{const o=c.selectionManager().focusedKey()??"",r=c.collection().getItem(o);if(ne()&&r!=null&&o!==Ae){const d=c.selectionManager().isSelected(o),O=t.translations?.focusAnnouncement(r?.textValue||"",d)??"";oe(O)}o&&(Ae=o)});let Ie=Fe(c.collection()),Re=y.isOpen();M(()=>{const o=Fe(c.collection()),r=y.isOpen(),d=r!==Re&&(c.selectionManager().focusedKey()==null||ne());if(r&&(d||o!==Ie)){const O=t.translations?.countAnnouncement(o)??"";oe(O)}Ie=o,Re=r});let Le="";M(()=>{const o=[...c.selectionManager().selectedKeys()].pop()??"",r=c.collection().getItem(o);if(ne()&&B()&&r&&o!==Le){const d=t.translations?.selectedAnnouncement(r?.textValue||"")??"";oe(d)}o&&(Le=o)});const Me=A(()=>({"data-expanded":y.isOpen()?"":void 0,"data-closed":y.isOpen()?void 0:""})),we={dataset:Me,isOpen:y.isOpen,isDisabled:()=>ee.isDisabled()??!1,isMultiple:()=>T(t.selectionMode)==="multiple",isVirtualized:()=>t.virtualized??!1,isModal:()=>t.modal??!1,preventScroll:()=>t.preventScroll??we.isModal(),allowsEmptyCollection:()=>t.allowsEmptyCollection??!1,shouldFocusWrap:()=>t.shouldFocusWrap??!1,removeOnBackspace:()=>t.removeOnBackspace??!0,selectedOptions:qe,isInputFocused:B,contentPresent:je,autoFocus:b,inputValue:Y,triggerMode:()=>t.triggerMode,activeDescendant:Je,controlRef:m,inputRef:w,triggerRef:N,contentRef:P,listState:()=>c,keyboardDelegate:xe,listboxId:C,triggerAriaLabel:()=>t.translations?.triggerLabel,listboxAriaLabel:()=>t.translations?.listboxLabel,setIsInputFocused:Ze,resetInputValue:ve,setInputValue:Z,setControlRef:v,setInputRef:G,setTriggerRef:q,setContentRef:k,setListboxRef:i,open:Q,close:$,toggle:Xe,placeholder:()=>t.placeholder,renderItem:Qe,renderSection:et,removeOptionFromSelection:Ue,onInputKeyDown:o=>Ye.onKeyDown(o),generateId:Rt(()=>T(f.id)),registerListboxId:At(S)};return a(vt.Provider,{value:ee,get children(){return a($e.Provider,{value:we,get children(){return a(Ve,g({anchorRef:m,contentRef:P},p,{get children(){return a(W,g({as:"div",role:"group",get id(){return T(f.id)}},()=>ee.dataset(),Me,u))}}))}})}})}var Kt={};Tt(Kt,{Arrow:()=>Ee,Combobox:()=>kt,Content:()=>ie,Control:()=>pe,Description:()=>ke,ErrorMessage:()=>Ke,HiddenSelect:()=>ze,Icon:()=>fe,Input:()=>ce,Item:()=>ae,ItemDescription:()=>Pe,ItemIndicator:()=>le,ItemLabel:()=>re,Label:()=>_e,Listbox:()=>ue,Portal:()=>de,Root:()=>ge,Section:()=>se,Trigger:()=>me,useComboboxContext:()=>R});function ge(l){const[n,e]=h(l,["value","defaultValue","onChange","multiple"]),s=A(()=>n.value!=null?n.multiple?n.value:[n.value]:n.value),t=A(()=>n.defaultValue!=null?n.multiple?n.defaultValue:[n.defaultValue]:n.defaultValue);return a(_t,g({get value(){return s()},get defaultValue(){return t()},onChange:f=>{n.multiple?n.onChange?.(f??[]):n.onChange?.(f[0]??null)},get selectionMode(){return n.multiple?"multiple":"single"}},e))}function me(l){const n=H(),e=R(),s=_({id:e.generateId("trigger")},l),[t,p]=h(s,["ref","disabled","onPointerDown","onClick","aria-labelledby"]),f=()=>t.disabled||e.isDisabled()||n.isDisabled()||n.isReadOnly(),u=m=>{I(m,t.onPointerDown),m.currentTarget.dataset.pointerType=m.pointerType,!f()&&m.pointerType!=="touch"&&m.button===0&&(m.preventDefault(),e.toggle(!1,"manual"))},C=m=>{I(m,t.onClick),f()||(m.currentTarget.dataset.pointerType==="touch"&&e.toggle(!1,"manual"),e.inputRef()?.focus())},S=()=>n.getAriaLabelledBy(p.id,e.triggerAriaLabel(),t["aria-labelledby"]);return a(Ft,g({ref(m){var v=K(e.setTriggerRef,t.ref);typeof v=="function"&&v(m)},get disabled(){return f()},tabIndex:-1,"aria-haspopup":"listbox",get"aria-expanded"(){return e.isOpen()},get"aria-controls"(){return E(()=>!!e.isOpen())()?e.listboxId():void 0},get"aria-label"(){return e.triggerAriaLabel()},get"aria-labelledby"(){return S()},onPointerDown:u,onClick:C},()=>e.dataset(),p))}var kt=Object.assign(ge,{Arrow:Ee,Content:ie,Control:pe,Description:ke,ErrorMessage:Ke,HiddenSelect:ze,Icon:fe,Input:ce,Item:ae,ItemDescription:Pe,ItemIndicator:le,ItemLabel:re,Label:_e,Listbox:ue,Portal:de,Section:se,Trigger:me}),Bt=[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]],$t=l=>a(Pt,g(l,{iconNode:Bt,name:"arrow-up-down"})),zt=$t;function mo(l){const[n,e]=h(l,[]);return a(ge,g(e,{"bool:n$":!1}))}function bo(l){const[n,e]=h(l,[]);return a(re,g(e,{"bool:n$":!1}))}function ho(l){const[n,e]=h(l,["class"]);return a(ae,g({get class(){return D([`relative flex cursor-default select-none items-center\r
            justify-between rounded-sm px-2 py-1.5 text-sm outline-none\r
            data-[disabled]:pointer-events-none data-[highlighted]:bg-accent\r
            data-[highlighted]:text-accent-foreground data-[disabled]:opacity-50`,n.class])}},e,{"bool:n$":!1}))}function Co(l){const[n,e]=h(l,["children"]);return a(le,g(e,{"bool:n$":!1,get children(){return E(()=>!!n.children)()&&a(Dt,{class:"size-4",strokeWidth:2})}}))}function So(l){const[n,e]=h(l,["class"]);return a(se,g({get class(){return D(["overflow-hidden p-1 px-2 py-1.5 text-xs font-medium text-muted-foreground",n.class])}},e,{"bool:n$":!1}))}function Oo(l){const[n,e]=h(l,["class"]);return a(pe,g({get class(){return D(["flex h-10 items-center rounded-md border px-3",n.class])}},e,{"bool:n$":!1}))}function yo(l){const[n,e]=h(l,["class"]);return a(ce,g({get class(){return D([`flex size-full rounded-md bg-transparent py-3\r
            text-sm outline-none placeholder:text-muted-foreground\r
            disabled:cursor-not-allowed disabled:opacity-50`,n.class])}},e,{"bool:n$":!1}))}function xo(l){const[n,e]=h(l,["class","children"]);return a(me,g({get class(){return D(["size-4 opacity-50",n.class])}},e,{"bool:n$":!1,get children(){return a(fe,{get children(){return n.children??a(zt,{class:"size-4"})}})}}))}function vo(l){const[n,e]=h(l,["class"]);return a(de,{get children(){return a(ie,g({get class(){return D([`relative z-50 min-w-32 overflow-hidden\r
                rounded-md border bg-popover\r
                text-popover-foreground shadow-md animate-in fade-in-80`,n.class])}},e,{"bool:n$":!1,get children(){return a(ue,{class:"m-0 p-1"})}}))}})}export{mo as C,Oo as a,yo as b,xo as c,vo as d,ho as e,bo as f,Co as g,So as h};
