import{a as Z,o as ee,f as te,s as ne,l as re,c as ie,b as se,h as oe,d as ae}from"./floating-ui.dom-BNE0r0Ci.js";import{r as A,h as ce,i as D,j as le,k as ue,l as j,g as fe,m as $,o as de,p as k,q as z,d as I,t as R,v as K,w as he,x as M,y as W,z as F,A as G,B as pe,s as ye}from"./index-BybUFuJn.js";function C(e=0,t=0,n=0,i=0){if(typeof DOMRect=="function")return new DOMRect(e,t,n,i);const r={x:e,y:t,width:n,height:i,top:t,right:e+n,bottom:t+i,left:e};return{...r,toJSON:()=>r}}function me(e){if(!e)return C();const{x:t,y:n,width:i,height:r}=e;return C(t,n,i,r)}function ge(e,t){return{contextElement:D(e)?e:void 0,getBoundingClientRect:()=>{const n=e,i=t?.(n);return i||!n?me(i):n.getBoundingClientRect()}}}var B=e=>({variable:e,reference:`var(${e})`}),b={arrowSize:B("--arrow-size"),arrowSizeHalf:B("--arrow-size-half"),arrowBg:B("--arrow-background"),transformOrigin:B("--transform-origin"),arrowOffset:B("--arrow-offset")},we=e=>e==="top"||e==="bottom"?"y":"x";function ve(e,t){return{name:"transformOrigin",fn(n){const{elements:i,middlewareData:r,placement:s,rects:l,y:a}=n,p=s.split("-")[0],w=we(p),m=r.arrow?.x||0,v=r.arrow?.y||0,y=t?.clientWidth||0,P=t?.clientHeight||0,o=m+y/2,u=v+P/2,E=Math.abs(r.shift?.y||0),g=l.reference.height/2,c=P/2,d=e.offset?.mainAxis??e.gutter,f=typeof d=="number"?d+c:d??c,L=E>f,x={top:`${o}px calc(100% + ${f}px)`,bottom:`${o}px ${-f}px`,left:`calc(100% + ${f}px) ${u}px`,right:`${-f}px ${u}px`}[p],S=`${o}px ${l.reference.y+g-a}px`,O=!!e.overlap&&w==="y"&&L;return i.floating.style.setProperty(b.transformOrigin.variable,O?S:x),{data:{transformOrigin:O?S:x}}}}}var Ee={name:"rects",fn({rects:e}){return{data:e}}},xe=e=>{if(e)return{name:"shiftArrow",fn({placement:t,middlewareData:n}){if(!n.arrow)return{};const{x:i,y:r}=n.arrow,s=t.split("-")[0];return Object.assign(e.style,{left:i!=null?`${i}px`:"",top:r!=null?`${r}px`:"",[s]:`calc(100% + ${b.arrowOffset.reference})`}),{}}}};function be(e){const[t,n]=e.split("-");return{side:t,align:n,hasAlign:n!=null}}var Pe={strategy:"absolute",placement:"bottom",listeners:!0,gutter:8,flip:!0,slide:!0,overlap:!1,sameWidth:!1,fitViewport:!1,overflowPadding:8,arrowPadding:4};function H(e,t){const n=e.devicePixelRatio||1;return Math.round(t*n)/n}function T(e){return typeof e=="function"?e():e==="clipping-ancestors"?"clippingAncestors":e}function Le(e,t,n){const i=e||t.createElement("div");return ie({element:i,padding:n.arrowPadding})}function Oe(e,t){if(!le(t.offset??t.gutter))return ee(({placement:n})=>{const i=(e?.clientHeight||0)/2,r=t.offset?.mainAxis??t.gutter,s=typeof r=="number"?r+i:r??i,{hasAlign:l}=be(n),a=l?void 0:t.shift,p=t.offset?.crossAxis??a;return ue({crossAxis:p,mainAxis:s,alignmentAxis:t.shift})})}function Ae(e){if(!e.flip)return;const t=T(e.boundary);return te({...t?{boundary:t}:void 0,padding:e.overflowPadding,fallbackPlacements:e.flip===!0?void 0:e.flip})}function Se(e){if(!e.slide&&!e.overlap)return;const t=T(e.boundary);return ne({...t?{boundary:t}:void 0,mainAxis:e.slide,crossAxis:e.overlap,padding:e.overflowPadding,limiter:re()})}function Be(e){return se({padding:e.overflowPadding,apply({elements:t,rects:n,availableHeight:i,availableWidth:r}){const s=t.floating,l=Math.round(n.reference.width),a=Math.round(n.reference.height);r=Math.floor(r),i=Math.floor(i),s.style.setProperty("--reference-width",`${l}px`),s.style.setProperty("--reference-height",`${a}px`),s.style.setProperty("--available-width",`${r}px`),s.style.setProperty("--available-height",`${i}px`)}})}function De(e){if(e.hideWhenDetached)return oe({strategy:"referenceHidden",boundary:T(e.boundary)??"clippingAncestors"})}function ke(e){return e?e===!0?{ancestorResize:!0,ancestorScroll:!0,elementResize:!0,layoutShift:!0}:e:{}}function Ie(e,t,n={}){const i=ge(e,n.getAnchorRect);if(!t||!i)return;const r=Object.assign({},Pe,n),s=t.querySelector("[data-part=arrow]"),l=[Oe(s,r),Ae(r),Se(r),Le(s,t.ownerDocument,r),xe(s),ve({gutter:r.gutter,offset:r.offset,overlap:r.overlap},s),Be(r),De(r),Ee],{placement:a,strategy:p,onComplete:w,onPositioned:m}=r,v=async()=>{if(!i||!t)return;const u=await ae(i,t,{placement:a,middleware:l,strategy:p});w?.(u),m?.({placed:!0});const E=j(t),g=H(E,u.x),c=H(E,u.y);t.style.setProperty("--x",`${g}px`),t.style.setProperty("--y",`${c}px`),r.hideWhenDetached&&(u.middlewareData.hide?.referenceHidden?(t.style.setProperty("visibility","hidden"),t.style.setProperty("pointer-events","none")):(t.style.removeProperty("visibility"),t.style.removeProperty("pointer-events")));const d=t.firstElementChild;if(d){const f=fe(d);t.style.setProperty("--z-index",f.zIndex)}},y=async()=>{n.updatePosition?(await n.updatePosition({updatePosition:v,floatingElement:t}),m?.({placed:!0})):await v()},P=ke(r.listeners),o=r.listeners?Z(i,t,y,P):ce;return y(),()=>{o?.(),m?.({placed:!1})}}function Ke(e,t,n={}){const{defer:i,...r}=n,s=i?A:a=>a(),l=[];return l.push(s(()=>{const a=typeof e=="function"?e():e,p=typeof t=="function"?t():t;l.push(Ie(a,p,r))})),()=>{l.forEach(a=>a?.())}}var Me={bottom:"rotate(45deg)",left:"rotate(135deg)",top:"rotate(225deg)",right:"rotate(315deg)"};function Fe(e={}){const{placement:t,sameWidth:n,fitViewport:i,strategy:r="absolute"}=e;return{arrow:{position:"absolute",width:b.arrowSize.reference,height:b.arrowSize.reference,[b.arrowSizeHalf.variable]:`calc(${b.arrowSize.reference} / 2)`,[b.arrowOffset.variable]:`calc(${b.arrowSizeHalf.reference} * -1)`},arrowTip:{transform:t?Me[t.split("-")[0]]:void 0,background:b.arrowBg.reference,top:"0",left:"0",width:"100%",height:"100%",position:"absolute",zIndex:"inherit"},floating:{position:r,isolation:"isolate",minWidth:n?void 0:"max-content",width:n?"var(--reference-width)":void 0,maxWidth:i?"var(--available-width)":void 0,maxHeight:i?"var(--available-height)":void 0,pointerEvents:t?void 0:"none",top:"0px",left:"0px",transform:t?"translate3d(var(--x), var(--y), 0)":"translate3d(0, -100vh, 0)",zIndex:"var(--z-index)"}}}function $e(e){const t={each(n){for(let i=0;i<e.frames?.length;i+=1){const r=e.frames[i];r&&n(r)}},addEventListener(n,i,r){return t.each(s=>{try{s.document.addEventListener(n,i,r)}catch{}}),()=>{try{t.removeEventListener(n,i,r)}catch{}}},removeEventListener(n,i,r){t.each(s=>{try{s.document.removeEventListener(n,i,r)}catch{}})}};return t}function Te(e){const t=e.frameElement!=null?e.parent:null;return{addEventListener:(n,i,r)=>{try{t?.addEventListener(n,i,r)}catch{}return()=>{try{t?.removeEventListener(n,i,r)}catch{}}},removeEventListener:(n,i,r)=>{try{t?.removeEventListener(n,i,r)}catch{}}}}var N="pointerdown.outside",Y="focus.outside";function ze(e){for(const t of e)if(D(t)&&K(t))return!0;return!1}var J=e=>"clientY"in e;function Re(e,t){if(!J(t)||!e)return!1;const n=e.getBoundingClientRect();return n.width===0||n.height===0?!1:n.top<=t.clientY&&t.clientY<=n.top+n.height&&n.left<=t.clientX&&t.clientX<=n.left+n.width}function We(e,t){return e.y<=t.y&&t.y<=e.y+e.height&&e.x<=t.x&&t.x<=e.x+e.width}function _(e,t){if(!t||!J(e))return!1;const n=t.scrollHeight>t.clientHeight,i=n&&e.clientX>t.offsetLeft+t.clientWidth,r=t.scrollWidth>t.clientWidth,s=r&&e.clientY>t.offsetTop+t.clientHeight,l={x:t.offsetLeft,y:t.offsetTop,width:t.clientWidth+(n?16:0),height:t.clientHeight+(r?16:0)},a={x:e.clientX,y:e.clientY};return We(l,a)?i||s:!1}function Ce(e,t){const{exclude:n,onFocusOutside:i,onPointerDownOutside:r,onInteractOutside:s,defer:l}=t;if(!e)return;const a=$(e),p=j(e),w=$e(p),m=Te(p);function v(c,d){if(!D(d)||!d.isConnected||M(e,d)||Re(e,c))return!1;const f=a.querySelector(`[aria-controls="${e.id}"]`);if(f){const x=W(f);if(_(c,x))return!1}const L=W(e);return _(c,L)?!1:!n?.(d)}const y=new Set,P=de(e?.getRootNode());function o(c){function d(f){const L=l&&!z()?A:O=>O(),x=f??c,S=x?.composedPath?.()??[x?.target];L(()=>{const O=P?S[0]:I(c);if(!(!e||!v(c,O))){if(r||s){const Q=R(r,s);e.addEventListener(N,Q,{once:!0})}V(e,N,{bubbles:!1,cancelable:!0,detail:{originalEvent:x,contextmenu:he(x),focusable:ze(S),target:O}})}})}c.pointerType==="touch"?(y.forEach(f=>f()),y.add(k(a,"click",d,{once:!0})),y.add(m.addEventListener("click",d,{once:!0})),y.add(w.addEventListener("click",d,{once:!0}))):d()}const u=new Set,E=setTimeout(()=>{u.add(k(a,"pointerdown",o,!0)),u.add(m.addEventListener("pointerdown",o,!0)),u.add(w.addEventListener("pointerdown",o,!0))},0);function g(c){(l?A:f=>f())(()=>{const f=I(c);if(!(!e||!v(c,f))){if(i||s){const L=R(i,s);e.addEventListener(Y,L,{once:!0})}V(e,Y,{bubbles:!1,cancelable:!0,detail:{originalEvent:c,contextmenu:!1,focusable:K(f),target:f}})}})}return z()||(u.add(k(a,"focusin",g,!0)),u.add(m.addEventListener("focusin",g,!0)),u.add(w.addEventListener("focusin",g,!0))),()=>{clearTimeout(E),y.forEach(c=>c()),u.forEach(c=>c())}}function He(e,t){const{defer:n}=t,i=n?A:s=>s(),r=[];return r.push(i(()=>{const s=typeof e=="function"?e():e;r.push(Ce(s,t))})),()=>{r.forEach(s=>s?.())}}function V(e,t,n){const i=e.ownerDocument.defaultView||window,r=new i.CustomEvent(t,n);return e.dispatchEvent(r)}function Ne(e,t){const n=i=>{i.key==="Escape"&&(i.isComposing||t?.(i))};return k($(e),"keydown",n,{capture:!0})}var q="layer:request-dismiss",h={layers:[],branches:[],count(){return this.layers.length},pointerBlockingLayers(){return this.layers.filter(e=>e.pointerBlocking)},topMostPointerBlockingLayer(){return[...this.pointerBlockingLayers()].slice(-1)[0]},hasPointerBlockingLayer(){return this.pointerBlockingLayers().length>0},isBelowPointerBlockingLayer(e){const t=this.indexOf(e),n=this.topMostPointerBlockingLayer()?this.indexOf(this.topMostPointerBlockingLayer()?.node):-1;return t<n},isTopMost(e){return this.layers[this.count()-1]?.node===e},getNestedLayers(e){return Array.from(this.layers).slice(this.indexOf(e)+1)},isInNestedLayer(e,t){return this.getNestedLayers(e).some(n=>M(n.node,t))},isInBranch(e){return Array.from(this.branches).some(t=>M(t,e))},add(e){this.layers.push(e),this.syncLayerIndex()},addBranch(e){this.branches.push(e)},remove(e){const t=this.indexOf(e);t<0||(t<this.count()-1&&this.getNestedLayers(e).forEach(i=>h.dismiss(i.node,e)),this.layers.splice(t,1),this.syncLayerIndex())},removeBranch(e){const t=this.branches.indexOf(e);t>=0&&this.branches.splice(t,1)},syncLayerIndex(){this.layers.forEach((e,t)=>{e.node.style.setProperty("--layer-index",`${t}`)})},indexOf(e){return this.layers.findIndex(t=>t.node===e)},dismiss(e,t){const n=this.indexOf(e);if(n===-1)return;const i=this.layers[n];_e(e,q,r=>{i.requestDismiss?.(r),r.defaultPrevented||i?.dismiss()}),Ye(e,q,{originalLayer:e,targetLayer:t,originalIndex:n,targetIndex:t?this.indexOf(t):-1}),this.syncLayerIndex()},clear(){this.remove(this.layers[0].node)}};function Ye(e,t,n){const i=e.ownerDocument.defaultView||window,r=new i.CustomEvent(t,{cancelable:!0,bubbles:!0,detail:n});return e.dispatchEvent(r)}function _e(e,t,n){e.addEventListener(t,n,{once:!0})}var U;function X(){h.layers.forEach(({node:e})=>{e.style.pointerEvents=h.isBelowPointerBlockingLayer(e)?"none":"auto"})}function Ve(e){e.style.pointerEvents=""}function qe(e,t){const n=$(e),i=[];return h.hasPointerBlockingLayer()&&!n.body.hasAttribute("data-inert")&&(U=document.body.style.pointerEvents,queueMicrotask(()=>{n.body.style.pointerEvents="none",n.body.setAttribute("data-inert","")})),t?.forEach(r=>{const[s,l]=pe(()=>{const a=r();return D(a)?a:null},{timeout:1e3});s.then(a=>i.push(ye(a,{pointerEvents:"auto"}))),i.push(l)}),()=>{h.hasPointerBlockingLayer()||(queueMicrotask(()=>{n.body.style.pointerEvents=U,n.body.removeAttribute("data-inert"),n.body.style.length===0&&n.body.removeAttribute("style")}),i.forEach(r=>r()))}}function Ue(e,t){const{warnOnMissingNode:n=!0}=t;if(n&&!e){G("[@zag-js/dismissable] node is `null` or `undefined`");return}if(!e)return;const{onDismiss:i,onRequestDismiss:r,pointerBlocking:s,exclude:l,debug:a}=t,p={dismiss:i,node:e,pointerBlocking:s,requestDismiss:r};h.add(p),X();function w(o){const u=I(o.detail.originalEvent);h.isBelowPointerBlockingLayer(e)||h.isInBranch(u)||(t.onPointerDownOutside?.(o),t.onInteractOutside?.(o),!o.defaultPrevented&&(a&&console.log("onPointerDownOutside:",o.detail.originalEvent),i?.()))}function m(o){const u=I(o.detail.originalEvent);h.isInBranch(u)||(t.onFocusOutside?.(o),t.onInteractOutside?.(o),!o.defaultPrevented&&(a&&console.log("onFocusOutside:",o.detail.originalEvent),i?.()))}function v(o){h.isTopMost(e)&&(t.onEscapeKeyDown?.(o),!o.defaultPrevented&&i&&(o.preventDefault(),i()))}function y(o){if(!e)return!1;const u=typeof l=="function"?l():l,E=Array.isArray(u)?u:[u],g=t.persistentElements?.map(c=>c()).filter(D);return g&&E.push(...g),E.some(c=>M(c,o))||h.isInNestedLayer(e,o)}const P=[s?qe(e,t.persistentElements):void 0,Ne(e,v),He(e,{exclude:y,onFocusOutside:m,onPointerDownOutside:w,defer:t.defer})];return()=>{h.remove(e),X(),Ve(e),P.forEach(o=>o?.())}}function Ge(e,t){const{defer:n}=t,i=n?A:s=>s(),r=[];return r.push(i(()=>{const s=F(e)?e():e;r.push(Ue(s,t))})),()=>{r.forEach(s=>s?.())}}function Je(e,t={}){const{defer:n}=t,i=n?A:s=>s(),r=[];return r.push(i(()=>{const s=F(e)?e():e;if(!s){G("[@zag-js/dismissable] branch node is `null` or `undefined`");return}h.addBranch(s),r.push(()=>{h.removeBranch(s)})})),()=>{r.forEach(s=>s?.())}}export{He as a,Fe as b,Ge as c,Ke as g,Je as t};
