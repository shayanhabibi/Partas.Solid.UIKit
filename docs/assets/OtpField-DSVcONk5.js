import{u as B,g as j,m as v,s as b,a as w,b as W,e as _,c as m,t as L,C as ne,S as re,k as oe,j as z,q as K,i as D,d as ae,l as se,w as ie}from"./iframe-CSkHCzVC.js";import{D as U,c as le,s as ce,u as N,a as q,o as ue,i as de}from"./size-0gw4DPuf.js";import{c as G,a as S,d as pe}from"./GZJAOTUE-Cj1OtU2l.js";import{m as Z}from"./U42ECMND-BDjyePcW.js";import{L as R}from"./Utils-Bukfxs-o.js";import{g as fe}from"./Array-ClWTAlF8.js";import{n as ge}from"./Util-CLBO94nE.js";import{I as me}from"./Icon-CbvvIQH_.js";var ve=L("<noscript>"),J=j(),he=r=>r===void 0?J:q(`otp-field-${r}`),Q=r=>{if(r===void 0){const e=B(J);if(!e)throw new Error("[corvu]: OTP Field context not found. Make sure to wrap OTP Field components in <OtpField.Root>");return e}const s=N(`otp-field-${r}`);if(!s)throw new Error(`[corvu]: OTP Field context with id "${r}" not found. Make sure to wrap OTP Field components in <OtpField.Root contextId="${r}">`);return s},X=j(),Se=r=>r===void 0?X:q(`otp-field-internal-${r}`),xe=r=>{if(r===void 0){const e=B(X);if(!e)throw new Error("[corvu]: OTP Field context not found. Make sure to wrap OTP Field components in <OtpField.Root>");return e}const s=N(`otp-field-internal-${r}`);if(!s)throw new Error(`[corvu]: OTP Field context with id "${r}" not found. Make sure to wrap OTP Field components in <OtpField.Root contextId="${r}">`);return s},x=null,H=0,be=()=>{if(H+=1,x)return;x=document.createElement("style"),document.head.appendChild(x);const r="background: transparent !important; color: transparent !important; border-color: transparent !important; opacity: 0 !important; box-shadow: none !important; -webkit-box-shadow: none !important; -webkit-text-fill-color: transparent !important;",s=`
    [data-corvu-otp-field-input]::selection { background: transparent !important; color: transparent !important; }';
    [data-corvu-otp-field-input]:autofill { ${r} };
    [data-corvu-otp-field-input]:-webkit-autofill { ${r} };
    @supports (-webkit-touch-callout: none) { [data-corvu-otp-field-input] { letter-spacing: -.6em !important; font-weight: 100 !important; font-stretch: ultra-condensed; font-optical-sizing: none !important; left: -1px !important; right: 1px !important; } };
    [data-corvu-otp-field-input] + * { pointer-events: all !important; };
  `;x.innerHTML=s,z(()=>{H-=1,H===0&&x&&(x.remove(),x=null)})},Oe=be,Fe=r=>{const s=v({pattern:"^\\d*$",noScriptCSSFallback:we},r),[e,d]=b(s,["pattern","noScriptCSSFallback","ref","onInput","onFocus","onBlur","onMouseOver","onMouseLeave","onKeyDown","onKeyUp","autocomplete","disabled","spellcheck","style","contextId"]),i={inserting:!1,start:null,end:null};let u=!1;const[p,g]=w(null),a=W(()=>xe(e.contextId));_(()=>{Oe();const t=()=>F();document.addEventListener("selectionchange",t),z(()=>{document.removeEventListener("selectionchange",t)})}),_(()=>{const t=p();if(!t)return;const n=t.form;if(!n)return;const o=()=>{pe(()=>{a().setValue(t.value)})};n.addEventListener("reset",o),z(()=>{n.removeEventListener("reset",o)})}),_(()=>{const t=p();t&&(t.value=a().value())});const O=W(()=>e.pattern!==null?new RegExp(e.pattern):void 0),k=t=>{if(S(e.onInput,t))return;const n=t.currentTarget.value;let o=n;const c=a().value(),f=Math.abs((i.start??0)-(i.end??0)),l=O();(i.inserting||f===c.length)&&l&&(o=o.replace(new RegExp(`[^${l.source}]`,"g"),"")),o=o.slice(0,a().maxLength());const h=!!l&&!l.test(o);if(n.length!==0&&o.length===0||o===c||h){t.preventDefault(),t.currentTarget.value=c,h&&t.currentTarget.setSelectionRange(i.start??0,i.end??0);return}o.length<c.length&&F(t.inputType),a().setValue(o)},C=t=>{S(e.onFocus,t)||(t.currentTarget.setSelectionRange(a().value().length,a().value().length),a().setIsFocused(!0),F())},A=t=>{S(e.onBlur,t)||(u=!1,a().setIsFocused(!1),F())},P=t=>{!S(e.onMouseOver,t)&&e.disabled!==!0&&a().setIsHovered(!0)},T=t=>{!S(e.onMouseLeave,t)&&a().setIsHovered(!1)},y=t=>{S(e.onKeyDown,t)||t.key==="Shift"&&(u=!0)},I=t=>{S(e.onKeyUp,t)||t.key==="Shift"&&(u=!1)},F=t=>{const n=p();if(!n)return;if(a().isFocused()===!1||document.activeElement!==n||n.selectionStart===null||n.selectionEnd===null){E({start:null,end:null,inserting:!1,originalStart:n.selectionStart,originalEnd:n.selectionEnd}),a().setIsInserting(!1);return}const o=a().maxLength(),c=n.value.length<o&&n.selectionStart===n.value.length;if(a().setIsInserting(c),c||n.selectionStart!==n.selectionEnd){E({start:n.selectionStart,end:c?n.selectionEnd+1:n.selectionEnd,inserting:c,originalStart:n.selectionStart,originalEnd:n.selectionEnd});return}let f=0,l=0,h;if(n.selectionStart===0)f=0,l=1,h="forward";else if(n.selectionStart===o)f=o-1,l=o,h="backward";else{let $=0,V=1;if(i.start!==null&&i.end!==null){const M=n.selectionStart<i.end&&Math.abs(i.start-i.end)===1;h=M?"backward":"forward",(M&&!i.inserting&&t!=="deleteContentForward"||!M&&u)&&($+=-1)}u&&t===void 0&&(V+=1),f=n.selectionStart+$,l=n.selectionEnd+$+V}n.setSelectionRange(f,l,h),E({start:f,end:l,inserting:c,originalStart:n.selectionStart,originalEnd:n.selectionEnd})},E=t=>{i.inserting=t.inserting,i.start=t.originalStart,i.end=t.originalEnd;const n=t.start,o=t.end;if(n===null||o===null){a().setActiveSlots([]);return}const c=Array.from({length:o-n},(f,l)=>n+l);a().setActiveSlots(c)};return[m(re,{get when(){return e.noScriptCSSFallback!==null&&ne},get children(){return ve()}}),m(U,v({as:"input",ref(t){var n=Z(g,e.ref);typeof n=="function"&&n(t)},onInput:k,onFocus:C,onBlur:A,onMouseOver:P,onMouseLeave:T,onKeyDown:y,onKeyUp:I,inputMode:"numeric",get autocomplete(){return e.autocomplete??"one-time-code"},get disabled(){return e.disabled},get spellcheck(){return e.spellcheck??!1},get style(){return G({display:"flex",position:"absolute",inset:0,width:a().shiftPWManagers()?"calc(100% + 40px)":"100%","clip-path":a().shiftPWManagers()?"inset(0 40px 0 0)":void 0,height:"100%",padding:0,color:"transparent",background:"transparent","caret-color":"transparent",border:"0 solid transparent",outline:"0 solid transparent","box-shadow":"none","line-height":"1","letter-spacing":"-1em","font-family":"monospace","font-variant-numeric":"tabular-nums","font-size":`${a().rootHeight()}px`,"pointer-events":"all"},e.style)},get pattern(){return O()?.source},"data-corvu-otp-field-input":""},d))]},we=`
[data-corvu-otp-field-input] {
  color: black !important;
  background-color: white !important;
  caret-color: black !important;
  letter-spacing: inherit !important;
  text-align: center !important;
  border: 1px solid black !important;
  width: 100% !important;
  font-size: inherit !important;
  clip-path: none !important;
}
`,Y=Fe,Ce=r=>{const s=v({shiftPWManagers:!0},r),[e,d]=b(s,["maxLength","value","onValueChange","onComplete","shiftPWManagers","contextId","ref","style","children"]),[i,u]=w(null),[p,g]=le({value:()=>e.value,initialValue:"",onChange:e.onValueChange}),a=ce({element:i,dimension:"height"});_(()=>{const o=p();o.length===e.maxLength&&e.onComplete?.(o)});const[O,k]=w(!1),[C,A]=w(!1),[P,T]=w(!1),[y,I]=w([]),F={get value(){return p()},get isFocused(){return O()},get isHovered(){return C()},get isInserting(){return P()},get maxLength(){return e.maxLength},get activeSlots(){return y()},get shiftPWManagers(){return e.shiftPWManagers}},E=ue(()=>e.children),t=()=>{const o=E()();return de(o)?o(F):o};return W(()=>{const o=he(e.contextId),c=Se(e.contextId);return m(o.Provider,{value:{value:p,isFocused:O,isHovered:C,isInserting:P,maxLength:()=>e.maxLength,activeSlots:y,shiftPWManagers:()=>e.shiftPWManagers},get children(){return m(c.Provider,{value:{value:p,isFocused:O,isHovered:C,isInserting:P,maxLength:()=>e.maxLength,activeSlots:y,shiftPWManagers:()=>e.shiftPWManagers,rootHeight:a,setValue:g,setIsFocused:k,setIsHovered:A,setIsInserting:T,setActiveSlots:I},get children(){return m(U,v({as:"div",ref(f){var l=Z(u,e.ref);typeof l=="function"&&l(f)},get style(){return G({position:"relative","user-select":"none","-webkit-user-select":"none","pointer-events":"none"},e.style)},"data-corvu-otp-field-root":""},d,{get children(){return oe(()=>t())}}))}})}})})},ee=Ce;Object.assign(ee,{Input:Y,useContext:Q});var Pe=[["circle",{cx:"12.1",cy:"12.1",r:"1",key:"18d7e5"}]],ye=r=>m(me,v(r,{iconNode:Pe,name:"dot"})),Ee=ye,te=L("<div>"),_e=L("<div><div>"),Re=L('<div class="pointer-events-none absolute inset-0 flex items-center justify-center"><div class="h-4 w-px animate-caret-blink bg-foreground duration-1000">');function We(r){const[s,e]=b(r,["class"]);return m(ee,v({get class(){return R(["flex items-center gap-2 disabled:cursor-not-allowed has-[:disabled]:opacity-50",s.class])}},e,{"bool:n$":!1}))}function ze(r){const[s,e]=b(r,[]);return m(Y,v(e,{"bool:n$":!1}))}function De(r){const[s,e]=b(r,["class"]);return(()=>{var d=te();return K(d,v({get class(){return R(["flex items-center",s.class])}},e),!1,!1),d})()}function Ke(r){let s;const[e,d]=b(r,["class","index"]),i=Q();return(()=>{var u=_e(),p=u.firstChild;return K(u,v({get class(){return R([`group relative flex size-10 items-center justify-center\r
                border-y border-r border-input text-sm first:rounded-l-md\r
                first:border-l last:rounded-r-md`,e.class])}},d),!1,!0),D(u,()=>i.value()[e.index],null),D(u,(()=>{var g=ae(()=>!!(i.value().length===e.index&&i.isInserting()));return()=>g()?Re():void 0})(),null),se(()=>ie(p,R(["absolute inset-0 z-10 transition-all group-first:rounded-l-md group-last:rounded-r-md",(s=i.activeSlots(),fe(e.index,s,{Equals:(g,a)=>g===a,GetHashCode:g=>ge(g)|0})&&"ring-2 ring-ring ring-offset-background")]))),u})()}function Ve(r){const[s,e]=b(r,[]);return(()=>{var d=te();return K(d,e,!1,!0),D(d,m(Ee,{class:"size-6",strokeWidth:2})),d})()}export{We as O,ze as a,De as b,Ke as c,Ve as d};
