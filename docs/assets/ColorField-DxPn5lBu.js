import{s as m,c as s,m as g,a as x,d as w,g as E,u as R,h as $,y as T,e as A,b,t as I,i as F,l as B,w as D}from"./iframe-CxGoIJAb.js";import{U as O}from"./Types-M7ke1IWY.js";import{d as k}from"./Option-BhX2R0kg.js";import{p as y,C as H}from"./ColorSwatch-DQmfIeoj.js";import{T as M,a as U}from"./MKJEDDFV-BsBByKur.js";import{d as S,e as W,f as Z}from"./ZZYKR3VO-BhF5XW0P.js";import{b as j}from"./FN6EICGO-lOlungVQ.js";import{e as q,m as z}from"./index-DQYZI0kA.js";import{L as f}from"./Utils-C5KSfAah.js";var _=E();function N(){const t=R(_);if(t===void 0)throw new Error("[kobalte]: `useColorFieldContext` must be used within a `ColorField` component");return t}function V(t){const e=N(),[n,l]=m(t,["onBlur"]);return s(M,g({autoComplete:"off",autoCorrect:"off",spellCheck:"false",get onBlur(){return q([n.onBlur,e.onBlur])}},l))}function L(t){const e=`colorfield-${$()}`,n=z({id:e},t),[l,p]=m(n,["value","defaultValue","onChange"]),c=x(()=>{let r=l.defaultValue;try{r=y(r?.startsWith("#")?r:`#${r}`).toString("hex")}catch{r=""}return r}),[a,u]=j({value:()=>l.value,defaultValue:c,onChange:r=>l.onChange?.(r)}),[d,h]=w(a()),i=r=>{G(r)&&u(r)},C={onBlur:r=>{if(!a().length){h("");return}let v;try{v=y(a().startsWith("#")?a():`#${a()}`).toString("hex")}catch{d()?u(d()):u("");return}T(()=>{u(v),h(v)})}};return s(_.Provider,{value:C,get children(){return s(U,g({get value(){return a()},get defaultValue(){return c()},onChange:i},p))}})}function G(t){return t===""||!!t.match(/^#?[0-9a-f]{0,6}$/i)?.[0]}Object.assign(L,{Description:Z,ErrorMessage:W,Input:V,Label:S});var J=I("<div>");class P extends O{constructor(e,n){super(),this.tag=e,this.fields=n}cases(){return["Description","Error","Label"]}}function K(t){const e=k(t,new P(2,[]));return"text-sm font-medium leading-none peer-disabled:cursor-not-allowedpeer-disabled:opacity-70 group-disabled:opacity-70group-disabled:cursor-not-allowed "+(e.tag===1?"text-xs text-destructive":e.tag===2?"data-[invalid]:text-destructive":"font-normal text-muted-foreground")}function Q(t){const[e,n]=m(t,["class"]);return s(S,g({get class(){return f([K(new P(2,[])),e.class])}},n,{"bool:n$":!1}))}function se(t){t=g({swatchType:"left",slots:{}},t);const[e,n]=m(t,["value","onChange","onColorChange","color","class","slots","label","swatchType"]),l=w(void 0),p=l[1],c=x(()=>e.value?e.value:l[0]()),a=o=>{e.onChange?e.onChange(o):p(o)},u=w(void 0),d=u[1],h=x(()=>e.onColorChange?o=>{T(()=>{d(o),e.onColorChange(o)})}:d),i=()=>e.color?e.color:u[0]();return A(()=>{i()&&c()&&a(i().toString("hexa"))}),A(()=>{try{h()(y(c()))}catch{}}),s(L,g({get class(){return f(["group flex flex-col gap-1",e.class,e.slots.root])},onChange:o=>{T(()=>{p(o),a(o)})},get value(){return c()}},n,{"bool:n$":!1,get children(){return[b(()=>b(()=>!!e.label)()?s(Q,{get class(){return e.slots.label},get children(){return e.label}}):void 0),(()=>{var o=J();return F(o,(()=>{var C=b(()=>!!(i()&&e.swatchType!=="none"));return()=>C()?s(H,{get value(){return i()},get class(){return f(["place-self-center",e.slots.root])}}):void 0})(),null),F(o,s(V,{get class(){return f(["grow size-full outline-none pl-1",e.slots.input])}}),null),B(()=>D(o,f(["flex h-10 w-full rounded-md border border-input bg-transparent px-2 py-2 text-sm ring-offset-background placeholder:text-muted-foreground has-focus-visible:outline-none has-focus-visible:ring-2 has-focus-visible:ring-ring has-focus-visible:ring-offset-2 has-disabled:cursor-not-allowed has-disabled:opacity-50 has-data-[invalid]:border-error-foreground has-data-[invalid]:text-error-foreground",e.swatchType==="left"?i()?"flex-row pl-1":"flex-row":e.swatchType==="none"?"":"flex-row-reverse pr-1",e.slots.input]))),o})()]}}))}export{se as C};
