import{b as u,h as g,k as x,c as o,m as i,l as v,g as w,s as c,n as P,u as R,q as h}from"./iframe-mHl6JQ-c.js";import{P as d}from"./FLVHQV4A-DzmScvHC.js";import{_ as k}from"./5WXHJDCZ-DghNgBBa.js";import{L as m}from"./Utils-CYryE0IK.js";var _={};k(_,{Fallback:()=>S,Image:()=>y,Img:()=>b,Root:()=>A,useImageContext:()=>f});var C=P();function f(){const e=R(C);if(e===void 0)throw new Error("[kobalte]: `useImageContext` must be used within an `Image.Root` component");return e}function S(e){const a=f(),[t,s]=u(a.fallbackDelay()===void 0);return g(()=>{const n=a.fallbackDelay();if(n!==void 0){const l=window.setTimeout(()=>s(!0),n);h(()=>window.clearTimeout(l))}}),o(v,{get when(){return w(()=>!!t())()&&a.imageLoadingStatus()!=="loaded"},get children(){return o(d,i({as:"span"},e))}})}function b(e){const a=f(),[t,s]=u("idle");return g(x(()=>e.src,n=>{if(!n){s("error");return}let l=!0;const r=new window.Image,I=L=>()=>{l&&s(L)};s("loading"),e.crossOrigin!==void 0&&(r.crossOrigin=e.crossOrigin),e.referrerPolicy!==void 0&&(r.referrerPolicy=e.referrerPolicy),r.onload=I("loaded"),r.onerror=I("error"),r.src=n,h(()=>{l=!1})})),g(()=>{const n=t();n!=="idle"&&a.onImageLoadingStatusChange(n)}),o(v,{get when(){return t()==="loaded"},get children(){return o(d,i({as:"img"},e))}})}function A(e){const[a,t]=c(e,["fallbackDelay","onLoadingStatusChange"]),[s,n]=u("idle"),l={fallbackDelay:()=>a.fallbackDelay,imageLoadingStatus:s,onImageLoadingStatusChange:r=>{n(r),a.onLoadingStatusChange?.(r)}};return o(C.Provider,{value:l,get children(){return o(d,i({as:"span"},t))}})}var y=Object.assign(A,{Fallback:S,Img:b});function E(e){const[a,t]=c(e,["class"]);return o(A,i({get class(){return m(["relative flex size-8 shrink-0 overflow-hidden rounded-full",a.class])},"data-slot":"avatar"},t,{"bool:n$":!1}))}function F(e){const[a,t]=c(e,["class"]);return o(b,i({get class(){return m(["aspect-square size-full",a.class])},"data-slot":"avatar-image"},t,{"bool:n$":!1}))}function z(e){const[a,t]=c(e,["class"]);return o(S,i({get class(){return m(["flex size-full items-center justify-center bg-muted",a.class])},"data-slot":"avatar-fallback"},t,{"bool:n$":!1}))}export{E as A,F as a,z as b};
