import{s as u,c as l,m as g,d as E,e as x,P as K,S as y,a as d,g as Q,u as V,h as X,j as R}from"./iframe-BLvaHOrW.js";import{c as Y,a as Z}from"./FBCYWU27-BMpJGD58.js";import{D as ee}from"./3VFJM5NZ-Df8-87fx.js";import{c as te}from"./E53DB7BS-DgMsdUV6.js";import{B}from"./UKTBL2JL-mrSn-dg4.js";import{c as h}from"./JNCCF6MP-4sxnBYeu.js";import{P as b}from"./FLVHQV4A-ByRBKILc.js";import{_ as oe}from"./5WXHJDCZ-DghNgBBa.js";import{m as C,c as ne,a as w,d as re,f as _}from"./index-TpYiyspx.js";import{s as se}from"./index-BAQLNUOo.js";import{s as A}from"./index-D5LuZuuz.js";import{m as T}from"./index-BbcR3rHk.js";import{c as ie}from"./combineProps-TuyxsfEg.js";var ae={};oe(ae,{CloseButton:()=>L,Content:()=>M,Description:()=>N,Dialog:()=>le,Overlay:()=>j,Portal:()=>G,Root:()=>H,Title:()=>U,Trigger:()=>q,useDialogContext:()=>c});var $=Q();function c(){const n=V($);if(n===void 0)throw new Error("[kobalte]: `useDialogContext` must be used within a `Dialog` component");return n}function L(n){const t=c(),[e,i]=u(n,["aria-label","onClick"]);return l(B,g({get"aria-label"(){return e["aria-label"]||t.translations().dismiss},onClick:r=>{w(r,e.onClick),t.close()}},i))}function M(n){let t;const e=c(),i=C({id:e.generateId("content")},n),[s,r]=u(i,["ref","onOpenAutoFocus","onCloseAutoFocus","onPointerDownOutside","onFocusOutside","onInteractOutside"]);let a=!1,f=!1;const P=o=>{s.onPointerDownOutside?.(o),e.modal()&&o.detail.isContextMenu&&o.preventDefault()},p=o=>{s.onFocusOutside?.(o),e.modal()&&o.preventDefault()},I=o=>{s.onInteractOutside?.(o),!e.modal()&&(o.defaultPrevented||(a=!0,o.detail.originalEvent.type==="pointerdown"&&(f=!0)),re(e.triggerRef(),o.target)&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&f&&o.preventDefault())},m=o=>{s.onCloseAutoFocus?.(o),e.modal()?(o.preventDefault(),_(e.triggerRef())):(o.defaultPrevented||(a||_(e.triggerRef()),o.preventDefault()),a=!1,f=!1)};return Y({isDisabled:()=>!(e.isOpen()&&e.modal()),targets:()=>t?[t]:[]}),se({element:()=>t??null,enabled:()=>e.contentPresent()&&e.preventScroll()}),Z({trapFocus:()=>e.isOpen()&&e.modal(),onMountAutoFocus:s.onOpenAutoFocus,onUnmountAutoFocus:m},()=>t),x(()=>R(e.registerContentId(r.id))),l(y,{get when(){return e.contentPresent()},get children(){return l(ee,g({ref(o){var D=T(v=>{e.setContentRef(v),t=v},s.ref);typeof D=="function"&&D(o)},role:"dialog",tabIndex:-1,get disableOutsidePointerEvents(){return E(()=>!!e.modal())()&&e.isOpen()},get excludedElements(){return[e.triggerRef]},get"aria-labelledby"(){return e.titleId()},get"aria-describedby"(){return e.descriptionId()},get"data-expanded"(){return e.isOpen()?"":void 0},get"data-closed"(){return e.isOpen()?void 0:""},onPointerDownOutside:P,onFocusOutside:p,onInteractOutside:I,get onDismiss(){return e.close}},r))}})}function N(n){const t=c(),e=C({id:t.generateId("description")},n),[i,s]=u(e,["id"]);return x(()=>R(t.registerDescriptionId(i.id))),l(b,g({as:"p",get id(){return i.id}},s))}function j(n){const t=c(),[e,i]=u(n,["ref","style","onPointerDown"]),s=r=>{w(r,e.onPointerDown),r.target===r.currentTarget&&r.preventDefault()};return l(y,{get when(){return t.overlayPresent()},get children(){return l(b,g({as:"div",ref(r){var a=T(t.setOverlayRef,e.ref);typeof a=="function"&&a(r)},get style(){return ie({"pointer-events":"auto"},e.style)},get"data-expanded"(){return t.isOpen()?"":void 0},get"data-closed"(){return t.isOpen()?void 0:""},onPointerDown:s},i))}})}function G(n){const t=c();return l(y,{get when(){return t.contentPresent()||t.overlayPresent()},get children(){return l(K,n)}})}var k={dismiss:"Dismiss"};function H(n){const t=`dialog-${X()}`,e=C({id:t,modal:!0,translations:k},n),[i,s]=d(),[r,a]=d(),[f,P]=d(),[p,I]=d(),[m,o]=d(),[D,v]=d(),O=te({open:()=>e.open,defaultOpen:()=>e.defaultOpen,onOpenChange:J=>e.onOpenChange?.(J)}),S=()=>e.forceMount||O.isOpen(),{present:W}=A({show:S,element:()=>p()??null}),{present:z}=A({show:S,element:()=>m()??null}),F={translations:()=>e.translations??k,isOpen:O.isOpen,modal:()=>e.modal??!0,preventScroll:()=>e.preventScroll??F.modal(),contentId:i,titleId:r,descriptionId:f,triggerRef:D,overlayRef:p,setOverlayRef:I,contentRef:m,setContentRef:o,overlayPresent:W,contentPresent:z,close:O.close,toggle:O.toggle,setTriggerRef:v,generateId:ne(()=>e.id),registerContentId:h(s),registerTitleId:h(a),registerDescriptionId:h(P)};return l($.Provider,{value:F,get children(){return e.children}})}function U(n){const t=c(),e=C({id:t.generateId("title")},n),[i,s]=u(e,["id"]);return x(()=>R(t.registerTitleId(i.id))),l(b,g({as:"h2",get id(){return i.id}},s))}function q(n){const t=c(),[e,i]=u(n,["ref","onClick"]);return l(B,g({ref(r){var a=T(t.setTriggerRef,e.ref);typeof a=="function"&&a(r)},"aria-haspopup":"dialog",get"aria-expanded"(){return t.isOpen()},get"aria-controls"(){return E(()=>!!t.isOpen())()?t.contentId():void 0},get"data-expanded"(){return t.isOpen()?"":void 0},get"data-closed"(){return t.isOpen()?void 0:""},onClick:r=>{w(r,e.onClick),t.toggle()}},i))}var le=Object.assign(H,{CloseButton:L,Content:M,Description:N,Overlay:j,Portal:G,Title:U,Trigger:q});export{q as D,U as a,N as b,M as c,H as d,j as e,G as f,L as g};
