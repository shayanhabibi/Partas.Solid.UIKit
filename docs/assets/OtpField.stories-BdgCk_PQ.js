import{m as g,s as b,a as C,f as R,b as z,h as K,c as l,t as k,O as ie,S as le,u as q,d as Y,k as ce,p as B,i as V,e as ue,l as de,w as pe}from"./iframe-BM9GGKTp.js";import{c as fe,s as me,D as Z,u as J,a as Q,o as ge,i as he}from"./size-3n9qgNTe.js";import{a as ve,b as X,d as x}from"./GZJAOTUE-C8veUlZR.js";import{m as ee}from"./U42ECMND-BDjyePcW.js";import{L as T}from"./Utils-D0o1erub.js";import{c as xe}from"./Array-DWVpP4VG.js";import{n as Se}from"./Util-1esvhydp.js";import{I as be}from"./Icon-BM3j_ew-.js";import"./preload-helper-PPVm8Dsz.js";import"./Option-CYzlgCrd.js";var ye=k("<noscript>"),te=Y(),Oe=r=>r===void 0?te:Q(`otp-field-${r}`),ne=r=>{if(r===void 0){const e=q(te);if(!e)throw new Error("[corvu]: OTP Field context not found. Make sure to wrap OTP Field components in <OtpField.Root>");return e}const s=J(`otp-field-${r}`);if(!s)throw new Error(`[corvu]: OTP Field context with id "${r}" not found. Make sure to wrap OTP Field components in <OtpField.Root contextId="${r}">`);return s},re=Y(),Fe=r=>r===void 0?re:Q(`otp-field-internal-${r}`),Ce=r=>{if(r===void 0){const e=q(re);if(!e)throw new Error("[corvu]: OTP Field context not found. Make sure to wrap OTP Field components in <OtpField.Root>");return e}const s=J(`otp-field-internal-${r}`);if(!s)throw new Error(`[corvu]: OTP Field context with id "${r}" not found. Make sure to wrap OTP Field components in <OtpField.Root contextId="${r}">`);return s},S=null,W=0,_e=()=>{if(W+=1,S)return;S=document.createElement("style"),document.head.appendChild(S);const r="background: transparent !important; color: transparent !important; border-color: transparent !important; opacity: 0 !important; box-shadow: none !important; -webkit-box-shadow: none !important; -webkit-text-fill-color: transparent !important;",s=`
    [data-corvu-otp-field-input]::selection { background: transparent !important; color: transparent !important; }';
    [data-corvu-otp-field-input]:autofill { ${r} };
    [data-corvu-otp-field-input]:-webkit-autofill { ${r} };
    @supports (-webkit-touch-callout: none) { [data-corvu-otp-field-input] { letter-spacing: -.6em !important; font-weight: 100 !important; font-stretch: ultra-condensed; font-optical-sizing: none !important; left: -1px !important; right: 1px !important; } };
    [data-corvu-otp-field-input] + * { pointer-events: all !important; };
  `;S.innerHTML=s,K(()=>{W-=1,W===0&&S&&(S.remove(),S=null)})},we=_e,Pe=r=>{const s=g({pattern:"^\\d*$",noScriptCSSFallback:Ee},r),[e,p]=b(s,["pattern","noScriptCSSFallback","ref","onInput","onFocus","onBlur","onMouseOver","onMouseLeave","onKeyDown","onKeyUp","autocomplete","disabled","spellcheck","style","contextId"]),i={inserting:!1,start:null,end:null};let d=!1;const[f,h]=C(null),a=z(()=>Ce(e.contextId));R(()=>{we();const t=()=>O();document.addEventListener("selectionchange",t),K(()=>{document.removeEventListener("selectionchange",t)})}),R(()=>{const t=f();if(!t)return;const n=t.form;if(!n)return;const o=()=>{ve(()=>{a().setValue(t.value)})};n.addEventListener("reset",o),K(()=>{n.removeEventListener("reset",o)})}),R(()=>{const t=f();t&&(t.value=a().value())});const y=z(()=>e.pattern!==null?new RegExp(e.pattern):void 0),A=t=>{if(x(e.onInput,t))return;const n=t.currentTarget.value;let o=n;const u=a().value(),m=Math.abs((i.start??0)-(i.end??0)),c=y();(i.inserting||m===u.length)&&c&&(o=o.replace(new RegExp(`[^${c.source}]`,"g"),"")),o=o.slice(0,a().maxLength());const v=!!c&&!c.test(o);if(n.length!==0&&o.length===0||o===u||v){t.preventDefault(),t.currentTarget.value=u,v&&t.currentTarget.setSelectionRange(i.start??0,i.end??0);return}o.length<u.length&&O(t.inputType),a().setValue(o)},_=t=>{x(e.onFocus,t)||(t.currentTarget.setSelectionRange(a().value().length,a().value().length),a().setIsFocused(!0),O())},I=t=>{x(e.onBlur,t)||(d=!1,a().setIsFocused(!1),O())},w=t=>{!x(e.onMouseOver,t)&&e.disabled!==!0&&a().setIsHovered(!0)},$=t=>{!x(e.onMouseLeave,t)&&a().setIsHovered(!1)},P=t=>{x(e.onKeyDown,t)||t.key==="Shift"&&(d=!0)},M=t=>{x(e.onKeyUp,t)||t.key==="Shift"&&(d=!1)},O=t=>{const n=f();if(!n)return;if(a().isFocused()===!1||document.activeElement!==n||n.selectionStart===null||n.selectionEnd===null){E({start:null,end:null,inserting:!1,originalStart:n.selectionStart,originalEnd:n.selectionEnd}),a().setIsInserting(!1);return}const o=a().maxLength(),u=n.value.length<o&&n.selectionStart===n.value.length;if(a().setIsInserting(u),u||n.selectionStart!==n.selectionEnd){E({start:n.selectionStart,end:u?n.selectionEnd+1:n.selectionEnd,inserting:u,originalStart:n.selectionStart,originalEnd:n.selectionEnd});return}let m=0,c=0,v;if(n.selectionStart===0)m=0,c=1,v="forward";else if(n.selectionStart===o)m=o-1,c=o,v="backward";else{let H=0,U=1;if(i.start!==null&&i.end!==null){const D=n.selectionStart<i.end&&Math.abs(i.start-i.end)===1;v=D?"backward":"forward",(D&&!i.inserting&&t!=="deleteContentForward"||!D&&d)&&(H+=-1)}d&&t===void 0&&(U+=1),m=n.selectionStart+H,c=n.selectionEnd+H+U}n.setSelectionRange(m,c,v),E({start:m,end:c,inserting:u,originalStart:n.selectionStart,originalEnd:n.selectionEnd})},E=t=>{i.inserting=t.inserting,i.start=t.originalStart,i.end=t.originalEnd;const n=t.start,o=t.end;if(n===null||o===null){a().setActiveSlots([]);return}const u=Array.from({length:o-n},(m,c)=>n+c);a().setActiveSlots(u)};return[l(le,{get when(){return e.noScriptCSSFallback!==null&&ie},get children(){return ye()}}),l(Z,g({as:"input",ref(t){var n=ee(h,e.ref);typeof n=="function"&&n(t)},onInput:A,onFocus:_,onBlur:I,onMouseOver:w,onMouseLeave:$,onKeyDown:P,onKeyUp:M,inputMode:"numeric",get autocomplete(){return e.autocomplete??"one-time-code"},get disabled(){return e.disabled},get spellcheck(){return e.spellcheck??!1},get style(){return X({display:"flex",position:"absolute",inset:0,width:a().shiftPWManagers()?"calc(100% + 40px)":"100%","clip-path":a().shiftPWManagers()?"inset(0 40px 0 0)":void 0,height:"100%",padding:0,color:"transparent",background:"transparent","caret-color":"transparent",border:"0 solid transparent",outline:"0 solid transparent","box-shadow":"none","line-height":"1","letter-spacing":"-1em","font-family":"monospace","font-variant-numeric":"tabular-nums","font-size":`${a().rootHeight()}px`,"pointer-events":"all"},e.style)},get pattern(){return y()?.source},"data-corvu-otp-field-input":""},p))]},Ee=`
[data-corvu-otp-field-input] {
  color: black !important;
  background-color: white !important;
  caret-color: black !important;
  letter-spacing: inherit !important;
  text-align: center !important;
  border: 1px solid black !important;
  width: 100% !important;
  font-size: inherit !important;
  clip-path: none !important;
}
`,oe=Pe,Le=r=>{const s=g({shiftPWManagers:!0},r),[e,p]=b(s,["maxLength","value","onValueChange","onComplete","shiftPWManagers","contextId","ref","style","children"]),[i,d]=C(null),[f,h]=fe({value:()=>e.value,initialValue:"",onChange:e.onValueChange}),a=me({element:i,dimension:"height"});R(()=>{const o=f();o.length===e.maxLength&&e.onComplete?.(o)});const[y,A]=C(!1),[_,I]=C(!1),[w,$]=C(!1),[P,M]=C([]),O={get value(){return f()},get isFocused(){return y()},get isHovered(){return _()},get isInserting(){return w()},get maxLength(){return e.maxLength},get activeSlots(){return P()},get shiftPWManagers(){return e.shiftPWManagers}},E=ge(()=>e.children),t=()=>{const o=E()();return he(o)?o(O):o};return z(()=>{const o=Oe(e.contextId),u=Fe(e.contextId);return l(o.Provider,{value:{value:f,isFocused:y,isHovered:_,isInserting:w,maxLength:()=>e.maxLength,activeSlots:P,shiftPWManagers:()=>e.shiftPWManagers},get children(){return l(u.Provider,{value:{value:f,isFocused:y,isHovered:_,isInserting:w,maxLength:()=>e.maxLength,activeSlots:P,shiftPWManagers:()=>e.shiftPWManagers,rootHeight:a,setValue:h,setIsFocused:A,setIsHovered:I,setIsInserting:$,setActiveSlots:M},get children(){return l(Z,g({as:"div",ref(m){var c=ee(d,e.ref);typeof c=="function"&&c(m)},get style(){return X({position:"relative","user-select":"none","-webkit-user-select":"none","pointer-events":"none"},e.style)},"data-corvu-otp-field-root":""},p,{get children(){return ce(()=>t())}}))}})}})})},ae=Le;Object.assign(ae,{Input:oe,useContext:ne});var Re=[["circle",{cx:"12.1",cy:"12.1",r:"1",key:"18d7e5"}]],Te=r=>l(be,g(r,{iconNode:Re,name:"dot"})),ke=Te,se=k("<div>"),Ae=k("<div><div>"),Ie=k('<div class="pointer-events-none absolute inset-0 flex items-center justify-center"><div class="h-4 w-px animate-caret-blink bg-foreground duration-1000">');function j(r){const[s,e]=b(r,["class"]);return l(ae,g({get class(){return T(["flex items-center gap-2 disabled:cursor-not-allowed has-[:disabled]:opacity-50",s.class])}},e,{"bool:n$":!1}))}function $e(r){const[s,e]=b(r,[]);return l(oe,g(e,{"bool:n$":!1}))}function N(r){const[s,e]=b(r,["class"]);return(()=>{var p=se();return B(p,g({get class(){return T(["flex items-center",s.class])}},e),!1,!1),p})()}function F(r){let s;const[e,p]=b(r,["class","index"]),i=ne();return(()=>{var d=Ae(),f=d.firstChild;return B(d,g({get class(){return T([`group relative flex size-10 items-center justify-center\r
                border-y border-r border-input text-sm first:rounded-l-md\r
                first:border-l last:rounded-r-md`,e.class])}},p),!1,!0),V(d,()=>i.value()[e.index],null),V(d,(()=>{var h=ue(()=>!!(i.value().length===e.index&&i.isInserting()));return()=>h()?Ie():void 0})(),null),de(()=>pe(f,T(["absolute inset-0 z-10 transition-all group-first:rounded-l-md group-last:rounded-r-md",(s=i.activeSlots(),xe(e.index,s,{Equals:(h,a)=>h===a,GetHashCode:h=>Se(h)|0})&&"ring-2 ring-ring ring-offset-background")]))),d})()}function Me(r){const[s,e]=b(r,[]);return(()=>{var p=se();return B(p,e,!1,!0),V(p,l(ke,{class:"size-6",strokeWidth:2})),p})()}const{fn:G}=__STORYBOOK_MODULE_TEST__,Ge={args:{onValueChange:G(),onComplete:G()},argTypes:{maxLength:{control:{type:"number",max:2147483647,min:-2147483648,step:1},table:{type:{summary:"int32"}}},value:{control:{type:"text"},table:{type:{summary:"string"}}},onValueChange:{control:{type:!1},table:{type:{summary:"function"}}},onComplete:{control:{type:!1},table:{type:{summary:"function"}}},shiftPWManagers:{control:{type:"boolean"},table:{type:{summary:"bool"}}},contextId:{control:{type:"text"},table:{type:{summary:"string"}}},as:{control:{type:"text"},table:{type:{summary:"string"}}}},render:r=>l(j,g(r,{"bool:n$":!1,get children(){return[l($e,{}),l(N,{get children(){return[l(F,{index:0}),l(F,{index:1}),l(F,{index:2})]}}),l(Me,{}),l(N,{get children(){return[l(F,{index:3}),l(F,{index:4}),l(F,{index:5})]}})]}})),component:j},L={args:{maxLength:6}};L.parameters={...L.parameters,docs:{...L.parameters?.docs,source:{originalSource:`{
  args: {
    maxLength: 6
  }
}`,...L.parameters?.docs?.source}}};const qe=["Default"];export{L as Default,qe as __namedExportsOrder,Ge as default};
