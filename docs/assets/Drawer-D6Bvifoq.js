import{a as I,b as m,k as M,m as f,h as V,u as Z,g as j,c as p,s as w,j as L,e as x,P as We,S as ue,B as A,d as Ee,t as De,q as ye}from"./iframe-CSkHCzVC.js";import{b as ie,d as q,c as de,a as xe}from"./GZJAOTUE-Cj1OtU2l.js";import{i as ge,c as ae,u as Q,b as Ce,D as J,d as C,a as ee,o as Fe,s as Xe}from"./size-0gw4DPuf.js";import{a as l,s as fe,m as pe}from"./U42ECMND-BDjyePcW.js";import{a as Ye,s as Ge,g as Qe}from"./index-DRsflZo7.js";import{E as le}from"./index-BqxmMzY1.js";import{L as U}from"./Utils-Bukfxs-o.js";const Je=(n,e)=>n.length>0?()=>n(M(e)):n;function et(n,e){let t=0;const r=n.map((s,i)=>m(()=>(t=i,s()),void 0,le));return m(()=>r.map(s=>s())[t],void 0,e)}function ve(n,e,t){let r=()=>e;const[s,i]=I(e,le),c=m(Je(n,()=>r()),e,le);return[r=et([s,c],t),(u=>i(()=>typeof u=="function"?u(M(r)):u))]}var tt=n=>{const e=f({enabled:!0},n);x(()=>{l(e.enabled)&&(document.addEventListener("keydown",t),L(()=>{document.removeEventListener("keydown",t)}))});const t=r=>{r.key==="Escape"&&e.onEscapeKeyDown(r)}},nt=tt,rt=n=>{const e=f({enabled:!0},n);x(()=>{const{body:t}=document;l(e.enabled)&&Ye({key:"no-pointer-events",element:t,style:{pointerEvents:"none"}})})},ot=rt,st="dismissible.outsideFocus",it={bubbles:!1,cancelable:!0},at=n=>{const e=f({enabled:!0,ignorePointerEvents:!1},n);let t=!1;x(()=>{if(!l(e.enabled))return;const i=l(e.ignorePointerEvents);document.addEventListener("focusin",r),i&&document.addEventListener("pointerdown",s),L(()=>{document.removeEventListener("focusin",r),i&&document.removeEventListener("pointerdown",s)})});const r=i=>{if(t){t=!1;return}const c=l(e.element);if(c&&!ie(c,i.target)){const u=new CustomEvent(st,it);c.dispatchEvent(u),e.onFocus(u)}},s=()=>{t=!0}},lt=at,ct=n=>{const e=f({enabled:!0,strategy:"pointerup"},n);x(()=>{if(!l(e.enabled))return;const r=l(e.strategy);document.addEventListener(r,t),L(()=>{document.removeEventListener(r,t)})});const t=r=>{const s=l(e.element),i=l(e.ignore);s&&!ie(s,r.target)&&!(i&&i.some(c=>c&&ie(c,r.target)))&&e.onPointer(r)}},ut=ct,dt=n=>{const e=f({dismissOnEscapeKeyDown:!0,dismissOnOutsideFocus:!0,dismissOnOutsidePointer:!0,outsidePointerStrategy:"pointerup",noOutsidePointerEvents:!0},n);nt({enabled:()=>l(e.dismissOnEscapeKeyDown),onEscapeKeyDown:t=>{e.onEscapeKeyDown?.(t),t.defaultPrevented||e.onDismiss("escapeKey")}}),lt({enabled:()=>l(e.dismissOnOutsideFocus),onFocus:t=>{e.onOutsideFocus?.(t),t.defaultPrevented||e.onDismiss("outsideFocus")},element:()=>l(e.element),ignorePointerEvents:()=>l(e.noOutsidePointerEvents)||l(e.dismissOnOutsidePointer)}),ut({enabled:()=>l(e.dismissOnOutsidePointer),strategy:()=>l(e.outsidePointerStrategy),ignore:()=>l(e.outsidePointerIgnore)??[],onPointer:t=>{if(e.onOutsidePointer?.(t),!t.defaultPrevented){const r=t.button===0&&t.ctrlKey===!0;if(t.button===2||r)return;e.onDismiss("outsidePointer")}},element:()=>l(e.element)}),ot({enabled:()=>l(e.noOutsidePointerEvents)})},gt=dt,ce=j(),ft=n=>{const e=f({dismissibleId:V()},n);return m(()=>{if(Z(ce))return p(he,n);const[s,i]=I([e.dismissibleId]),c=o=>{i(d=>[...d,o])},u=o=>{i(d=>d.filter(b=>b!==o))};return p(ce.Provider,{value:{layers:s,onLayerShow:c,onLayerDismiss:u},get children(){return p(he,n)}})})},[gn,ne]=I([]),he=n=>{const e=f({enabled:!0,dismissibleId:V(),dismissOnEscapeKeyDown:!0,dismissOnOutsideFocus:!0,dismissOnOutsidePointer:!0,outsidePointerStrategy:"pointerup",noOutsidePointerEvents:!0},n),[t,r]=w(e,["enabled","children","dismissOnEscapeKeyDown","dismissOnOutsideFocus","dismissOnOutsidePointer","outsidePointerStrategy","outsidePointerIgnore","noOutsidePointerEvents","onDismiss"]),s=Z(ce);L(()=>{s.onLayerDismiss(e.dismissibleId),ne(o=>o.filter(d=>d!==e.dismissibleId))}),x(()=>{t.enabled?(s.onLayerShow(e.dismissibleId),ne(o=>[...o,e.dismissibleId])):(s.onLayerDismiss(e.dismissibleId),ne(o=>o.filter(d=>d!==e.dismissibleId)))});const i=()=>s.layers()[s.layers().length-1]===e.dismissibleId;gt({dismissOnEscapeKeyDown:()=>l(t.dismissOnEscapeKeyDown)&&i()&&t.enabled,dismissOnOutsideFocus:()=>l(t.dismissOnOutsideFocus)&&i()&&t.enabled,dismissOnOutsidePointer:()=>l(t.dismissOnOutsidePointer)&&i()&&t.enabled,outsidePointerStrategy:t.outsidePointerStrategy,outsidePointerIgnore:t.outsidePointerIgnore,noOutsidePointerEvents:()=>l(t.noOutsidePointerEvents)&&t.enabled,onDismiss:o=>{t.onDismiss(o)},...r});const c=m(()=>t.children),u=()=>{const o=c();return ge(o)?o({get isLastLayer(){return i()}}):o};return M(()=>u())},pt=ft,mt=pt,vt='a[href]:not([tabindex="-1"]), button:not([tabindex="-1"]), input:not([tabindex="-1"]), textarea:not([tabindex="-1"]), select:not([tabindex="-1"]), details:not([tabindex="-1"]), [tabindex]:not([tabindex="-1"])',re="focusTrap.initialFocus",oe="focusTrap.finalFocus",Pe={bubbles:!1,cancelable:!0},ht=n=>{const e=f({enabled:!0,observeChanges:!0,restoreFocus:!0},n),[t,r]=I(null),s=m(()=>{const a=t();return a?a[0]??null:null}),i=m(()=>{const a=t();return a?a[a.length-1]??null:null});let c=null;const u=()=>{q(()=>{o(l(e.element)),(document.activeElement===null||document.activeElement===document.body)&&d(l(e.element))})};x(()=>{const a=l(e.element);if(a&&l(e.enabled)){c=document.activeElement,M(()=>{o(a),d(a)});const E=new MutationObserver(u);l(e.observeChanges)&&E.observe(a,{subtree:!0,childList:!0,attributes:!0,attributeFilter:["tabindex"]}),L(()=>{l(e.observeChanges)&&E.disconnect(),r(null),k(a)})}}),x(()=>{const a=t();a===null||a.length!==0||(document.addEventListener("keydown",P),L(()=>{document.removeEventListener("keydown",P)}))}),x(()=>{const a=s();a&&(a.addEventListener("keydown",b),L(()=>{a.removeEventListener("keydown",b)}))}),x(()=>{const a=i();a&&(a.addEventListener("keydown",O),L(()=>{a.removeEventListener("keydown",O)}))});const o=a=>{const E=Array.from(a.querySelectorAll(vt)).map((v,S)=>({element:v,domIndex:S,tabIndex:v.tabIndex})).sort((v,S)=>v.tabIndex===S.tabIndex?v.domIndex-S.domIndex:v.tabIndex-S.tabIndex);r(E.map(({element:v})=>v))},d=a=>{q(()=>{const E=l(e.initialFocusElement)??s()??a,v=e.onInitialFocus;let S;v&&(S=new CustomEvent(re,Pe),a.addEventListener(re,v),a.dispatchEvent(S),a.removeEventListener(re,v)),S?.defaultPrevented!==!0&&E.focus()})},b=a=>{a.key==="Tab"&&a.shiftKey&&(a.preventDefault(),i().focus())},O=a=>{a.key==="Tab"&&!a.shiftKey&&(a.preventDefault(),s().focus())},P=a=>{a.key==="Tab"&&a.preventDefault()},k=a=>{q(()=>{if(!l(e.restoreFocus))return;const v=l(e.finalFocusElement)??c;if(!v)return;let S;const R=e.onFinalFocus;R&&(S=new CustomEvent(oe,Pe),a.addEventListener(oe,R),a.dispatchEvent(S),a.removeEventListener(oe,R)),S?.defaultPrevented!==!0&&v.focus()})}},Pt=ht,bt=Pt,St=n=>{const e=m(()=>{const u=l(n.element);if(u)return getComputedStyle(u)}),t=()=>e()?.animationName??"none",[r,s]=I(l(n.show)?"present":"hidden"),i=u=>{s(u),n.onStateChange?.(u)};let c="none";return x(u=>{const o=l(n.show);return M(()=>{if(u===o)return o;const d=c,b=t();o?i("present"):b==="none"||e()?.display==="none"?i("hidden"):i(u===!0&&d!==b?"hiding":"hidden")}),o},l(n.show)),x(()=>{const u=l(n.element);if(!u)return;const o=b=>{b.target===u&&(c=t())},d=b=>{const P=t().includes(b.animationName);b.target===u&&P&&r()==="hiding"&&i("hidden")};u.addEventListener("animationstart",o),u.addEventListener("animationcancel",d),u.addEventListener("animationend",d),L(()=>{u.removeEventListener("animationstart",o),u.removeEventListener("animationcancel",d),u.removeEventListener("animationend",d)})}),{present:()=>r()==="present"||r()==="hiding",state:r}},Ot=St,be=Ot,wt=n=>{const e=f({initialRegistered:!1},n),[t,r]=I(e.initialRegistered);return[m(()=>{if(t())return l(e.value)}),()=>{r(!0)},()=>{r(!1)}]},Se=wt,Ie=j(),Et=n=>n===void 0?Ie:ee(`dialog-${n}`),Le=n=>{if(n===void 0){const t=Z(Ie);if(!t)throw new Error("[corvu]: Dialog context not found. Make sure to wrap Dialog components in <Dialog.Root>");return t}const e=Q(`dialog-${n}`);if(!e)throw new Error(`[corvu]: Dialog context with id "${n}" not found. Make sure to wrap Dialog components in <Dialog.Root contextId="${n}">`);return e},Re=j(),Dt=n=>n===void 0?Re:ee(`dialog-internal-${n}`),N=n=>{if(n===void 0){const t=Z(Re);if(!t)throw new Error("[corvu]: Dialog context not found. Make sure to wrap Dialog components in <Dialog.Root>");return t}const e=Q(`dialog-internal-${n}`);if(!e)throw new Error(`[corvu]: Dialog context with id "${n}" not found. Make sure to wrap Dialog components in <Dialog.Root contextId="${n}">`);return e},yt=n=>{const[e,t]=w(n,["contextId","onClick"]),r=m(()=>N(e.contextId));return p(Ce,f({onClick:i=>{!xe(e.onClick,i)&&r().setOpen(!1)},"aria-label":"close","data-corvu-dialog-close":""},t))},xt=yt,Ct=n=>{const[e,t]=w(n,["forceMount","contextId","ref","style"]),r=m(()=>N(e.contextId)),s=()=>fe(r().open,()=>e.forceMount,r().contentPresent),i=m(()=>r().open()||r().contentPresent());return p(mt,{get element(){return r().contentRef},get enabled(){return i()},get dismissibleId(){return r().dialogId()},onDismiss:()=>r().setOpen(!1),get dismissOnEscapeKeyDown(){return r().closeOnEscapeKeyDown},get dismissOnOutsideFocus(){return r().closeOnOutsideFocus},get dismissOnOutsidePointer(){return r().closeOnOutsidePointer},get outsidePointerStrategy(){return r().closeOnOutsidePointerStrategy},outsidePointerIgnore:()=>[r().triggerRef()],get noOutsidePointerEvents(){return r().noOutsidePointerEvents},get onEscapeKeyDown(){return r().onEscapeKeyDown},get onOutsideFocus(){return r().onOutsideFocus},get onOutsidePointer(){return r().onOutsidePointer},children:c=>p(ue,{get when(){return s()},get children(){return p(J,f({as:"div",ref(u){var o=pe(r().setContentRef,e.ref);typeof o=="function"&&o(u)},get style(){return de({"pointer-events":c.isLastLayer?"auto":void 0},e.style)},get id(){return r().dialogId()},get role(){return r().role()},tabIndex:"-1",get"aria-describedby"(){return r().descriptionId()},get"aria-labelledby"(){return r().labelId()},get"aria-modal"(){return r().modal()?"true":"false"},get"data-closed"(){return C(!r().open())},get"data-open"(){return C(r().open())},"data-corvu-dialog-content":""},t))}})})},Ft=Ct,It=n=>{const[e,t]=w(n,["contextId"]),r=m(()=>N(e.contextId));return x(()=>{const s=r();s.registerDescriptionId(),L(()=>s.unregisterDescriptionId())}),p(J,f({as:"p",get id(){return r().descriptionId()},"data-corvu-dialog-description":""},t))},Lt=It,Rt=n=>{const[e,t]=w(n,["contextId"]),r=m(()=>N(e.contextId));return x(()=>{const s=r();s.registerLabelId(),L(()=>s.unregisterLabelId())}),p(J,f({as:"h2",get id(){return r().labelId()},"data-corvu-dialog-label":""},t))},Tt=Rt,_t=n=>{const[e,t]=w(n,["forceMount","contextId","ref","style"]),r=m(()=>N(e.contextId)),s=()=>fe(r().open,()=>e.forceMount,r().overlayPresent);return p(ue,{get when(){return s()},get children(){return p(J,f({as:"div",ref(i){var c=pe(r().setOverlayRef,e.ref);typeof c=="function"&&c(i)},get style(){return de({"pointer-events":"auto"},e.style)},"aria-hidden":"true",get"data-closed"(){return C(!r().open())},get"data-open"(){return C(r().open())},"data-corvu-dialog-overlay":""},t))}})},At=_t,kt=n=>{const[e,t]=w(n,["forceMount","contextId"]),r=m(()=>N(e.contextId)),s=()=>fe(r().open,()=>e.forceMount,r().contentPresent,r().overlayPresent);return p(ue,{get when(){return s()},get children(){return p(We,t)}})},me=kt,se=!0,$t=n=>{const e=f({role:"dialog",initialOpen:!1,modal:!0,closeOnEscapeKeyDown:!0,closeOnOutsideFocus:()=>n.trapFocus??!0,closeOnOutsidePointer:()=>n.modal??se,closeOnOutsidePointerStrategy:"pointerup",noOutsidePointerEvents:()=>n.modal??se,preventScroll:()=>n.modal??se,hideScrollbar:!0,preventScrollbarShift:!0,preventScrollbarShiftMode:"padding",restoreScrollPosition:!0,allowPinchZoom:!0,trapFocus:!0,restoreFocus:!0,dialogId:V()},n),[t,r]=ae({value:()=>e.open,initialValue:e.initialOpen,onChange:e.onOpenChange}),[s,i,c]=Se({value:()=>e.labelId??V()}),[u,o,d]=Se({value:()=>e.descriptionId??V()}),[b,O]=I(null),[P,k]=I(null),[a,E]=I(null),{present:v}=be({show:t,element:P,onStateChange:h=>{h==="present"?e.onContentPresentChange?.(!0):h==="hidden"&&e.onContentPresentChange?.(!1)}}),{present:S}=be({show:t,element:a,onStateChange:h=>{h==="present"?e.onOverlayPresentChange?.(!0):h==="hidden"&&e.onOverlayPresentChange?.(!1)}});bt({element:P,enabled:()=>t()&&e.trapFocus,initialFocusElement:()=>e.initialFocusEl??null,restoreFocus:()=>e.restoreFocus,finalFocusElement:()=>e.finalFocusEl??null,onFinalFocus:e.onFinalFocus,onInitialFocus:e.onInitialFocus}),Ge({element:P,enabled:()=>v()&&l(e.preventScroll),hideScrollbar:()=>e.hideScrollbar,preventScrollbarShift:()=>e.preventScrollbarShift,preventScrollbarShiftMode:()=>e.preventScrollbarShiftMode,restoreScrollPosition:()=>e.restoreScrollPosition,allowPinchZoom:()=>e.allowPinchZoom});const R={get role(){return e.role},get open(){return t()},setOpen:r,get modal(){return e.modal},get closeOnEscapeKeyDown(){return e.closeOnEscapeKeyDown},get closeOnOutsideFocus(){return l(e.closeOnOutsideFocus)},get closeOnOutsidePointer(){return l(e.closeOnOutsidePointer)},get closeOnOutsidePointerStrategy(){return e.closeOnOutsidePointerStrategy},get noOutsidePointerEvents(){return l(e.noOutsidePointerEvents)},get preventScroll(){return l(e.preventScroll)},get hideScrollbar(){return e.hideScrollbar},get preventScrollbarShift(){return l(e.preventScrollbarShift)},get preventScrollbarShiftMode(){return e.preventScrollbarShiftMode},get restoreScrollPosition(){return e.restoreScrollPosition},get allowPinchZoom(){return e.allowPinchZoom},get trapFocus(){return e.trapFocus},get restoreFocus(){return e.restoreFocus},get initialFocusEl(){return e.initialFocusEl},get finalFocusEl(){return e.finalFocusEl},get contentPresent(){return v()},get contentRef(){return P()},get overlayPresent(){return S()},get overlayRef(){return a()},get dialogId(){return e.dialogId},get labelId(){return s()},get descriptionId(){return u()}},K=Fe(()=>e.children),F=()=>{const h=K()();return ge(h)?h(R):h};return m(()=>{const h=Et(e.contextId),_=Dt(e.contextId);return p(h.Provider,{value:{role:()=>e.role,open:t,setOpen:r,modal:()=>e.modal,closeOnEscapeKeyDown:()=>e.closeOnEscapeKeyDown,closeOnOutsideFocus:()=>l(e.closeOnOutsideFocus),closeOnOutsidePointer:()=>l(e.closeOnOutsidePointer),closeOnOutsidePointerStrategy:()=>e.closeOnOutsidePointerStrategy,noOutsidePointerEvents:()=>l(e.noOutsidePointerEvents),preventScroll:()=>l(e.preventScroll),hideScrollbar:()=>e.hideScrollbar,preventScrollbarShift:()=>l(e.preventScrollbarShift),preventScrollbarShiftMode:()=>e.preventScrollbarShiftMode,restoreScrollPosition:()=>e.restoreScrollPosition,allowPinchZoom:()=>e.allowPinchZoom,trapFocus:()=>e.trapFocus,restoreFocus:()=>e.restoreFocus,initialFocusEl:()=>e.initialFocusEl,finalFocusEl:()=>e.finalFocusEl,contentPresent:v,contentRef:P,overlayPresent:S,overlayRef:a,dialogId:()=>e.dialogId,labelId:s,descriptionId:u},get children(){return p(_.Provider,{get value(){return{role:()=>e.role,open:t,setOpen:r,modal:()=>e.modal,closeOnEscapeKeyDown:()=>e.closeOnEscapeKeyDown,onEscapeKeyDown:e.onEscapeKeyDown,closeOnOutsideFocus:()=>l(e.closeOnOutsideFocus),closeOnOutsidePointer:()=>l(e.closeOnOutsidePointer),closeOnOutsidePointerStrategy:()=>e.closeOnOutsidePointerStrategy,onOutsideFocus:e.onOutsideFocus,onOutsidePointer:e.onOutsidePointer,noOutsidePointerEvents:()=>l(e.noOutsidePointerEvents),preventScroll:()=>l(e.preventScroll),hideScrollbar:()=>e.hideScrollbar,preventScrollbarShift:()=>l(e.preventScrollbarShift),preventScrollbarShiftMode:()=>e.preventScrollbarShiftMode,restoreScrollPosition:()=>e.restoreScrollPosition,allowPinchZoom:()=>e.allowPinchZoom,trapFocus:()=>e.trapFocus,restoreFocus:()=>e.restoreFocus,initialFocusEl:()=>e.initialFocusEl,finalFocusEl:()=>e.finalFocusEl,contentPresent:v,contentRef:P,overlayPresent:S,overlayRef:a,dialogId:()=>e.dialogId,labelId:s,registerLabelId:i,unregisterLabelId:c,descriptionId:u,registerDescriptionId:o,unregisterDescriptionId:d,setContentRef:k,setOverlayRef:E,triggerRef:b,setTriggerRef:O}},get children(){return M(()=>F())}})}})})},zt=$t,Mt=n=>{const[e,t]=w(n,["contextId","ref","onClick"]),r=m(()=>N(e.contextId));return p(Ce,f({ref(i){var c=pe(r().setTriggerRef,e.ref);typeof c=="function"&&c(i)},onClick:i=>{!xe(e.onClick,i)&&r().setOpen(c=>!c)},get"aria-controls"(){return r().dialogId()},get"aria-expanded"(){return r().open()?"true":"false"},"aria-haspopup":"dialog",get"data-closed"(){return C(!r().open())},get"data-open"(){return C(r().open())},"data-corvu-dialog-trigger":""},t))},Kt=Mt,Nt=Object.assign(zt,{Trigger:Kt,Portal:me,Overlay:At,Content:Ft,Label:Tt,Description:Lt,Close:xt,useContext:Le}),z=Nt,X=n=>typeof n=="function"?n():n,Oe=n=>requestAnimationFrame(()=>requestAnimationFrame(n));function Ht(n){const e=f({enabled:!0,dimension:"both"},n),[t,r]=I(!1),[s,i]=I(null);let c=null;x(()=>{const d=X(e.element),b=X(e.enabled);if(!d||!b)return;const O=new ResizeObserver(u);O.observe(d),d.addEventListener("transitionend",o),L(()=>{O.disconnect(),d.removeEventListener("transitionend",o),o()})});const u=([d])=>{if(t())return;const b=d.target,O=[b.offsetWidth,b.offsetHeight],P=X(e.dimension);P==="both"?c?c[0]!==O[0]&&c[1]!==O[1]&&(A(()=>{i(c),r(!0)}),Oe(()=>{i(O),parseFloat(getComputedStyle(d.target).transitionDuration)===0&&o()})):c=O:c?Y(P,c)!==Y(P,O)&&(A(()=>{i(Y(P,c)),r(!0)}),Oe(()=>{i(Y(P,O)),parseFloat(getComputedStyle(d.target).transitionDuration)===0&&o()})):c=O},o=()=>{if(!t())return;const d=X(e.element);d?c=[d.offsetWidth,d.offsetHeight]:c=null,A(()=>{r(!1),i(null)})};return{transitioning:t,transitionSize:s}}var Y=(n,e)=>{switch(n){case"width":return e[0];case"height":return e[1]}},Zt=Ht,Ut=Zt,Bt=n=>p(z.Close,f({"data-corvu-drawer-close":"","data-corvu-dialog-close":null},n)),Te=Bt,_e=(n,e,t,r)=>{if(t===void 0||r===void 0)return{value:n,offset:G(n,e)};const s=r[t-1]!==void 0&&r[t-1]!==null?G(r[t-1],e):void 0,i=r[t]!==void 0&&r[t]!==null?G(r[t],e):void 0;return{value:n,offset:G(n,e),lowerBreakPoint:i,upperBreakPoint:s}},G=(n,e)=>{if(typeof n=="number")return e-n*e;if(!n.endsWith("px"))throw new Error(`[corvu] Snap and break points must be a number or a string ending with 'px'. Got ${n}`);return e-parseInt(n,10)},Vt=(n,e,t,r)=>{const s=we("upper",n,r?t:e),i=we("lower",n,r?t:e);return s?i?i.upperBreakPoint===void 0||s.lowerBreakPoint===void 0?Math.abs(i.offset-t)<Math.abs(s.offset-t)?i:s:t<s.lowerBreakPoint?i:s:s:i},we=(n,e,t)=>e.reduce((r,s)=>n=="upper"&&s.offset>=t&&(!r||s.offset<r.offset)||n=="lower"&&s.offset<=t&&(!r||s.offset>r.offset)?s:r,void 0),qt=(n,e,t)=>{let r=n,s=!1;do{if(r.hasAttribute("data-corvu-no-drag")||r.type==="range"||r.tagName==="SELECT"&&t==="mouse")return!1;r===e?s=!0:r=r.parentElement}while(r&&!s);return!0},Ae=j(),jt=n=>n===void 0?Ae:ee(`drawer-${n}`),ke=n=>{if(n===void 0){const t=Z(Ae);if(!t)throw new Error("[corvu]: Drawer context not found. Make sure to wrap Drawer components in <Drawer.Root>");return t}const e=Q(`drawer-${n}`);if(!e)throw new Error(`[corvu]: Drawer context with id "${n}" not found. Make sure to wrap Drawer components in <Drawer.Root contextId="${n}">`);return e},$e=j(),Wt=n=>n===void 0?$e:ee(`drawer-internal-${n}`),ze=n=>{if(n===void 0){const t=Z($e);if(!t)throw new Error("[corvu]: Drawer context not found. Make sure to wrap Drawer components in <Drawer.Root>");return t}const e=Q(`drawer-internal-${n}`);if(!e)throw new Error(`[corvu]: Drawer context with id "${n}" not found. Make sure to wrap Drawer components in <Drawer.Root contextId="${n}">`);return e},Xt=n=>{const[e,t]=w(n,["contextId","style"]);let r=!1,s=null,i=[0,0],c,u=0;const o=m(()=>ze(e.contextId)),d=m(()=>z.useContext(e.contextId)),b=m(()=>o().snapPoints().map((g,h)=>_e(g,o().drawerSize(),h,o().breakPoints()))),O=m(()=>{switch(o().side()){case"top":return`translate3d(0, ${-o().translate()}px, 0)`;case"bottom":return`translate3d(0, ${o().translate()}px, 0)`;case"right":return`translate3d(${o().translate()}px, 0, 0)`;case"left":return`translate3d(${-o().translate()}px, 0, 0)`}}),P=m(()=>{const g=o().transitionSize();if(g!==null)switch(o().side()){case"top":case"bottom":return`${g}px`}}),k=m(()=>{const g=o().transitionSize();if(g!==null)switch(o().side()){case"left":case"right":return`${g}px`}});x(()=>{d().open()&&(document.addEventListener("pointermove",E),document.addEventListener("touchmove",v),document.addEventListener("pointerup",R),document.addEventListener("touchend",K),document.addEventListener("contextmenu",F),L(()=>{document.removeEventListener("pointermove",E),document.removeEventListener("touchmove",v),document.removeEventListener("pointerup",R),document.removeEventListener("touchend",K),document.removeEventListener("contextmenu",F)}))}),x(()=>{o().transitionState()==="closing"&&o().setIsDragging(!1)});const a=g=>{g.button===0&&qt(g.target,d().contentRef(),g.pointerType)&&o().transitionState()!=="closing"&&(r=!0,o().handleScrollableElements()&&(i=[g.clientX,g.clientY]))},E=g=>{S(g.target,g.clientX,g.clientY)},v=g=>{g.touches[0]&&S(g.target,g.touches[0].clientX,g.touches[0].clientY)},S=(g,h,_)=>{if(!r)return;if(!o().isDragging()||s===null){const W=window.getSelection();if(W&&W.toString().length>0){F();return}if(o().handleScrollableElements()){const H=[h,_].map((qe,je)=>i[je]-qe),te=Math.abs(H[0])>Math.abs(H[1])?"x":"y",y=te==="x"?H[0]:H[1];if(Math.abs(y)<.3)return;const T=d().contentRef(),[$,Ve]=Qe(g,te,T);if(y>0&&Math.abs($)>1||y<0&&Math.abs(Ve)>0){F();return}}switch(o().side()){case"top":case"bottom":s=_;break;case"right":case"left":s=h}c=new Date,u=o().translate(),A(()=>{o().setIsDragging(!0),o().setTransitionState(null)})}let D;switch(o().side()){case"top":D=-(s-_);break;case"bottom":D=s-_;break;case"right":D=s-h;break;case"left":D=-(s-h);break}D-=o().resolvedActiveSnapPoint().offset,D>0&&(D=o().dampFunction(D));const B=new Date;B.getTime()-c.getTime()>o().velocityCacheReset()&&(c=B,u=o().translate()),o().setTranslate(-D)},R=g=>{g.pointerType!=="touch"&&F()},K=g=>{g.touches.length===0&&F()},F=()=>{if(r=!1,!o().isDragging())return;const g=new Date,h=o().velocityFunction(-(u-o().translate()),g.getTime()-c.getTime()||1),_=o().translate()*h,D=Vt(b(),o().translate(),_,o().allowSkippingSnapPoints());A(()=>{o().setTransitionState("snapping"),o().setIsDragging(!1)}),A(()=>{o().setActiveSnapPoint(D.value),D.offset===o().drawerSize()?d().setOpen(!1):(o().setTranslate(D.offset),parseFloat(o().drawerStyles().transitionDuration)===0&&o().setTransitionState(null))})};return p(z.Content,f({get contextId(){return e.contextId},get style(){return de({transform:O(),"transition-duration":o().isDragging()?"0ms":void 0,height:P(),width:k()},e.style)},onPointerDown:a,onTouchStart:g=>{g.touches.length===1&&(s=null)},onTransitionEnd:g=>{g.target===d().contentRef()&&A(()=>{o().transitionState()==="closing"&&o().closeDrawer(),o().transitionState()!=="resizing"&&o().setTransitionState(null)})},get"data-side"(){return o().side()},get"data-opening"(){return C(o().transitionState()==="opening")},get"data-closing"(){return C(o().transitionState()==="closing")},get"data-snapping"(){return C(o().transitionState()==="snapping")},get"data-transitioning"(){return C(o().isTransitioning())},get"data-resizing"(){return C(o().transitionState()==="resizing")},"data-corvu-drawer-content":"","data-corvu-dialog-content":null},t))},Me=Xt,Yt=n=>p(z.Description,f({"data-corvu-drawer-description":"","data-corvu-dialog-description":null},n)),Ke=Yt,Gt=n=>p(z.Label,f({"data-corvu-drawer-label":"","data-corvu-dialog-label":null},n)),Ne=Gt,Qt=n=>{const[e,t]=w(n,["contextId"]),r=m(()=>ze(e.contextId));return p(z.Overlay,f({get contextId(){return e.contextId},get"data-side"(){return r().side()},get"data-opening"(){return C(r().transitionState()==="opening")},get"data-closing"(){return C(r().transitionState()==="closing")},get"data-snapping"(){return C(r().transitionState()==="snapping")},get"data-transitioning"(){return C(r().isTransitioning())},get"data-resizing"(){return C(r().transitionState()==="resizing")},"data-corvu-drawer-overlay":"","data-corvu-dialog-overlay":null},t))},He=Qt,Jt=n=>{const e=f({initialOpen:!1,snapPoints:[0,1],breakPoints:[null],defaultSnapPoint:1,side:"bottom",dampFunction:y=>6*Math.log(y+1),velocityFunction:(y,T)=>{const $=y/T;return $<1&&$>-1?1:$},velocityCacheReset:200,allowSkippingSnapPoints:!0,handleScrollableElements:!0,transitionResize:!1,closeOnOutsidePointer:!0,allowPinchZoom:!1},n),[t,r]=w(e,["snapPoints","breakPoints","defaultSnapPoint","activeSnapPoint","onActiveSnapPointChange","side","dampFunction","velocityFunction","velocityCacheReset","allowSkippingSnapPoints","handleScrollableElements","transitionResize","open","initialOpen","onOpenChange","closeOnOutsidePointer","contextId","children"]),[s,i]=ae({value:()=>t.open,initialValue:t.initialOpen,onChange:t.onOpenChange}),[c,u]=ae({value:()=>t.activeSnapPoint,initialValue:0,onChange:t.onActiveSnapPointChange}),[o,d]=I(),{transitioning:b,transitionSize:O}=Ut({element:()=>o()?.contentRef()??null,enabled:()=>s()&&t.transitionResize,dimension:()=>{switch(t.side){case"top":case"bottom":return"height";case"left":case"right":return"width"}}}),[P,k]=I(!1),[a,E]=ve(()=>b()?"resizing":null),v=m(()=>{const y=o()?.contentRef();if(y)return getComputedStyle(y)}),[S,R]=I(!1);x(()=>{const y=s();M(()=>{S()!==y&&(y?(R(!0),q(()=>{A(()=>{E("opening"),u(t.defaultSnapPoint)}),parseFloat(v().transitionDuration)===0&&E(null)})):(A(()=>{E("closing"),u(0)}),q(()=>{parseFloat(v().transitionDuration)===0&&K()})))})});const K=()=>{A(()=>{R(!1),E(null)})},F=Xe({element:()=>o()?.contentRef()??null,dimension:()=>{switch(t.side){case"top":case"bottom":return"height";case"left":case"right":return"width"}}}),g=m(()=>_e(c(),F())),[h,_]=ve(()=>g().offset),D=m(()=>F()?(F()-h())/F():0),B={get snapPoints(){return t.snapPoints},get breakPoints(){return t.breakPoints},get defaultSnapPoint(){return t.defaultSnapPoint},get activeSnapPoint(){return c()},setActiveSnapPoint:u,get side(){return t.side},get isDragging(){return P()},get isTransitioning(){return a()!==null},get transitionState(){return a()},get openPercentage(){return D()},get translate(){return h()},get velocityCacheReset(){return t.velocityCacheReset},get allowSkippingSnapPoints(){return t.allowSkippingSnapPoints},get handleScrollableElements(){return t.handleScrollableElements},get transitionResize(){return t.transitionResize}},W=Fe(()=>t.children),H=y=>{d(z.useContext(t.contextId));const T=W()();if(ge(T)){const $=f(y,B);return T($)}return T};return m(()=>{const y=jt(t.contextId),T=Wt(t.contextId);return M(()=>p(y.Provider,{value:{snapPoints:()=>t.snapPoints,breakPoints:()=>t.breakPoints,defaultSnapPoint:()=>t.defaultSnapPoint,activeSnapPoint:c,setActiveSnapPoint:u,side:()=>t.side,isDragging:P,isTransitioning:()=>a()!==null,transitionState:a,openPercentage:D,translate:h,velocityCacheReset:()=>t.velocityCacheReset,allowSkippingSnapPoints:()=>t.allowSkippingSnapPoints,handleScrollableElements:()=>t.handleScrollableElements,transitionResize:()=>t.transitionResize},get children(){return p(T.Provider,{get value(){return{snapPoints:()=>t.snapPoints,breakPoints:()=>t.breakPoints,defaultSnapPoint:()=>t.defaultSnapPoint,activeSnapPoint:c,setActiveSnapPoint:u,side:()=>t.side,isDragging:P,isTransitioning:()=>a()!==null,transitionState:a,openPercentage:D,translate:h,velocityCacheReset:()=>t.velocityCacheReset,allowSkippingSnapPoints:()=>t.allowSkippingSnapPoints,handleScrollableElements:()=>t.handleScrollableElements,transitionResize:()=>t.transitionResize,dampFunction:t.dampFunction,velocityFunction:t.velocityFunction,setIsDragging:k,setTranslate:_,drawerSize:F,resolvedActiveSnapPoint:g,drawerStyles:v,setTransitionState:E,transitionSize:O,closeDrawer:K}},get children(){return p(z,f({get open(){return S()},onOpenChange:i,get contextId(){return t.contextId},get closeOnOutsidePointer(){return Ee(()=>!P())()&&t.closeOnOutsidePointer}},r,{children:$=>H($)}))}})}}))})},Ze=Jt,en=n=>p(z.Trigger,f({"data-corvu-drawer-trigger":"","data-corvu-dialog-trigger":null},n)),Ue=en;Object.assign(Ze,{Trigger:Ue,Portal:me,Overlay:He,Content:Me,Label:Ne,Description:Ke,Close:Te,useContext:ke,useDialogContext:Le});var tn=De('<div class="mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted">'),Be=De("<div>");function fn(n){const[e,t]=w(n,[]);return p(Ze,f(t,{"bool:n$":!1}))}function pn(n){const[e,t]=w(n,[]);return p(Ue,f(t,{"bool:n$":!1}))}function nn(n){const[e,t]=w(n,[]);return p(me,f(t,{"bool:n$":!1}))}function mn(n){const[e,t]=w(n,[]);return p(Te,f(t,{"bool:n$":!1}))}function rn(n){const[e,t]=w(n,["class"]),r=ke();return p(He,f({get class(){return U(["fixed inset-0 z-50 data-[transitioning]:transition-colors data-[transitioning]:duration-300",e.class])}},t,{"bool:n$":!1,get style(){return{"background-color":`rgb(0 0 0 / ${.8*r.openPercentage()})`}}}))}function vn(n){const[e,t]=w(n,["class","children"]);return p(nn,{get children(){return[p(rn,{}),p(Me,f({get class(){return U([`fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto\r
                flex-col rounded-t-[10px] border bg-background\r
                after:absolute after:inset-x-0 after:top-full\r
                after:h-1/2 after:bg-inherit data-[transitioning]:transition-transform\r
                data-[transitioning]:duration-300 md:select-none`,e.class])}},t,{"bool:n$":!1,get children(){return[tn(),Ee(()=>e.children)]}}))]}})}function hn(n){const[e,t]=w(n,["class"]);return(()=>{var r=Be();return ye(r,f({get class(){return U(["grid gap-1.5 p-4 text-center sm:text-left",e.class])}},t),!1,!1),r})()}function Pn(n){const[e,t]=w(n,["class"]);return(()=>{var r=Be();return ye(r,f({get class(){return U(["t-auto flex flex-col gap-2 p-4",e.class])}},t),!1,!1),r})()}function bn(n){const[e,t]=w(n,["class"]);return p(Ne,f({get class(){return U(["text-lg font-semibold leading-none tracking-tight",e.class])}},t,{"bool:n$":!1}))}function Sn(n){const[e,t]=w(n,["class"]);return p(Ke,f({get class(){return U(["text-sm text-muted-foreground",e.class])}},t,{"bool:n$":!1}))}export{fn as D,pn as a,vn as b,hn as c,bn as d,Sn as e,Pn as f,mn as g,nn as h,rn as i};
