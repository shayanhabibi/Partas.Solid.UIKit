import{t as g,j as h,e as $,s as F,c as R,h as w,k as d}from"./Util-E2-mHI_n.js";import{R as A,t as v}from"./Types-M7ke1IWY.js";import{v as u,s as E}from"./Option-BhX2R0kg.js";import{c as O,j as q}from"./String-iMN6AwVU.js";import{f as M,d as b,e as L}from"./Array-CLsR7mYw.js";const I="Collection was empty.";function k(e,t){if(t==null)throw new Error(O("Value cannot be null. (Parameter '",e,..."')"));return t}class _ extends A{constructor(t,n){super(),this.head=t,this.tail=n}toString(){return"["+q("; ",this)+"]"}Equals(t){const n=this;return n===t?!0:t instanceof _?((i,l)=>{t:for(;;){const s=i,a=l,c=s.tail,f=a.tail;if(c!=null)if(f!=null){const m=u(c),y=u(f);if($(s.head,a.head)){i=m,l=y;continue t}else return!1}else return!1;else return f==null}})(n,t):!1}GetHashCode(){return((r,o,i)=>{t:for(;;){const l=r,s=o,a=i,c=a.tail;if(c!=null){const f=u(c);if(l>18)return s|0;r=l+1,o=(s<<1)+F(a.head)+631*l,i=f;continue t}else return s|0}})(0,0,this)|0}toJSON(){const t=this;return Array.from(t)}CompareTo(t){const n=this;return t instanceof _?((i,l)=>{t:for(;;){const s=i,a=l,c=s.tail,f=a.tail;if(c!=null)if(f!=null){const m=u(c),y=u(f),x=R(s.head,a.head)|0;if(x===0){i=m,l=y;continue t}else return x|0}else return 1;else return f!=null?-1:0}})(n,t)|0:1}GetEnumerator(){return H(this)}[Symbol.iterator](){return g(h(this))}"System.Collections.IEnumerable.GetEnumerator"(){return h(this)}}class j{constructor(t){this.xs=t,this.it=this.xs,this.current=w()}"System.Collections.Generic.IEnumerator`1.get_Current"(){return this.current}"System.Collections.IEnumerator.get_Current"(){return this.current}"System.Collections.IEnumerator.MoveNext"(){const t=this,n=t.it.tail;if(n!=null){const r=u(n);return t.current=t.it.head,t.it=r,!0}else return!1}"System.Collections.IEnumerator.Reset"(){const t=this;t.it=t.xs,t.current=w()}Dispose(){}}function H(e){return new j(e)}function P(e){return e.tail==null}function D(e){return((n,r)=>{t:for(;;){const o=n,l=r.tail;if(l!=null){n=o+1,r=u(l);continue t}else return o|0}})(0,e)|0}function T(e){if(e.tail!=null)return e.head;throw new Error(I+"\\nParameter name: list")}function W(e){const t=e.tail;if(t!=null)return u(t);throw new Error(I+"\\nParameter name: list")}function J(e){const t=D(e)|0,n=M(new Array(t),0,t,null);return((o,i)=>{t:for(;;){const l=o,s=i;if(!P(s)){b(n,l,T(s)),o=l+1,i=W(s);continue t}break}})(0,e),n}const z="Enumeration already finished.",B="Enumeration has not started. Call MoveNext.",K="Reset is not supported on this enumerator.";function Q(){throw new Error(K)}function V(){throw new Error(B)}function p(){throw new Error(z)}class U{constructor(t){this.f=t}toString(){const t=this;let n=0,r="seq [";const o=h(t);try{for(;n<4&&o["System.Collections.IEnumerator.MoveNext"]();)n>0&&(r=r+"; "),r=r+v(o["System.Collections.Generic.IEnumerator`1.get_Current"]()),n=n+1|0;return n===4&&(r=r+"; ..."),r+"]"}finally{d(o)}}GetEnumerator(){return this.f()}[Symbol.iterator](){return g(h(this))}"System.Collections.IEnumerable.GetEnumerator"(){return this.f()}}function X(e){return new U(e)}class Y{constructor(t,n,r){this.current=t,this.next=n,this.dispose=r}"System.Collections.Generic.IEnumerator`1.get_Current"(){return this.current()}"System.Collections.IEnumerator.get_Current"(){return this.current()}"System.Collections.IEnumerator.MoveNext"(){return this.next()}"System.Collections.IEnumerator.Reset"(){Q()}Dispose(){this.dispose()}}function G(e,t,n){return new Y(e,t,n)}function Z(e){let t,n,r=!1,o=!1,i;const l=()=>{if(o=!0,n!=null){const s=u(n);try{d(s)}finally{n=void 0}}if(t!=null){const s=u(t);try{d(s)}finally{t=void 0}}};return G(()=>(r?o&&p():V(),i!=null?u(i):p()),()=>{if(r||(r=!0),o)return!1;{let s;for(;s==null;){let a;const c=t,f=n;if(c!=null)if(f!=null){const m=u(f);if(m["System.Collections.IEnumerator.MoveNext"]())i=E(m["System.Collections.Generic.IEnumerator`1.get_Current"]()),s=!0;else try{d(m)}finally{n=void 0}}else{const m=u(c);m["System.Collections.IEnumerator.MoveNext"]()?n=(a=m["System.Collections.Generic.IEnumerator`1.get_Current"](),h(a)):(l(),s=!1)}else t=h(e)}return u(s)}},()=>{o||l()})}function tt(e,t,n){let r=!1,o,i=E(e());const l=()=>{if(i!=null){const a=u(i);try{n(a)}finally{i=void 0}}},s=()=>{try{l()}finally{o=void 0}};return G(()=>(r||V(),o!=null?u(o):p()),()=>{if(r||(r=!0),i!=null){const a=u(i);let c;try{c=t(a)}catch(f){throw s(),f}return c!=null?(o=c,!0):(s(),!1)}else return!1},l)}function S(e){return X(e)}function et(e){return h(k("source",e))}function C(e){return S(()=>h(e()))}function N(e){return S(()=>Z(e))}function at(){return C(()=>new Array(0))}function ct(e){return C(()=>L(e))}function ft(e){return e instanceof _?J(e):Array.from(e)}function nt(e,t,n){return S(()=>tt(e,t,n))}function mt(e,t){return N([e,t])}function rt(e,t){return nt(()=>et(t),n=>n["System.Collections.IEnumerator.MoveNext"]()?E(e(n["System.Collections.Generic.IEnumerator`1.get_Current"]())):void 0,n=>{d(n)})}function ht(e,t){return C(()=>N(rt(e,t)))}export{mt as a,ht as c,C as d,at as e,ct as s,ft as t};
