import{u as Y,a as U,s as mt,b as yt,R as Tt,P as St,c as Pt}from"./4LUY46IM-BnWB-bJc.js";import{c as Z}from"./PT2CJE3O-C9li7lGz.js";import{r as it,m as ct,C as xt,D as wt,E as C,F as $,p as O,d as M,G as It,v as H,H as Et,I as Nt,b as Ft,J as kt,K as Ct,L as lt,M as J,N as Q,O as Ot,g as Rt,P as Dt,i as At,x as $t,e as _t,l as Lt,Q as Gt,R as Bt,u as Vt,a as Kt,f as Mt,_ as zt,S as b,T as S,c as Ut,U as Wt}from"./index-eVjcFE9j.js";import{b as tt,h as Ht,c as l,m as E,S as V,s as jt,P as Xt,d as j,F as qt}from"./iframe-Ss2HFUgg.js";import{g as Yt,t as Zt,a as Jt,b as Qt}from"./index-BRKj0zuX.js";import{B as te}from"./Button-CkUVEkt2.js";import{L as T}from"./Utils-Bv7TLaDt.js";import{x as ee}from"./x-FPlVg9co.js";var se=Object.defineProperty,re=(t,e,r)=>e in t?se(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,h=(t,e,r)=>re(t,typeof e!="symbol"?e+"":e,r),et={activateTrap(t,e){if(t.length>0){const s=t[t.length-1];s!==e&&s.pause()}const r=t.indexOf(e);r===-1||t.splice(r,1),t.push(e)},deactivateTrap(t,e){const r=t.indexOf(e);r!==-1&&t.splice(r,1),t.length>0&&t[t.length-1].unpause()}},oe=[],ne=class{constructor(t,e){h(this,"trapStack"),h(this,"config"),h(this,"doc"),h(this,"state",{containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,delayInitialFocusTimer:void 0,recentNavEvent:void 0}),h(this,"listenerCleanups",[]),h(this,"handleFocus",s=>{const o=M(s),a=this.findContainerIndex(o,s)>=0;if(a||It(o))a&&(this.state.mostRecentlyFocusedNode=o);else{s.stopImmediatePropagation();let n,i=!0;if(this.state.mostRecentlyFocusedNode)if($(this.state.mostRecentlyFocusedNode)>0){const d=this.findContainerIndex(this.state.mostRecentlyFocusedNode),{tabbableNodes:c}=this.state.containerGroups[d];if(c.length>0){const p=c.findIndex(u=>u===this.state.mostRecentlyFocusedNode);p>=0&&(this.config.isKeyForward(this.state.recentNavEvent)?p+1<c.length&&(n=c[p+1],i=!1):p-1>=0&&(n=c[p-1],i=!1))}}else this.state.containerGroups.some(d=>d.tabbableNodes.some(c=>$(c)>0))||(i=!1);else i=!1;i&&(n=this.findNextNavNode({target:this.state.mostRecentlyFocusedNode,isBackward:this.config.isKeyBackward(this.state.recentNavEvent)})),n?this.tryFocus(n):this.tryFocus(this.state.mostRecentlyFocusedNode||this.getInitialFocusNode())}this.state.recentNavEvent=void 0}),h(this,"handlePointerDown",s=>{const o=M(s);if(!(this.findContainerIndex(o,s)>=0)){if(L(this.config.clickOutsideDeactivates,s)){this.deactivate({returnFocus:this.config.returnFocusOnDeactivate});return}L(this.config.allowOutsideClick,s)||s.preventDefault()}}),h(this,"handleClick",s=>{const o=M(s);this.findContainerIndex(o,s)>=0||L(this.config.clickOutsideDeactivates,s)||L(this.config.allowOutsideClick,s)||(s.preventDefault(),s.stopImmediatePropagation())}),h(this,"handleTabKey",s=>{if(this.config.isKeyForward(s)||this.config.isKeyBackward(s)){this.state.recentNavEvent=s;const o=this.config.isKeyBackward(s),a=this.findNextNavNode({event:s,isBackward:o});if(!a)return;_(s)&&s.preventDefault(),this.tryFocus(a)}}),h(this,"handleEscapeKey",s=>{ae(s)&&L(this.config.escapeDeactivates,s)!==!1&&(s.preventDefault(),this.deactivate())}),h(this,"_mutationObserver"),h(this,"setupMutationObserver",()=>{const s=this.doc.defaultView||window;this._mutationObserver=new s.MutationObserver(o=>{o.some(n=>Array.from(n.removedNodes).some(d=>d===this.state.mostRecentlyFocusedNode))&&this.tryFocus(this.getInitialFocusNode())})}),h(this,"updateObservedNodes",()=>{this._mutationObserver?.disconnect(),this.state.active&&!this.state.paused&&this.state.containers.map(s=>{this._mutationObserver?.observe(s,{subtree:!0,childList:!0})})}),h(this,"getInitialFocusNode",()=>{let s=this.getNodeForOption("initialFocus",{hasFallback:!0});if(s===!1)return!1;if(s===void 0||s&&!H(s))if(this.findContainerIndex(this.doc.activeElement)>=0)s=this.doc.activeElement;else{const o=this.state.tabbableGroups[0];s=o&&o.firstTabbableNode||this.getNodeForOption("fallbackFocus")}else s===null&&(s=this.getNodeForOption("fallbackFocus"));if(!s)throw new Error("Your focus-trap needs to have at least one focusable element");return s.isConnected||(s=this.getNodeForOption("fallbackFocus")),s}),h(this,"tryFocus",s=>{if(s!==!1&&s!==Et(this.doc)){if(!s||!s.focus){this.tryFocus(this.getInitialFocusNode());return}s.focus({preventScroll:!!this.config.preventScroll}),this.state.mostRecentlyFocusedNode=s,ie(s)&&s.select()}}),h(this,"deactivate",s=>{if(!this.state.active)return this;const o={onDeactivate:this.config.onDeactivate,onPostDeactivate:this.config.onPostDeactivate,checkCanReturnFocus:this.config.checkCanReturnFocus,...s};clearTimeout(this.state.delayInitialFocusTimer),this.state.delayInitialFocusTimer=void 0,this.removeListeners(),this.state.active=!1,this.state.paused=!1,this.updateObservedNodes(),et.deactivateTrap(this.trapStack,this);const a=this.getOption(o,"onDeactivate"),n=this.getOption(o,"onPostDeactivate"),i=this.getOption(o,"checkCanReturnFocus"),d=this.getOption(o,"returnFocus","returnFocusOnDeactivate");a?.();const c=()=>{st(()=>{if(d){const p=this.getReturnFocusNode(this.state.nodeFocusedBeforeActivation);this.tryFocus(p)}n?.()})};if(d&&i){const p=this.getReturnFocusNode(this.state.nodeFocusedBeforeActivation);return i(p).then(c,c),this}return c(),this}),h(this,"pause",s=>{if(this.state.paused||!this.state.active)return this;const o=this.getOption(s,"onPause"),a=this.getOption(s,"onPostPause");return this.state.paused=!0,o?.(),this.removeListeners(),this.updateObservedNodes(),a?.(),this}),h(this,"unpause",s=>{if(!this.state.paused||!this.state.active)return this;const o=this.getOption(s,"onUnpause"),a=this.getOption(s,"onPostUnpause");return this.state.paused=!1,o?.(),this.updateTabbableNodes(),this.addListeners(),this.updateObservedNodes(),a?.(),this}),h(this,"updateContainerElements",s=>(this.state.containers=Array.isArray(s)?s.filter(Boolean):[s].filter(Boolean),this.state.active&&this.updateTabbableNodes(),this.updateObservedNodes(),this)),h(this,"getReturnFocusNode",s=>{const o=this.getNodeForOption("setReturnFocus",{params:[s]});return o||(o===!1?!1:s)}),h(this,"getOption",(s,o,a)=>s&&s[o]!==void 0?s[o]:this.config[a||o]),h(this,"getNodeForOption",(s,{hasFallback:o=!1,params:a=[]}={})=>{let n=this.config[s];if(typeof n=="function"&&(n=n(...a)),n===!0&&(n=void 0),!n){if(n===void 0||n===!1)return n;throw new Error(`\`${s}\` was specified but was not a node, or did not return a node`)}let i=n;if(typeof n=="string"){try{i=this.doc.querySelector(n)}catch(d){throw new Error(`\`${s}\` appears to be an invalid selector; error="${d.message}"`)}if(!i&&!o)throw new Error(`\`${s}\` as selector refers to no known node`)}return i}),h(this,"findNextNavNode",s=>{const{event:o,isBackward:a=!1}=s,n=s.target||M(o);this.updateTabbableNodes();let i=null;if(this.state.tabbableGroups.length>0){const d=this.findContainerIndex(n,o),c=d>=0?this.state.containerGroups[d]:void 0;if(d<0)a?i=this.state.tabbableGroups[this.state.tabbableGroups.length-1].lastTabbableNode:i=this.state.tabbableGroups[0].firstTabbableNode;else if(a){let p=this.state.tabbableGroups.findIndex(({firstTabbableNode:u})=>n===u);if(p<0&&(c?.container===n||H(n)&&!C(n)&&!c?.nextTabbableNode(n,!1))&&(p=d),p>=0){const u=p===0?this.state.tabbableGroups.length-1:p-1,f=this.state.tabbableGroups[u];i=$(n)>=0?f.lastTabbableNode:f.lastDomTabbableNode}else _(o)||(i=c?.nextTabbableNode(n,!1))}else{let p=this.state.tabbableGroups.findIndex(({lastTabbableNode:u})=>n===u);if(p<0&&(c?.container===n||H(n)&&!C(n)&&!c?.nextTabbableNode(n))&&(p=d),p>=0){const u=p===this.state.tabbableGroups.length-1?0:p+1,f=this.state.tabbableGroups[u];i=$(n)>=0?f.firstTabbableNode:f.firstDomTabbableNode}else _(o)||(i=c?.nextTabbableNode(n))}}else i=this.getNodeForOption("fallbackFocus");return i}),this.trapStack=e.trapStack||oe;const r={returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0,isKeyForward(s){return _(s)&&!s.shiftKey},isKeyBackward(s){return _(s)&&s.shiftKey},...e};this.doc=r.document||ct(Array.isArray(t)?t[0]:t),this.config=r,this.updateContainerElements(t),this.setupMutationObserver()}get active(){return this.state.active}get paused(){return this.state.paused}findContainerIndex(t,e){const r=typeof e?.composedPath=="function"?e.composedPath():void 0;return this.state.containerGroups.findIndex(({container:s,tabbableNodes:o})=>s.contains(t)||r?.includes(s)||o.find(a=>a===t))}updateTabbableNodes(){if(this.state.containerGroups=this.state.containers.map(t=>{const e=xt(t),r=wt(t),s=e.length>0?e[0]:void 0,o=e.length>0?e[e.length-1]:void 0,a=r.find(c=>C(c)),n=r.slice().reverse().find(c=>C(c)),i=!!e.find(c=>$(c)>0);function d(c,p=!0){const u=e.indexOf(c);return u<0?p?r.slice(r.indexOf(c)+1).find(f=>C(f)):r.slice(0,r.indexOf(c)).reverse().find(f=>C(f)):e[u+(p?1:-1)]}return{container:t,tabbableNodes:e,focusableNodes:r,posTabIndexesFound:i,firstTabbableNode:s,lastTabbableNode:o,firstDomTabbableNode:a,lastDomTabbableNode:n,nextTabbableNode:d}}),this.state.tabbableGroups=this.state.containerGroups.filter(t=>t.tabbableNodes.length>0),this.state.tabbableGroups.length<=0&&!this.getNodeForOption("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times");if(this.state.containerGroups.find(t=>t.posTabIndexesFound)&&this.state.containerGroups.length>1)throw new Error("At least one node with a positive tabindex was found in one of your focus-trap's multiple containers. Positive tabindexes are only supported in single-container focus-traps.")}addListeners(){if(this.state.active)return et.activateTrap(this.trapStack,this),this.state.delayInitialFocusTimer=this.config.delayInitialFocus?st(()=>{this.tryFocus(this.getInitialFocusNode())}):this.tryFocus(this.getInitialFocusNode()),this.listenerCleanups.push(O(this.doc,"focusin",this.handleFocus,!0),O(this.doc,"mousedown",this.handlePointerDown,{capture:!0,passive:!1}),O(this.doc,"touchstart",this.handlePointerDown,{capture:!0,passive:!1}),O(this.doc,"click",this.handleClick,{capture:!0,passive:!1}),O(this.doc,"keydown",this.handleTabKey,{capture:!0,passive:!1}),O(this.doc,"keydown",this.handleEscapeKey)),this}removeListeners(){if(this.state.active)return this.listenerCleanups.forEach(t=>t()),this.listenerCleanups=[],this}activate(t){if(this.state.active)return this;const e=this.getOption(t,"onActivate"),r=this.getOption(t,"onPostActivate"),s=this.getOption(t,"checkCanFocusTrap");s||this.updateTabbableNodes(),this.state.active=!0,this.state.paused=!1,this.state.nodeFocusedBeforeActivation=this.doc.activeElement||null,e?.();const o=()=>{s&&this.updateTabbableNodes(),this.addListeners(),this.updateObservedNodes(),r?.()};return s?(s(this.state.containers.concat()).then(o,o),this):(o(),this)}},_=t=>t.key==="Tab",L=(t,...e)=>typeof t=="function"?t(...e):t,ae=t=>!t.isComposing&&t.key==="Escape",st=t=>setTimeout(t,0),ie=t=>t.localName==="input"&&"select"in t&&typeof t.select=="function";function ce(t,e={}){let r;const s=it(()=>{const o=typeof t=="function"?t():t;if(o){r=new ne(o,{escapeDeactivates:!1,allowOutsideClick:!0,preventScroll:!0,returnFocusOnDeactivate:!0,delayInitialFocus:!1,fallbackFocus:o,...e,document:ct(o)});try{r.activate()}catch{}}});return function(){r?.deactivate(),s()}}var dt=Nt("tour").parts("content","actionTrigger","closeTrigger","progressText","title","description","positioner","arrow","arrowTip","backdrop","spotlight"),x=dt.build(),ut=t=>t.ids?.positioner??`tour-positioner-${t.id}`,pt=t=>t.ids?.content??`tour-content-${t.id}`,rt=t=>t.ids?.title??`tour-title-${t.id}`,ot=t=>t.ids?.description??`tour-desc-${t.id}`,le=t=>t.ids?.arrow??`tour-arrow-${t.id}`,gt=t=>t.ids?.backdrop??`tour-backdrop-${t.id}`,z=t=>t.getById(pt(t)),ht=t=>t.getById(ut(t)),de=t=>t.getById(gt(t));function ue(t){const{radius:e=0,rootSize:{width:r,height:s},rect:{width:o,height:a,x:n,y:i},enabled:d=!0}=t;if(!d)return"";const{topLeft:c=0,topRight:p=0,bottomRight:u=0,bottomLeft:f=0}=typeof e=="number"?{topLeft:e,topRight:e,bottomRight:e,bottomLeft:e}:e;return`M${r},${s}  H0  V0  H${r}  V${s}  Z  M${n+c},${i}  a${c},${c},0,0,0-${c},${c}  V${a+i-f}  a${f},${f},0,0,0,${f},${f}  H${o+n-u}  a${u},${u},0,0,0,${u}-${u}  V${i+p}  a${p},${p},0,0,0-${p}-${p}  Z`}var q=t=>t?.type==="tooltip",pe=t=>t?.type==="dialog",ge=t=>t!=null&&t!="center",he=t=>t.type==="floating"?{backdrop:!1,arrow:!1,placement:"bottom-end",...t}:t.target==null||t.type==="dialog"?{type:"dialog",placement:"center",backdrop:!0,...t}:!t.type||t.type==="tooltip"?{type:"tooltip",arrow:!0,backdrop:!0,...t}:t,ft=(t,e)=>{const r=e!=null?t.find(s=>s.id===e):null;return r?he(r):null},G=(t,e)=>e!=null?t.findIndex(r=>r.id===e):-1;function fe(t,e){const{state:r,context:s,computed:o,send:a,prop:n,scope:i}=t,d=r.hasTag("open"),c=Array.from(s.get("steps")),p=o("stepIndex"),u=o("step"),f=typeof u?.target?.()<"u",F=o("hasNextStep"),w=o("hasPrevStep"),k=o("isFirstStep"),K=o("isLastStep"),I=s.get("currentPlacement"),D=s.get("targetRect"),W=Qt({strategy:"absolute",placement:ge(I)?I:void 0}),vt=ue({enabled:q(u),rect:D,rootSize:s.get("boundarySize"),radius:n("spotlightRadius")}),A={next(){a({type:"STEP.NEXT",src:"actionTrigger"})},prev(){a({type:"STEP.PREV",src:"actionTrigger"})},dismiss(){a({type:"DISMISS",src:"actionTrigger"})},goto(g){a({type:"STEP.SET",value:g,src:"actionTrigger"})}};return{open:d,totalSteps:c.length,stepIndex:p,step:u,hasNextStep:F,hasPrevStep:w,firstStep:k,lastStep:K,addStep(g){const v=c.concat(g);a({type:"STEPS.SET",value:v,src:"addStep"})},removeStep(g){const v=c.filter(N=>N.id!==g);a({type:"STEPS.SET",value:v,src:"removeStep"})},updateStep(g,v){const N=c.map(P=>P.id===g?Ot(P,v):P);a({type:"STEPS.SET",value:N,src:"updateStep"})},setSteps(g){a({type:"STEPS.SET",value:g,src:"setSteps"})},setStep(g){a({type:"STEP.SET",value:g})},start(g){a({type:"START",value:g})},isValidStep(g){return c.some(v=>v.id===g)},isCurrentStep(g){return u?.id===g},next(){a({type:"STEP.NEXT"})},prev(){a({type:"STEP.PREV"})},getProgressPercent(){return p/c.length*100},getProgressText(){const g=c.filter(P=>P.type!=="wait"),N={current:G(g,u?.id),total:g.length};return n("translations").progressText?.(N)??""},getBackdropProps(){return e.element({...x.backdrop.attrs,id:gt(i),dir:n("dir"),hidden:!d,"data-state":d?"open":"closed","data-type":u?.type,style:{"--tour-layer":0,clipPath:q(u)?`path("${vt}")`:void 0,position:"absolute",inset:"0",willChange:"clip-path"}})},getSpotlightProps(){return e.element({...x.spotlight.attrs,hidden:!d||!u?.target?.(),style:{"--tour-layer":1,position:"absolute",width:`${D.width}px`,height:`${D.height}px`,left:`${D.x}px`,top:`${D.y}px`,borderRadius:`${n("spotlightRadius")}px`,pointerEvents:"none"}})},getProgressTextProps(){return e.element({...x.progressText.attrs})},getPositionerProps(){return e.element({...x.positioner.attrs,dir:n("dir"),id:ut(i),"data-type":u?.type,"data-placement":I,style:{"--tour-layer":2,...u?.type==="tooltip"&&W.floating}})},getArrowProps(){return e.element({id:le(i),...x.arrow.attrs,dir:n("dir"),hidden:u?.type!=="tooltip",style:u?.type==="tooltip"?W.arrow:void 0,opacity:f?void 0:0})},getArrowTipProps(){return e.element({...x.arrowTip.attrs,dir:n("dir"),style:W.arrowTip})},getContentProps(){return e.element({...x.content.attrs,id:pt(i),dir:n("dir"),role:"alertdialog","aria-modal":"true","aria-live":"polite","aria-atomic":"true",hidden:!d,"data-state":d?"open":"closed","data-type":u?.type,"data-placement":I,"data-step":u?.id,"aria-labelledby":rt(i),"aria-describedby":ot(i),tabIndex:-1,onKeyDown(g){if(g.defaultPrevented||!n("keyboardNavigation"))return;const v=n("dir")==="rtl";switch(g.key){case"ArrowRight":if(!F)return;a({type:v?"STEP.PREV":"STEP.NEXT",src:"keydown"});break;case"ArrowLeft":if(!w)return;a({type:v?"STEP.NEXT":"STEP.PREV",src:"keydown"});break}}})},getTitleProps(){return e.element({...x.title.attrs,id:rt(i),"data-placement":f?I:"center"})},getDescriptionProps(){return e.element({...x.description.attrs,id:ot(i),"data-placement":f?I:"center"})},getCloseTriggerProps(){return e.element({...x.closeTrigger.attrs,"data-type":u?.type,"aria-label":n("translations").close,onClick:A.dismiss})},getActionTriggerProps(g){const{action:v,attrs:N}=g.action;let P={};switch(v){case"next":P={"data-type":"next",disabled:!F,"data-disabled":Q(!F),"aria-label":n("translations").nextStep,onClick:A.next};break;case"prev":P={"data-type":"prev",disabled:!w,"data-disabled":Q(!w),"aria-label":n("translations").prevStep,onClick:A.prev};break;case"dismiss":P={"data-type":"close","aria-label":n("translations").close,onClick:A.dismiss};break;default:P={"data-type":"custom",onClick(){typeof v=="function"&&v(A)}};break}return e.button({...x.actionTrigger.attrs,type:"button",...N,...P})}}}function nt(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}var be=t=>{let e=t.clientX,r=t.clientY,s=t.view||window,o=nt(s);for(;o;){const a=o.getBoundingClientRect(),n=getComputedStyle(o),i=a.left+(o.clientLeft+parseFloat(n.paddingLeft)),d=a.top+(o.clientTop+parseFloat(n.paddingTop));e+=i,r+=d,s=Lt(o),o=nt(s)}return{clientX:e,clientY:r}};function ve(t,e){const{clientX:r,clientY:s}=be(e);return t.y<=s&&s<=t.y+t.height&&t.x<=r&&r<=t.x+t.width}function me(t,e){const r=e.x||0,s=e.y||0;return{x:t.x-r,y:t.y-s,width:t.width+r+r,height:t.height+s+s}}var{and:X}=kt(),bt=t=>t.filter(e=>e.type!=="wait"),ye=(t,e)=>{const r=bt(t).length;return(e+1)/r},Te=Ft({props({props:t}){return{preventInteraction:!1,closeOnInteractOutside:!0,closeOnEscape:!0,keyboardNavigation:!0,spotlightOffset:{x:10,y:10},spotlightRadius:4,...t,translations:{nextStep:"next step",prevStep:"previous step",close:"close tour",progressText:({current:e,total:r})=>`${e+1} of ${r}`,skip:"skip tour",...t.translations}}},initialState(){return"tour.inactive"},context({prop:t,bindable:e,getContext:r}){return{steps:e(()=>({defaultValue:t("steps")??[],onChange(s){t("onStepsChange")?.({steps:s})}})),stepId:e(()=>({defaultValue:t("stepId"),sync:!0,onChange(s){const a=r().get("steps"),n=G(a,s),i=ye(a,n),d=n==a.length-1;t("onStepChange")?.({stepId:s,stepIndex:n,totalSteps:a.length,complete:d,progress:i})}})),resolvedTarget:e(()=>({sync:!0,defaultValue:null})),targetRect:e(()=>({defaultValue:{width:0,height:0,x:0,y:0}})),boundarySize:e(()=>({defaultValue:{width:0,height:0}})),currentPlacement:e(()=>({defaultValue:void 0}))}},computed:{stepIndex:({context:t})=>G(t.get("steps"),t.get("stepId")),step:({context:t})=>ft(t.get("steps"),t.get("stepId")),hasNextStep:({context:t,computed:e})=>e("stepIndex")<t.get("steps").length-1,hasPrevStep:({computed:t})=>t("stepIndex")>0,isFirstStep:({computed:t})=>t("stepIndex")===0,isLastStep:({context:t,computed:e})=>e("stepIndex")===t.get("steps").length-1,progress:({context:t,computed:e})=>{const r=bt(t.get("steps")).length;return(e("stepIndex")+1)/r}},watch({track:t,context:e,action:r}){t([()=>e.get("stepId")],()=>{queueMicrotask(()=>{r(["setResolvedTarget","raiseStepChange","syncTargetAttrs"])})})},effects:["trackBoundarySize"],exit:["cleanupRefs"],on:{"STEPS.SET":{actions:["setSteps"]},"STEP.SET":{actions:["setStep"]},"STEP.NEXT":{actions:["setNextStep"]},"STEP.PREV":{actions:["setPrevStep"]},"STEP.CHANGED":[{guard:X("isValidStep","hasResolvedTarget"),target:"target.scrolling",actions:["cleanupRefs"]},{guard:X("isValidStep","hasTarget"),target:"target.resolving",actions:["cleanupRefs"]},{guard:X("isValidStep","isWaitingStep"),target:"step.waiting",actions:["cleanupRefs"]},{guard:"isValidStep",target:"tour.active",actions:["cleanupRefs"]}],DISMISS:[{guard:"isLastStep",target:"tour.inactive",actions:["invokeOnDismiss","invokeOnComplete","clearStep"]},{target:"tour.inactive",actions:["invokeOnDismiss","clearStep"]}]},states:{"tour.inactive":{tags:["closed"],on:{START:{actions:["setInitialStep","invokeOnStart"]}}},"target.resolving":{tags:["closed"],effects:["waitForTarget","waitForTargetTimeout"],on:{"TARGET.NOT_FOUND":{target:"tour.inactive",actions:["invokeOnNotFound","clearStep"]},"TARGET.RESOLVED":{target:"target.scrolling",actions:["setResolvedTarget"]}}},"target.scrolling":{tags:["open"],entry:["scrollToTarget"],effects:["waitForScrollEnd","trapFocus","trackPlacement","trackDismissableBranch","trackInteractOutside","trackEscapeKeydown"],on:{"SCROLL.END":{target:"tour.active"}}},"step.waiting":{tags:["closed"]},"tour.active":{tags:["open"],effects:["trapFocus","trackPlacement","trackDismissableBranch","trackInteractOutside","trackEscapeKeydown"]}},implementations:{guards:{isLastStep:({computed:t,context:e})=>t("stepIndex")===e.get("steps").length-1,isValidStep:({context:t})=>t.get("stepId")!=null,hasTarget:({computed:t})=>t("step")?.target!=null,hasResolvedTarget:({context:t})=>t.get("resolvedTarget")!=null,isWaitingStep:({computed:t})=>t("step")?.type==="wait"},actions:{scrollToTarget({context:t}){t.get("resolvedTarget")?.scrollIntoView({behavior:"instant",block:"center",inline:"center"})},setStep(t){const{event:e,context:r}=t,s=r.get("steps");let o=e.value;o!=null&&R(t,J(o)?G(s,o):o)},clearStep(t){const{context:e}=t;e.set("targetRect",{width:0,height:0,x:0,y:0}),R(t,-1)},setInitialStep(t){const{context:e,event:r}=t,s=e.get("steps");if(s.length!==0){if(J(r.value)){const o=G(s,r.value);R(t,o);return}R(t,0)}},setNextStep(t){const{context:e,computed:r}=t,s=e.get("steps"),o=lt(s,r("stepIndex"));R(t,o)},setPrevStep(t){const{context:e,computed:r}=t,s=e.get("steps"),o=Ct(s,r("stepIndex"));R(t,o)},invokeOnStart({prop:t,context:e,computed:r}){t("onStatusChange")?.({status:"started",stepId:e.get("stepId"),stepIndex:r("stepIndex")})},invokeOnDismiss({prop:t,context:e,computed:r}){t("onStatusChange")?.({status:"dismissed",stepId:e.get("stepId"),stepIndex:r("stepIndex")})},invokeOnComplete({prop:t,context:e,computed:r}){t("onStatusChange")?.({status:"completed",stepId:e.get("stepId"),stepIndex:r("stepIndex")})},invokeOnSkip({prop:t,context:e,computed:r}){t("onStatusChange")?.({status:"skipped",stepId:e.get("stepId"),stepIndex:r("stepIndex")})},invokeOnNotFound({prop:t,context:e,computed:r}){t("onStatusChange")?.({status:"not-found",stepId:e.get("stepId"),stepIndex:r("stepIndex")})},raiseStepChange({send:t}){t({type:"STEP.CHANGED"})},setResolvedTarget({context:t,event:e,computed:r}){const s=e.node??r("step")?.target?.();t.set("resolvedTarget",s??null)},syncTargetAttrs({context:t,refs:e,prop:r}){e.get("_targetCleanup")?.(),e.set("_targetCleanup",void 0);const s=t.get("resolvedTarget");s&&(r("preventInteraction")&&(s.inert=!0),s.setAttribute("data-tour-highlighted",""),e.set("_targetCleanup",()=>{r("preventInteraction")&&(s.inert=!1),s.removeAttribute("data-tour-highlighted")}))},cleanupRefs({refs:t}){t.get("_targetCleanup")?.(),t.set("_targetCleanup",void 0),t.get("_effectCleanup")?.(),t.set("_effectCleanup",void 0)},validateSteps({context:t}){const e=new Set;t.get("steps").forEach(r=>{if(e.has(r.id))throw new Error(`[zag-js/tour] Duplicate step id: ${r.id}`);if(r.target==null&&r.type==null)throw new Error(`[zag-js/tour] Step ${r.id} has no target or type. At least one of those is required.`);e.add(r.id)})}},effects:{waitForScrollEnd({send:t}){const e=setTimeout(()=>{t({type:"SCROLL.END"})},100);return()=>clearTimeout(e)},waitForTargetTimeout({send:t}){const e=setTimeout(()=>{t({type:"TARGET.NOT_FOUND"})},3e3);return()=>clearTimeout(e)},waitForTarget({scope:t,computed:e,send:r}){const s=e("step");if(!s)return;const o=s.target,a=t.getWin(),n=t.getRootNode(),i=new a.MutationObserver(()=>{const d=o?.();d&&(r({type:"TARGET.RESOLVED",node:d}),i.disconnect())});return i.observe(n,{childList:!0,subtree:!0,characterData:!0}),()=>{i.disconnect()}},trackBoundarySize({context:t,scope:e}){const r=e.getWin(),s=e.getDoc(),o=()=>{const n=visualViewport?.width??r.innerWidth,i=s.documentElement.scrollHeight;t.set("boundarySize",{width:n,height:i})};o();const a=r.visualViewport??r;return a.addEventListener("resize",o),()=>a.removeEventListener("resize",o)},trackEscapeKeydown({scope:t,send:e,prop:r}){if(!r("closeOnEscape"))return;const s=t.getDoc(),o=a=>{a.key==="Escape"&&(a.preventDefault(),a.stopPropagation(),e({type:"DISMISS",src:"esc"}))};return s.addEventListener("keydown",o,!0),()=>{s.removeEventListener("keydown",o,!0)}},trackInteractOutside({context:t,computed:e,scope:r,send:s,prop:o}){const a=e("step");return a==null?void 0:Jt(()=>z(r),{defer:!0,exclude(i){return $t(a.target?.(),i)},onFocusOutside(i){o("onFocusOutside")?.(i),o("closeOnInteractOutside")||i.preventDefault()},onPointerDownOutside(i){if(o("onPointerDownOutside")?.(i),ve(t.get("targetRect"),i.detail.originalEvent)){i.preventDefault();return}o("closeOnInteractOutside")||i.preventDefault()},onInteractOutside(i){o("onInteractOutside")?.(i),!i.defaultPrevented&&s({type:"DISMISS",src:"interact-outside"})}})},trackDismissableBranch({computed:t,scope:e}){if(t("step")==null)return;const s=()=>z(e);return Zt(s,{defer:!s()})},trapFocus({computed:t,scope:e}){return t("step")==null?void 0:ce(()=>z(e),{escapeDeactivates:!1,allowOutsideClick:!0,preventScroll:!0,returnFocusOnDeactivate:!1})},trackPlacement({context:t,computed:e,scope:r,prop:s}){const o=e("step");if(o==null)return;if(t.set("currentPlacement",o.placement??"bottom"),pe(o))return Se(r);if(!q(o))return;const a=()=>ht(r);return Yt(t.get("resolvedTarget"),a,{defer:!0,placement:o.placement??"bottom",strategy:"absolute",gutter:10,offset:o.offset,getAnchorRect(n){if(!At(n))return null;const i=n.getBoundingClientRect();return me(i,s("spotlightOffset"))},onComplete(n){const{rects:i}=n.middlewareData;t.set("currentPlacement",n.placement),t.set("targetRect",i.reference)}})}}}});function Se(t){return it(()=>{const e=z(t);if(!e)return;const r=Rt(e),s=ht(t),o=de(t);s&&(s.style.setProperty("--z-index",r.zIndex),s.style.setProperty("z-index","var(--z-index)")),o&&o.style.setProperty("--z-index",r.zIndex)})}function R(t,e){const{context:r,refs:s,computed:o,prop:a}=t,n=r.get("steps"),i=n[e];if(!i){r.set("stepId",null);return}if(Dt(r.get("stepId"),i.id))return;const d=w=>{r.set("steps",k=>k.map((K,I)=>I===e?{...K,...w}:K))},c=()=>{const w=lt(n,o("stepIndex"));r.set("stepId",n[w].id)},p=w=>{const k=ft(n,w);k&&r.set("stepId",k.id)},u=()=>{r.set("stepId",null),a("onStatusChange")?.({status:"dismissed",stepId:null,stepIndex:-1})},f=()=>{r.set("stepId",i.id)};if(!i.effect){f();return}const F=i.effect({show:f,next:c,update:d,target:i.target,dismiss:u,goto:p});s.set("_effectCleanup",F)}_t()(["closeOnEscape","closeOnInteractOutside","dir","getRootNode","id","ids","keyboardNavigation","onFocusOutside","onInteractOutside","onPointerDownOutside","onStatusChange","onStepChange","onStepsChange","preventInteraction","spotlightOffset","spotlightRadius","stepId","steps","translations"]);var[Pe,y]=Kt({hookName:"useTourContext",providerName:"<TourProvider />"}),xe=t=>{const[e,r]=Ut()(t,["action"]),s=y(),o=b(()=>s().getActionTriggerProps(e),r);return l(S.button,E(o,{get children(){return o.children||e.action.label}}))},we=t=>{const e=y();return t.children(()=>e().step?.actions??[])},Ie=t=>{const e=y(),r=b(()=>e().getArrowProps(),t);return l(V,{get when(){return e().step?.arrow},get children(){return l(S.div,r)}})},Ee=t=>{const e=y(),r=b(()=>e().getArrowTipProps(),t);return l(S.div,r)},Ne=t=>{const e=y(),r=Y(),s=U(b(r,()=>({present:e().open}))),o=b(()=>e().getBackdropProps(),()=>s().presenceProps,t);return l(V,{get when(){return!s().unmounted},get children(){return l(S.div,E(o,{get hidden(){return!e().step?.backdrop},ref(a){var n=Z(s().ref,t.ref);typeof n=="function"&&n(a)}}))}})},Fe=t=>{const e=y(),r=b(()=>e().getCloseTriggerProps(),t);return l(S.button,r)},ke=t=>{const e=y(),r=Y(),s=U(b(r,()=>({present:e().open}))),o=b(()=>e().getContentProps(),()=>s().presenceProps,t);return l(V,{get when(){return!s().unmounted},get children(){return l(S.div,E(o,{ref(a){var n=Z(s().ref,t.ref);typeof n=="function"&&n(a)}}))}})},Ce=t=>t.children(y()),Oe=dt.extendWith("control"),Re=t=>{const e=b(()=>Oe.build().control.attrs,t);return l(S.div,e)},De=t=>{const e=y(),r=b(()=>e().getDescriptionProps(),t);return l(S.div,E(r,{get children(){return r.children||e().step?.description}}))},Ae=t=>{const e=y(),r=Pt(),s=b(()=>e().getPositionerProps(),t);return l(V,{get when(){return!r().unmounted},get children(){return l(S.div,s)}})},$e=t=>{const e=y(),r=b(()=>e().getProgressTextProps(),t);return l(S.div,E(r,{get children(){return r.children||e().getProgressText()}}))},_e=t=>{const[e,r]=mt(t),[s]=yt(e),o=U(b(e,()=>({present:r.tour().open})));return l(Pe,{get value(){return r.tour},get children(){return l(Tt,{value:s,get children(){return l(St,{value:o,get children(){return r.children}})}})}})},Le=t=>{const e=y(),r=Y(),s=U(b(r,()=>({present:e().open}))),o=b(()=>e().getSpotlightProps(),()=>s().presenceProps,t);return l(V,{get when(){return!s().unmounted},get children(){return l(S.div,E(o,{get hidden(){return!e().open||!e().step?.target?.()},ref(a){var n=Z(s().ref,t.ref);typeof n=="function"&&n(a)}}))}})},Ge=t=>{const e=y(),r=b(()=>e().getTitleProps(),t);return l(S.h2,E(r,{get children(){return r.children||e().step?.title}}))},Be=t=>{const e=Ht(),r=Gt(),s=Bt(),o=tt(()=>({id:e,dir:r().dir,getRootNode:s().getRootNode,...Mt(t)})),a=Vt(Te,o);return tt(()=>fe(a,Wt))},m={};zt(m,{ActionTrigger:()=>xe,Actions:()=>we,Arrow:()=>Ie,ArrowTip:()=>Ee,Backdrop:()=>Ne,CloseTrigger:()=>Fe,Content:()=>ke,Context:()=>Ce,Control:()=>Re,Description:()=>De,Positioner:()=>Ae,ProgressText:()=>$e,Root:()=>_e,Spotlight:()=>Le,Title:()=>Ge});function at(t){t=E({slots:{}},t);const[e,r]=jt(t,["tour","slots"]),s=e.tour;return l(m.Root,{tour:s,get children(){return l(Xt,{get children(){return[l(m.Backdrop,{get class(){return T(["backdrop-blur z-[1300] bg-background/10 data-[state=open]:animate-backdrop-in data-[state=closed]:animate-backdrop-out",e.slots.backdrop])}}),l(m.Positioner,{get class(){return T(["flex items-center justify-center !z-[1400] data-[type=dialog]:fixed data-[type=dialog]:inset-0 data-[type=tooltip]:absolute",e.slots.positioner])},get children(){return l(m.Content,{get class(){return T(["relative bg-background rounded-lg shadow-lg flex flex-col max-w-sm p-5",e.slots.content])},get children(){return[l(m.Arrow,{get class(){return T(["[--arrow-size:12px] [--arrow-background:theme(colors.background)]",e.slots.arrow])},get children(){return l(m.ArrowTip,{get class(){return T(["border-t border-l border-border",e.slots.arrowTip])}})}}),l(m.CloseTrigger,{get class(){return T(["absolute top-3 right-3",e.slots.closeTrigger])},get children(){return l(ee,{class:"size-4"})}}),l(m.Title,{get class(){return T(["font-medium text-lg",e.slots.title])},get children(){return j(()=>!!s().step)()&&s().step.title}}),l(m.Description,{get class(){return T(["text-muted-foreground text-sm",e.slots.description])},get children(){return j(()=>!!s().step)()&&s().step.description}}),l(m.ProgressText,{get class(){return T(["text-sm text-muted-foreground",e.slots.progressText])},get children(){return s().getProgressText()}}),l(m.Control,{get class(){return T(["flex gap-3 justify-end",e.slots.control])},get children(){return l(qt,{get each(){return j(()=>!!s().step)()&&s().step.actions},children:(o,a)=>l(m.ActionTrigger,{action:o,get class(){return T(["px-3 py-2 text-sm font-medium border border-border bg-background text-muted-foreground rounded hover:bg-accent transition-colors",e.slots.actionTrigger])},get children(){return o.label}})})}})]}})}}),l(m.Spotlight,{get class(){return T(["border-[3px] border-solid border-blue-500 z-[1400]",e.slots.spotlight])}})]}})}})}const{fn:Ve}=__STORYBOOK_MODULE_TEST__,Ke={args:{onExitComplete:Ve()},argTypes:{slots:{control:{type:"object"},table:{type:{summary:"Slots",detail:"C:/Users/shaya/RiderProjects/Partas.Solid.UIKit/Partas.Solid.UI/Components/Tour.fs"}}},immediate:{control:{type:"boolean"},table:{type:{summary:"bool"}}},lazyMount:{control:{type:"boolean"},table:{type:{summary:"bool"}}},onExitComplete:{control:{type:!1},table:{type:{summary:"function"}}},present:{control:{type:"boolean"},table:{type:{summary:"bool"}}},skipAnimationOnMount:{control:{type:"boolean"},table:{type:{summary:"bool"}}},tour:{control:{type:!1},table:{type:{summary:"function"}}},unmountOnExit:{control:{type:"boolean"},table:{type:{summary:"bool"}}}},render:t=>{const e=Be({steps:[{id:"welcome",type:"dialog",title:"Welcome to Partas UI",description:"Let's see if this works.",actions:[{label:"Close",action:"dismiss"},{label:"Next",action:"next"}]},{id:"button-selector",type:"tooltip",target:()=>document.querySelector(".mybutton"),title:"The Button",description:"See what happens when the button is pressed.",placement:"bottom",actions:[{label:"Prev",action:"prev"},{label:"Close",action:"dismiss"}]}]});return[l(te,{class:"mybutton",onClick:r=>{e().start(void 0)},children:"Begin"}),l(at,{tour:e})]},component:at},B={args:{}};B.parameters={...B.parameters,docs:{...B.parameters?.docs,source:{originalSource:`{
  args: {}
}`,...B.parameters?.docs?.source}}};const Me=["Default"],Ze=Object.freeze(Object.defineProperty({__proto__:null,Default:B,__namedExportsOrder:Me,default:Ke},Symbol.toStringTag,{value:"Module"}));export{B as D,Ze as S};
