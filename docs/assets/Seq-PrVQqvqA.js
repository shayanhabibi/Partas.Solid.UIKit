import{g as f,h as m,t as x}from"./Util-DXwscfZV.js";import{t as w}from"./Types-CqbaJdUC.js";import{v as u,s as h}from"./Option-DlNMNgAB.js";import{O as N}from"./FSharp.Core-D1Pte0FF.js";import{s as v}from"./Array-CbDDtYGA.js";import{F,t as G}from"./List-D43zMB1s.js";const A="Enumeration already finished.",M="Enumeration has not started. Call MoveNext.",O="Reset is not supported on this enumerator.";function R(){throw new Error(O)}function p(){throw new Error(M)}function _(){throw new Error(A)}class ${constructor(t){this.f=t}toString(){const t=this;let n=0,r="seq [";const o=m(t);try{for(;n<4&&o["System.Collections.IEnumerator.MoveNext"]();)n>0&&(r=r+"; "),r=r+w(o["System.Collections.Generic.IEnumerator`1.get_Current"]()),n=n+1|0;return n===4&&(r=r+"; ..."),r+"]"}finally{f(o)}}GetEnumerator(){return this.f()}[Symbol.iterator](){return x(m(this))}"System.Collections.IEnumerable.GetEnumerator"(){return this.f()}}function q(e){return new $(e)}class V{constructor(t,n,r){this.current=t,this.next=n,this.dispose=r}"System.Collections.Generic.IEnumerator`1.get_Current"(){return this.current()}"System.Collections.IEnumerator.get_Current"(){return this.current()}"System.Collections.IEnumerator.MoveNext"(){return this.next()}"System.Collections.IEnumerator.Reset"(){R()}Dispose(){this.dispose()}}function C(e,t,n){return new V(e,t,n)}function b(e){let t,n,r=!1,o=!1,i;const d=()=>{if(o=!0,n!=null){const s=u(n);try{f(s)}finally{n=void 0}}if(t!=null){const s=u(t);try{f(s)}finally{t=void 0}}};return C(()=>(r?o&&_():p(),i!=null?u(i):_()),()=>{if(r||(r=!0),o)return!1;{let s;for(;s==null;){let l;const a=t,y=n;if(a!=null)if(y!=null){const c=u(y);if(c["System.Collections.IEnumerator.MoveNext"]())i=h(c["System.Collections.Generic.IEnumerator`1.get_Current"]()),s=!0;else try{f(c)}finally{n=void 0}}else{const c=u(a);c["System.Collections.IEnumerator.MoveNext"]()?n=(l=c["System.Collections.Generic.IEnumerator`1.get_Current"](),m(l)):(d(),s=!1)}else t=m(e)}return u(s)}},()=>{o||d()})}function k(e,t,n){let r=!1,o,i=h(e());const d=()=>{if(i!=null){const l=u(i);try{n(l)}finally{i=void 0}}},s=()=>{try{d()}finally{o=void 0}};return C(()=>(r||p(),o!=null?u(o):_()),()=>{if(r||(r=!0),i!=null){const l=u(i);let a;try{a=t(l)}catch(y){throw s(),y}return a!=null?(o=a,!0):(s(),!1)}else return!1},d)}function E(e){return q(e)}function g(e){return m(N("source",e))}function S(e){return E(()=>m(e()))}function I(e){return E(()=>b(e))}function Q(){return S(()=>new Array(0))}function T(e){return S(()=>v(e))}function U(e){return e instanceof F?G(e):Array.from(e)}function D(e,t,n){return E(()=>k(e,t,n))}function X(e,t){return I([e,t])}function L(e,t,n){const r=g(n);try{let o=t;for(;r["System.Collections.IEnumerator.MoveNext"]();)o=e(o,r["System.Collections.Generic.IEnumerator`1.get_Current"]());return o}finally{f(r)}}function Y(e,t){L((n,r)=>{e(r)},void 0,t)}function W(e,t){return D(()=>g(t),n=>n["System.Collections.IEnumerator.MoveNext"]()?h(e(n["System.Collections.Generic.IEnumerator`1.get_Current"]())):void 0,n=>{f(n)})}function Z(e,t){return S(()=>I(W(e,t)))}export{X as a,Z as c,S as d,Q as e,Y as i,T as s,U as t};
