import{s as y,j as S,c as u,m as C,b as ie,e as H,S as X,P as se,d as E,a as ae,g as le,u as ce,h as pe}from"./iframe-CYoISbNW.js";import{P as Y,a as Z}from"./2CTBMVJ4-IBFzaLOl.js";import{D as ue}from"./3VFJM5NZ-mcdoqugV.js";import{c as de}from"./E53DB7BS-Ct6W5Aep.js";import{c as fe}from"./JNCCF6MP-4sxnBYeu.js";import{P as ge}from"./FLVHQV4A-DrEHBAB-.js";import{_ as me}from"./5WXHJDCZ-DghNgBBa.js";import{m as J,c as he,a as b,g as B,d as F,e as Te,j as ve,w as we}from"./index-CNJVeY88.js";import{s as Pe}from"./index-bM4TQhDa.js";import{m as K}from"./index-aQTIg_kX.js";import{c as be}from"./combineProps-C6tzB3Qj.js";import{L as Oe}from"./Utils-zL6guu6T.js";var De={};me(De,{Arrow:()=>Z,Content:()=>U,Portal:()=>j,Root:()=>M,Tooltip:()=>Re,Trigger:()=>W,useTooltipContext:()=>x});var N=le();function x(){const a=ce(N);if(a===void 0)throw new Error("[kobalte]: `useTooltipContext` must be used within a `Tooltip` component");return a}function U(a){const s=x(),n=J({id:s.generateId("content")},a),[c,o]=y(n,["ref","style"]);return H(()=>S(s.registerContentId(o.id))),u(X,{get when(){return s.contentPresent()},get children(){return u(Y.Positioner,{get children(){return u(ue,C({ref(t){var e=K(l=>{s.setContentRef(l)},c.ref);typeof e=="function"&&e(t)},role:"tooltip",disableOutsidePointerEvents:!1,get style(){return be({"--kb-tooltip-content-transform-origin":"var(--kb-popper-content-transform-origin)",position:"relative"},c.style)},onFocusOutside:t=>t.preventDefault(),onDismiss:()=>s.hideTooltip(!0)},()=>s.dataset(),o))}})}})}function j(a){const s=x();return u(X,{get when(){return s.contentPresent()},get children(){return u(se,a)}})}function ye(a,s,n){const c=a.split("-")[0],o=s.getBoundingClientRect(),t=n.getBoundingClientRect(),e=[],l=o.left+o.width/2,d=o.top+o.height/2;switch(c){case"top":e.push([o.left,d]),e.push([t.left,t.bottom]),e.push([t.left,t.top]),e.push([t.right,t.top]),e.push([t.right,t.bottom]),e.push([o.right,d]);break;case"right":e.push([l,o.top]),e.push([t.left,t.top]),e.push([t.right,t.top]),e.push([t.right,t.bottom]),e.push([t.left,t.bottom]),e.push([l,o.bottom]);break;case"bottom":e.push([o.left,d]),e.push([t.left,t.top]),e.push([t.left,t.bottom]),e.push([t.right,t.bottom]),e.push([t.right,t.top]),e.push([o.right,d]);break;case"left":e.push([l,o.top]),e.push([t.right,t.top]),e.push([t.left,t.top]),e.push([t.left,t.bottom]),e.push([t.right,t.bottom]),e.push([l,o.bottom]);break}return e}var w={},Ce=0,O=!1,f,A,D;function M(a){const s=`tooltip-${pe()}`,n=`${++Ce}`,c=J({id:s,openDelay:700,closeDelay:300,skipDelayDuration:300},a),[o,t]=y(c,["id","open","defaultOpen","onOpenChange","disabled","triggerOnFocusOnly","openDelay","closeDelay","skipDelayDuration","ignoreSafeArea","forceMount"]);let e;const[l,d]=E(),[m,R]=E(),[P,L]=E(),[k,I]=E(t.placement),p=de({open:()=>o.open,defaultOpen:()=>o.defaultOpen,onOpenChange:r=>o.onOpenChange?.(r)}),{present:_}=Pe({show:()=>o.forceMount||p.isOpen(),element:()=>P()??null}),i=()=>{w[n]=T},h=()=>{for(const r in w)r!==n&&(w[r](!0),delete w[r])},T=(r=!1)=>{r||o.closeDelay&&o.closeDelay<=0?(window.clearTimeout(e),e=void 0,p.close()):e||(e=window.setTimeout(()=>{e=void 0,p.close()},o.closeDelay)),window.clearTimeout(f),f=void 0,o.skipDelayDuration&&o.skipDelayDuration>=0&&(D=window.setTimeout(()=>{window.clearTimeout(D),D=void 0},o.skipDelayDuration)),O&&(window.clearTimeout(A),A=window.setTimeout(()=>{delete w[n],A=void 0,O=!1},o.closeDelay))},$=()=>{clearTimeout(e),e=void 0,h(),i(),O=!0,p.open(),window.clearTimeout(f),f=void 0,window.clearTimeout(A),A=void 0,window.clearTimeout(D),D=void 0},Q=()=>{h(),i(),!p.isOpen()&&!f&&!O?f=window.setTimeout(()=>{f=void 0,O=!0,$()},o.openDelay):p.isOpen()||$()},V=(r=!1)=>{!r&&o.openDelay&&o.openDelay>0&&!e&&!D?Q():$()},ee=()=>{window.clearTimeout(f),f=void 0,O=!1},z=()=>{window.clearTimeout(e),e=void 0},q=r=>F(m(),r)||F(P(),r),te=r=>{const v=m(),g=P();if(!(!v||!g))return ye(r,v,g)},G=r=>{const v=r.target;if(q(v)){z();return}if(!o.ignoreSafeArea){const g=te(k());if(g&&ve(we(r),g)){z();return}}e||T()};H(()=>{if(!p.isOpen())return;const r=B();r.addEventListener("pointermove",G,!0),S(()=>{r.removeEventListener("pointermove",G,!0)})}),H(()=>{const r=m();if(!r||!p.isOpen())return;const v=ne=>{const re=ne.target;F(re,r)&&T(!0)},g=Te();g.addEventListener("scroll",v,{capture:!0}),S(()=>{g.removeEventListener("scroll",v,{capture:!0})})}),S(()=>{clearTimeout(e),w[n]&&delete w[n]});const oe={dataset:ae(()=>({"data-expanded":p.isOpen()?"":void 0,"data-closed":p.isOpen()?void 0:""})),isOpen:p.isOpen,isDisabled:()=>o.disabled??!1,triggerOnFocusOnly:()=>o.triggerOnFocusOnly??!1,contentId:l,contentPresent:_,openTooltip:V,hideTooltip:T,cancelOpening:ee,generateId:he(()=>c.id),registerContentId:fe(d),isTargetOnTooltip:q,setTriggerRef:R,setContentRef:L};return u(N.Provider,{value:oe,get children(){return u(Y,C({anchorRef:m,contentRef:P,onCurrentPlacementChange:I},t))}})}function W(a){let s;const n=x(),[c,o]=y(a,["ref","onPointerEnter","onPointerLeave","onPointerDown","onClick","onFocus","onBlur"]);let t=!1,e=!1,l=!1;const d=()=>{t=!1},m=()=>{!n.isOpen()&&(e||l)&&n.openTooltip(l)},R=i=>{n.isOpen()&&!e&&!l&&n.hideTooltip(i)},P=i=>{b(i,c.onPointerEnter),!(i.pointerType==="touch"||n.triggerOnFocusOnly()||n.isDisabled()||i.defaultPrevented)&&(e=!0,m())},L=i=>{b(i,c.onPointerLeave),i.pointerType!=="touch"&&(e=!1,l=!1,n.isOpen()?R():n.cancelOpening())},k=i=>{b(i,c.onPointerDown),t=!0,B(s).addEventListener("pointerup",d,{once:!0})},I=i=>{b(i,c.onClick),e=!1,l=!1,R(!0)},p=i=>{b(i,c.onFocus),!(n.isDisabled()||i.defaultPrevented||t)&&(l=!0,m())},_=i=>{b(i,c.onBlur);const h=i.relatedTarget;n.isTargetOnTooltip(h)||(e=!1,l=!1,R(!0))};return S(()=>{B(s).removeEventListener("pointerup",d)}),u(ge,C({as:"button",ref(i){var h=K(T=>{n.setTriggerRef(T),s=T},c.ref);typeof h=="function"&&h(i)},get"aria-describedby"(){return ie(()=>!!n.isOpen())()?n.contentId():void 0},onPointerEnter:P,onPointerLeave:L,onPointerDown:k,onClick:I,onFocus:p,onBlur:_},()=>n.dataset(),o))}var Re=Object.assign(M,{Arrow:Z,Content:U,Portal:j,Trigger:W});function je(a){const[s,n]=y(a,[]);return u(W,C(n,{"bool:n$":!1}))}function Me(a){const[s,n]=y(a,[]);return u(M,C({gutter:4},n,{"bool:n$":!1}))}function We(a){const[s,n]=y(a,["class"]);return u(j,{get children(){return u(U,C({get class(){return Oe([`z-50 origin-[var(--kb-popover-content-transform-origin)]\r
                        overflow-hidden rounded-md border bg-popover px-3 py-1.5\r
                        text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95`,s.class])}},n,{"bool:n$":!1}))}})}export{Me as T,je as a,We as b};
