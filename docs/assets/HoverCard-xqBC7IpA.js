import{s as f,q as O,c,m as g,l as x,P as U,b,h as X,f as Y,n as Z,u as J,p as K}from"./iframe-mHl6JQ-c.js";import{P as _,a as E}from"./2CTBMVJ4-Bz4Kyx6Y.js";import{D as N}from"./3VFJM5NZ-onnisp7d.js";import{c as Q}from"./E53DB7BS-D596icfy.js";import{L as V}from"./3JA5IX2L-Dic61uC4.js";import{_ as ee}from"./5WXHJDCZ-DghNgBBa.js";import{m as te,A as oe,a as C,d as L,j as ne,w as re}from"./index-DaBFbvzD.js";import{s as ae}from"./index-QgBfygXE.js";import{m as $}from"./index-ncGqb3xy.js";import{c as se}from"./combineProps-D0kUtwZR.js";import{L as ie}from"./Utils-CYryE0IK.js";var ce={};ee(ce,{Arrow:()=>E,Content:()=>T,HoverCard:()=>ue,Portal:()=>y,Root:()=>R,Trigger:()=>w,useHoverCardContext:()=>P});var k=Z();function P(){const a=J(k);if(a===void 0)throw new Error("[kobalte]: `useHoverCardContext` must be used within a `HoverCard` component");return a}function T(a){const o=P(),[s,i]=f(a,["ref","style"]);return c(x,{get when(){return o.contentPresent()},get children(){return c(_.Positioner,{get children(){return c(N,g({ref(n){var e=$(t=>{o.setContentRef(t)},s.ref);typeof e=="function"&&e(n)},disableOutsidePointerEvents:!1,get style(){return se({"--kb-hovercard-content-transform-origin":"var(--kb-popper-content-transform-origin)",position:"relative"},s.style)},onFocusOutside:n=>n.preventDefault(),get onDismiss(){return o.close}},()=>o.dataset(),i))}})}})}function y(a){const o=P();return c(x,{get when(){return o.contentPresent()},get children(){return c(U,a)}})}function le(a,o,s){const i=a.split("-")[0],n=o.getBoundingClientRect(),e=s.getBoundingClientRect(),t=[],l=n.left+n.width/2,r=n.top+n.height/2;switch(i){case"top":t.push([n.left,r]),t.push([e.left,e.bottom]),t.push([e.left,e.top]),t.push([e.right,e.top]),t.push([e.right,e.bottom]),t.push([n.right,r]);break;case"right":t.push([l,n.top]),t.push([e.left,e.top]),t.push([e.right,e.top]),t.push([e.right,e.bottom]),t.push([e.left,e.bottom]),t.push([l,n.bottom]);break;case"bottom":t.push([n.left,r]),t.push([e.left,e.top]),t.push([e.left,e.bottom]),t.push([e.right,e.bottom]),t.push([e.right,e.top]),t.push([n.right,r]);break;case"left":t.push([l,n.top]),t.push([e.right,e.top]),t.push([e.left,e.top]),t.push([e.left,e.bottom]),t.push([e.right,e.bottom]),t.push([l,n.bottom]);break}return t}function R(a){const o=`hovercard-${K()}`,s=te({id:o,openDelay:700,closeDelay:300},a),[i,n]=f(s,["id","open","defaultOpen","onOpenChange","openDelay","closeDelay","ignoreSafeArea","forceMount"]);let e,t;const[l,r]=b(),[u,B]=b(),[I,W]=b(n.placement),d=Q({open:()=>i.open,defaultOpen:()=>i.defaultOpen,onOpenChange:p=>i.onOpenChange?.(p)}),{present:F}=ae({show:()=>i.forceMount||d.isOpen(),element:()=>u()??null}),{addGlobalListener:z,removeGlobalListener:G}=oe(),M=()=>{e=window.setTimeout(()=>{e=void 0,d.open()},i.openDelay)},A=()=>{t=window.setTimeout(()=>{t=void 0,d.close()},i.closeDelay)},H=()=>{window.clearTimeout(e),e=void 0},m=()=>{window.clearTimeout(t),t=void 0},D=p=>L(l(),p)||L(u(),p),j=p=>{const v=l(),h=u();if(!(!v||!h))return le(p,v,h)},S=p=>{const v=p.target;if(D(v)){m();return}if(!i.ignoreSafeArea){const h=j(I());if(h&&ne(re(p),h)){m();return}}t||A()};X(()=>{d.isOpen()&&(z(document,"pointermove",S,!0),O(()=>{G(document,"pointermove",S,!0)}))}),O(()=>{H(),m()});const q={dataset:Y(()=>({"data-expanded":d.isOpen()?"":void 0,"data-closed":d.isOpen()?void 0:""})),isOpen:d.isOpen,contentPresent:F,openWithDelay:M,closeWithDelay:A,cancelOpening:H,cancelClosing:m,close:d.close,isTargetOnHoverCard:D,setTriggerRef:r,setContentRef:B};return c(k.Provider,{value:q,get children(){return c(_,g({anchorRef:l,contentRef:u,onCurrentPlacementChange:W},n))}})}function w(a){const o=P(),[s,i]=f(a,["ref","onPointerEnter","onPointerLeave","onFocus","onBlur"]),n=r=>{C(r,s.onPointerEnter),!(r.pointerType==="touch"||i.disabled||r.defaultPrevented)&&(o.cancelClosing(),o.isOpen()||o.openWithDelay())},e=r=>{C(r,s.onPointerLeave),r.pointerType!=="touch"&&o.cancelOpening()},t=r=>{C(r,s.onFocus),!(i.disabled||r.defaultPrevented)&&(o.cancelClosing(),o.isOpen()||o.openWithDelay())},l=r=>{C(r,s.onBlur),o.cancelOpening();const u=r.relatedTarget;o.isTargetOnHoverCard(u)||o.closeWithDelay()};return O(o.cancelOpening),c(V,g({ref(r){var u=$(o.setTriggerRef,s.ref);typeof u=="function"&&u(r)},onPointerEnter:n,onPointerLeave:e,onFocus:t,onBlur:l},()=>o.dataset(),i))}var ue=Object.assign(R,{Arrow:E,Content:T,Portal:y,Trigger:w});function ye(a){const[o,s]=f(a,[]);return c(w,g({"data-slot":"hover-card-trigger"},s,{"bool:n$":!1}))}function Re(a){const[o,s]=f(a,[]);return c(R,g({gutter:4,"data-slot":"hover-card"},s,{"bool:n$":!1}))}function we(a){const[o,s]=f(a,["class"]);return c(y,{"data-slot":"hover-card-portal",get children(){return c(T,g({get class(){return ie([`z-50 w-64 rounded-md border bg-popover p-4 text-popover-foreground\r
                shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out\r
                data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\r
                data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95\r
                data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2\r
                data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2`,o.class])},"data-slot":"hover-card-content"},s,{"bool:n$":!1}))}})}export{Re as H,ye as a,we as b};
