import{a as I,j as P,m as M,s as F,e as A,t as X,n as _,q as j,r as $,c as B}from"./iframe-Ss2HFUgg.js";import{d as S,r as q}from"./Util-jMr-gVD5.js";import{h as V}from"./Array-DTFxpKaG.js";import{L as H}from"./Utils-Bv7TLaDt.js";import{m as k}from"./common-DvkHkTuv.js";function D(a,l){return a<l?a:l}function K(a){const[l,m]=I(!1);let n=0;const u=x=>{n=requestAnimationFrame(u),a(x)},f=()=>{l()||(m(!0),n=requestAnimationFrame(u))},i=()=>{m(!1),cancelAnimationFrame(n)};return P(i),[l,f,i]}function U(a,l){const m=(()=>{const i=Math.floor(1e3/l);return()=>i})();let n=0,u=0,f=0;return i=>{n=i-u,Math.ceil(n+f)>=m()&&(u=i,f=Math.max(n-m(),0),a(i))}}var W=X("<div><canvas class=size-full>");function Z(){const a=I({x:0,y:0});return A(()=>{let l;l=k(window,m=>{a[1]({x:m.x,y:m.y})},{}),P(()=>{l()})}),a[0]}function E(a){a=M({quantity:100,staticity:50,ease:50,size:.4,refresh:!1,vx:0,vy:0},a);const[l,m]=F(a,["size","quantity","refresh","class"]);let n=S(),u=S(),f=S(),i=[];const x=Z();let z={x:0,y:0},r={h:0,w:0};const h=typeof window>"u"?1:window.devicePixelRatio;let v;const L=()=>{f&&f.clearRect(0,0,r.w,r.h)},R=()=>{let s;const e=o=>Math.floor(o),t=()=>Math.random();return{x:e(t()*r.w),y:e(t()*r.h),translateX:0,translateY:0,size:(s=l.size,e(t()*2)+s),alpha:0,targetAlpha:q(.1+t()*.6,1),dx:.1*(t()-.5),dy:.1*(t()-.5),magnetism:.1+4*t()}},c=(s,e)=>{let t;if(f){let o,y,d,p,g;const w=f;w.translate(e.translateX,e.translateY),g=w,g.beginPath(),p=g,p.arc(e.x,e.y,e.size,0,2*Math.PI),d=p,d.fillStyle=`${t=u.style.getPropertyValue("--particle-color"),t.slice(0,t.length-3+1)}${e.alpha})`,y=d,y.fill(),o=y,o.setTransform(h,0,0,h,0,0),s||i.push(e)}},T=()=>{if(u&&n&&f){r.w=u.offsetWidth,r.h=u.offsetHeight,n.width=r.w*h,n.height=r.h*h,n.style.width=`${r.w}px`,n.style.height=`${r.h}px`,f.scale(h,h),i=[];for(let e=0;e<=a.quantity;e++)c(!1,R())}L();const s=l.quantity;for(let e=0;e<=s;e++)c(!1,R())},C=K(U(s=>{L(),V((e,t)=>{let o,y,d,p,g;const w=q((o=[(y=[t.x+t.translateX-t.size,r.w-t.x-t.translateX-t.size,t.y+t.translateY-t.size,r.h-t.y-t.translateY-t.size],y.reduce(D)),0,20,0,1],d=o[1],p=o[3],g=(o[0]-d)*(o[4]-p)/(o[2]-d)+p,Math.abs(g)),2);w>1?t.alpha=D(t.alpha+.02,t.targetAlpha):t.alpha=t.targetAlpha*w,t.x=t.dx+a.vx+t.x,t.y=t.y+t.dy+a.vy,t.translateX=t.translateX+(z.x/(a.staticity/t.magnetism)-t.translateX)/a.ease,t.translateY=t.translateY+(z.y/(a.staticity/t.magnetism)-t.translateY)/a.ease,c(!0,t),(t.x<-t.size||t.x>r.w+t.size||t.y<-t.size||t.y>r.h+t.size)&&(i.splice(e,1),c(!1,R()))},i)},120)),O=C[2];return C[0]()||C[1](),A(()=>{let s;return n&&(f=n.getContext("2d")),s=void 0,()=>{s(),T();const e=()=>{v&&clearTimeout(v),v=setTimeout(()=>{T()},200)|0};window.addEventListener("resize",t=>{e()}),P(()=>{O();let t;return v&&clearTimeout(v),t=void 0,()=>{t(),window.removeEventListener("resize",o=>{e()})}})}}),A(()=>{l.refresh&&T()}),A(()=>{if(x(),n){const s=n.getBoundingClientRect(),e=r.w,t=r.h,o=x().x-s.left-r.w/2,y=x().y-s.top-r.h/2;o<e/2&&o>-e/2&&y<t/2&&y>-t/2&&(z.x=o,z.y=y)}}),P(()=>{O()}),(()=>{var s=W(),e=s.firstChild,t=u;typeof t=="function"?$(t,s):u=s,_(s,"ariahidden",!0),j(s,M({get class(){return H(["pointer-events-none",l.class])}},m),!1,!0);var o=n;return typeof o=="function"?$(o,e):n=e,s})()}const{fn:G}=__STORYBOOK_MODULE_TEST__,J={args:{onDrawCircle:G()},argTypes:{quantity:{control:{type:"number",max:2147483647,min:-2147483648,step:1},table:{type:{summary:"int32"}}},staticity:{control:{type:"number"},table:{type:{summary:"float64"}}},ease:{control:{type:"number"},table:{type:{summary:"float64"}}},size:{control:{type:"number"},table:{type:{summary:"float64"}}},refresh:{control:{type:"boolean"},table:{type:{summary:"bool"}}},vx:{control:{type:"number"},table:{type:{summary:"float64"}}},vy:{control:{type:"number"},table:{type:{summary:"float64"}}},onDrawCircle:{control:{type:!1},table:{type:{summary:"function"}}}},render:a=>B(E,M(a,{"bool:n$":!1})),tags:["!autodocs"],component:E},b={args:{refresh:!0}};b.parameters={...b.parameters,docs:{...b.parameters?.docs,source:{originalSource:`{
  args: {
    refresh: true
  }
}`,...b.parameters?.docs?.source}}};const N=["Default"],nt=Object.freeze(Object.defineProperty({__proto__:null,Default:b,__namedExportsOrder:N,default:J},Symbol.toStringTag,{value:"Module"}));export{b as D,nt as S};
