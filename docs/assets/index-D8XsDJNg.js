import{a as u}from"./U42ECMND-BDjyePcW.js";import{e as g,j as b,m as E,h as L,a as M}from"./iframe-Ss2HFUgg.js";import{b as w}from"./GZJAOTUE-Cj1OtU2l.js";var S=new Map,W=e=>{g(()=>{const r=u(e.style)??{},c=u(e.properties)??[],a={};for(const l in r)a[l]=e.element.style[l];const o=S.get(e.key);o?o.activeCount++:S.set(e.key,{activeCount:1,originalStyles:a,properties:c.map(l=>l.key)}),Object.assign(e.element.style,e.style);for(const l of c)e.element.style.setProperty(l.key,l.value);b(()=>{const l=S.get(e.key);if(l){if(l.activeCount!==1){l.activeCount--;return}S.delete(e.key);for(const[d,h]of Object.entries(l.originalStyles))e.element.style[d]=h;for(const d of l.properties)e.element.style.removeProperty(d);e.element.style.length===0&&e.element.removeAttribute("style"),e.cleanup?.()}})})},T=W,D=(e,r)=>{switch(r){case"x":return[e.clientWidth,e.scrollLeft,e.scrollWidth];case"y":return[e.clientHeight,e.scrollTop,e.scrollHeight]}},R=(e,r)=>{const c=getComputedStyle(e),a=r==="x"?c.overflowX:c.overflowY;return a==="auto"||a==="scroll"||e.tagName==="HTML"&&a==="visible"},X=(e,r,c)=>{const a=r==="x"&&window.getComputedStyle(e).direction==="rtl"?-1:1;let o=e,l=0,d=0,h=!1;do{const[y,t,n]=D(o,r),s=n-y-a*t;(t!==0||s!==0)&&R(o,r)&&(l+=s,d+=t),o===(c??document.documentElement)?h=!0:o=o._$host??o.parentElement}while(o&&!h);return[l,d]},[x,k]=M([]),Y=e=>x().indexOf(e)===x().length-1,$=e=>{const r=E({element:null,enabled:!0,hideScrollbar:!0,preventScrollbarShift:!0,preventScrollbarShiftMode:"padding",restoreScrollPosition:!0,allowPinchZoom:!1},e),c=L();let a=[0,0],o=null,l=null;g(()=>{u(r.enabled)&&(k(t=>[...t,c]),b(()=>{k(t=>t.filter(n=>n!==c))}))}),g(()=>{if(!u(r.enabled)||!u(r.hideScrollbar))return;const{body:t}=document,n=window.innerWidth-t.offsetWidth;if(u(r.preventScrollbarShift)){const s={overflow:"hidden"},i=[];n>0&&(u(r.preventScrollbarShiftMode)==="padding"?s.paddingRight=`calc(${window.getComputedStyle(t).paddingRight} + ${n}px)`:s.marginRight=`calc(${window.getComputedStyle(t).marginRight} + ${n}px)`,i.push({key:"--scrollbar-width",value:`${n}px`}));const f=window.scrollY,v=window.scrollX;T({key:"prevent-scroll",element:t,style:s,properties:i,cleanup:()=>{u(r.restoreScrollPosition)&&n>0&&window.scrollTo(v,f)}})}else T({key:"prevent-scroll",element:t,style:{overflow:"hidden"}})}),g(()=>{!Y(c)||!u(r.enabled)||(document.addEventListener("wheel",h,{passive:!1}),document.addEventListener("touchstart",d,{passive:!1}),document.addEventListener("touchmove",y,{passive:!1}),b(()=>{document.removeEventListener("wheel",h),document.removeEventListener("touchstart",d),document.removeEventListener("touchmove",y)}))});const d=t=>{a=C(t),o=null,l=null},h=t=>{const n=t.target,s=u(r.element),i=I(t),f=Math.abs(i[0])>Math.abs(i[1])?"x":"y",v=f==="x"?i[0]:i[1],p=P(n,f,v,s);let m;s&&w(s,n)?m=!p:m=!0,m&&t.cancelable&&t.preventDefault()},y=t=>{const n=u(r.element),s=t.target;let i;if(t.touches.length===2)i=!u(r.allowPinchZoom);else{if(o==null||l===null){const f=C(t).map((p,m)=>a[m]-p),v=Math.abs(f[0])>Math.abs(f[1])?"x":"y";o=v,l=v==="x"?f[0]:f[1]}if(s.type==="range")i=!1;else{const f=P(s,o,l,n);n&&w(n,s)?i=!f:i=!0}}i&&t.cancelable&&t.preventDefault()}},I=e=>[e.deltaX,e.deltaY],C=e=>e.changedTouches[0]?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0],P=(e,r,c,a)=>{const o=a!==null&&w(a,e),[l,d]=X(e,r,o?a:void 0);return!(c>0&&Math.abs(l)<=1||c<0&&Math.abs(d)<1)},A=$,H=A;export{T as a,X as g,H as s};
