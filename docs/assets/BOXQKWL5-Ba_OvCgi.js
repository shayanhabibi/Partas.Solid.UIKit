import{M as L,u as V,a as S,b as T,c as k}from"./LEK3K6R3-DoQ-1qCu.js";import{c as $}from"./3VFJM5NZ-BZdkV51Z.js";import{b as P}from"./FN6EICGO-B6Cr9H-k.js";import{P as j}from"./FLVHQV4A-C8oehw7Q.js";import{m as x,c as q,h as D}from"./index-sxjzjzXW.js";import{s as A,d as O,a as z,e as h,c as m,m as E,h as C,j as G}from"./iframe-CQhh2Qu5.js";import{m as H}from"./index-DFznmYTA.js";function U(r){const u=V(),g=x({modal:!1},r),[c,t]=A(g,["value"]),d=C(),o=u.generateId(`menubar-menu-${d}`),a=x({id:o},t);return m(S,E({get value(){return c.value??d}},a))}function Y(r){let u;const g=`menubar-${C()}`,c=x({id:g,loop:!0,orientation:"horizontal"},r),[t,d]=A(c,["ref","value","defaultValue","onValueChange","loop","focusOnAlt","autoFocusMenu","onAutoFocusMenuChange","orientation"]),[o,a]=P({value:()=>t.value,defaultValue:()=>t.defaultValue,onChange:e=>t.onValueChange?.(e)}),[F,b]=O(),[s,w]=O(new Map),[y,M]=P({value:()=>t.autoFocusMenu,defaultValue:()=>!1,onChange:t.onAutoFocusMenuChange}),I=()=>o()&&y()&&!o()?.includes("link-trigger-"),l={dataset:z(()=>({"data-expanded":I()?"":void 0,"data-closed":I()?void 0:""})),value:o,setValue:a,lastValue:F,setLastValue:b,menus:()=>new Set([...s().keys()]),menuRefs:()=>[...s().values()].flat(),menuRefMap:()=>s(),registerMenu:(e,n)=>{w(i=>{const f=new Map;return i.forEach((v,R)=>f.set(R,v)),f.set(e,n),f})},unregisterMenu:e=>{w(n=>{n.delete(e);const i=new Map;return n.forEach((f,v)=>i.set(v,f)),i})},nextMenu:()=>{const e=[...s().keys()];if(o()==null){a(e[0]);return}const n=e.indexOf(o());if(n===e.length-1){t.loop&&a(e[0]);return}a(e[n+1])},previousMenu:()=>{const e=[...s().keys()];if(o()==null){a(e[0]);return}const n=e.indexOf(o());if(n===0){t.loop&&a(e[e.length-1]);return}a(e[n-1])},closeMenu:()=>{M(!1),a(void 0)},autoFocusMenu:()=>y(),setAutoFocusMenu:M,generateId:q(()=>d.id),orientation:()=>t.orientation};h(()=>{o()==null&&M(!1)}),$({onInteractOutside:()=>{l.closeMenu(),setTimeout(()=>l.closeMenu())},shouldExcludeElement:e=>[u,...s().values()].flat().some(n=>D(n,e))},()=>u);const p=e=>{e.key==="Alt"&&(e.preventDefault(),e.stopPropagation(),l.value()===void 0?l.nextMenu():l.closeMenu())};return h(()=>{t.focusOnAlt?window.addEventListener("keydown",p):window.removeEventListener("keydown",p),G(()=>{window.removeEventListener("keydown",p)})}),h(()=>{o()!=null&&b(o())}),m(L.Provider,{value:l,get children(){return m(j,E({as:"div",ref(e){var n=H(i=>u=i,t.ref);typeof n=="function"&&n(e)},role:"menubar",get"data-orientation"(){return t.orientation},get"aria-orientation"(){return t.orientation}},d))}})}function Z(r){const u=V();if(T()===void 0&&Object.hasOwn(r,"href")){const c=u.generateId("link-trigger-")+C();return m(U,{value:c,get children(){return m(k,r)}})}return k(r)}export{Y as M,U as a,Z as b};
