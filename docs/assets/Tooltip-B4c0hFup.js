import{s as C,j as S,c as u,m as b,d as ie,e as H,S as X,P as se,a as x,b as ae,g as le,u as ce,h as pe}from"./iframe-BLvaHOrW.js";import{P as Y,a as Z}from"./2CTBMVJ4-B0PPoY8r.js";import{D as ue}from"./3VFJM5NZ-Df8-87fx.js";import{c as de}from"./E53DB7BS-DgMsdUV6.js";import{c as fe}from"./JNCCF6MP-4sxnBYeu.js";import{P as ge}from"./FLVHQV4A-ByRBKILc.js";import{_ as me}from"./5WXHJDCZ-DghNgBBa.js";import{m as J,c as he,a as O,g as B,d as F,e as Te,j as ve,w as we}from"./index-TpYiyspx.js";import{s as be}from"./index-D5LuZuuz.js";import{m as K}from"./index-BbcR3rHk.js";import{c as Pe}from"./combineProps-TuyxsfEg.js";import{L as Oe}from"./Utils-BEjpZvS7.js";var De={};me(De,{Arrow:()=>Z,Content:()=>U,Portal:()=>j,Root:()=>z,Tooltip:()=>Re,Trigger:()=>M,useTooltipContext:()=>E});var N=le();function E(){const a=ce(N);if(a===void 0)throw new Error("[kobalte]: `useTooltipContext` must be used within a `Tooltip` component");return a}function U(a){const s=E(),n=J({id:s.generateId("content")},a),[c,o]=C(n,["ref","style"]);return H(()=>S(s.registerContentId(o.id))),u(X,{get when(){return s.contentPresent()},get children(){return u(Y.Positioner,{get children(){return u(ue,b({ref(t){var e=K(l=>{s.setContentRef(l)},c.ref);typeof e=="function"&&e(t)},role:"tooltip",disableOutsidePointerEvents:!1,get style(){return Pe({"--kb-tooltip-content-transform-origin":"var(--kb-popper-content-transform-origin)",position:"relative"},c.style)},onFocusOutside:t=>t.preventDefault(),onDismiss:()=>s.hideTooltip(!0)},()=>s.dataset(),o))}})}})}function j(a){const s=E();return u(X,{get when(){return s.contentPresent()},get children(){return u(se,a)}})}function ye(a,s,n){const c=a.split("-")[0],o=s.getBoundingClientRect(),t=n.getBoundingClientRect(),e=[],l=o.left+o.width/2,d=o.top+o.height/2;switch(c){case"top":e.push([o.left,d]),e.push([t.left,t.bottom]),e.push([t.left,t.top]),e.push([t.right,t.top]),e.push([t.right,t.bottom]),e.push([o.right,d]);break;case"right":e.push([l,o.top]),e.push([t.left,t.top]),e.push([t.right,t.top]),e.push([t.right,t.bottom]),e.push([t.left,t.bottom]),e.push([l,o.bottom]);break;case"bottom":e.push([o.left,d]),e.push([t.left,t.top]),e.push([t.left,t.bottom]),e.push([t.right,t.bottom]),e.push([t.right,t.top]),e.push([o.right,d]);break;case"left":e.push([l,o.top]),e.push([t.right,t.top]),e.push([t.left,t.top]),e.push([t.left,t.bottom]),e.push([t.right,t.bottom]),e.push([l,o.bottom]);break}return e}var w={},Ce=0,D=!1,f,A,y;function z(a){const s=`tooltip-${pe()}`,n=`${++Ce}`,c=J({id:s,openDelay:700,closeDelay:300,skipDelayDuration:300},a),[o,t]=C(c,["id","open","defaultOpen","onOpenChange","disabled","triggerOnFocusOnly","openDelay","closeDelay","skipDelayDuration","ignoreSafeArea","forceMount"]);let e;const[l,d]=x(),[m,R]=x(),[P,k]=x(),[L,I]=x(t.placement),p=de({open:()=>o.open,defaultOpen:()=>o.defaultOpen,onOpenChange:r=>o.onOpenChange?.(r)}),{present:_}=be({show:()=>o.forceMount||p.isOpen(),element:()=>P()??null}),i=()=>{w[n]=T},h=()=>{for(const r in w)r!==n&&(w[r](!0),delete w[r])},T=(r=!1)=>{r||o.closeDelay&&o.closeDelay<=0?(window.clearTimeout(e),e=void 0,p.close()):e||(e=window.setTimeout(()=>{e=void 0,p.close()},o.closeDelay)),window.clearTimeout(f),f=void 0,o.skipDelayDuration&&o.skipDelayDuration>=0&&(y=window.setTimeout(()=>{window.clearTimeout(y),y=void 0},o.skipDelayDuration)),D&&(window.clearTimeout(A),A=window.setTimeout(()=>{delete w[n],A=void 0,D=!1},o.closeDelay))},$=()=>{clearTimeout(e),e=void 0,h(),i(),D=!0,p.open(),window.clearTimeout(f),f=void 0,window.clearTimeout(A),A=void 0,window.clearTimeout(y),y=void 0},Q=()=>{h(),i(),!p.isOpen()&&!f&&!D?f=window.setTimeout(()=>{f=void 0,D=!0,$()},o.openDelay):p.isOpen()||$()},V=(r=!1)=>{!r&&o.openDelay&&o.openDelay>0&&!e&&!y?Q():$()},ee=()=>{window.clearTimeout(f),f=void 0,D=!1},W=()=>{window.clearTimeout(e),e=void 0},q=r=>F(m(),r)||F(P(),r),te=r=>{const v=m(),g=P();if(!(!v||!g))return ye(r,v,g)},G=r=>{const v=r.target;if(q(v)){W();return}if(!o.ignoreSafeArea){const g=te(L());if(g&&ve(we(r),g)){W();return}}e||T()};H(()=>{if(!p.isOpen())return;const r=B();r.addEventListener("pointermove",G,!0),S(()=>{r.removeEventListener("pointermove",G,!0)})}),H(()=>{const r=m();if(!r||!p.isOpen())return;const v=ne=>{const re=ne.target;F(re,r)&&T(!0)},g=Te();g.addEventListener("scroll",v,{capture:!0}),S(()=>{g.removeEventListener("scroll",v,{capture:!0})})}),S(()=>{clearTimeout(e),w[n]&&delete w[n]});const oe={dataset:ae(()=>({"data-expanded":p.isOpen()?"":void 0,"data-closed":p.isOpen()?void 0:""})),isOpen:p.isOpen,isDisabled:()=>o.disabled??!1,triggerOnFocusOnly:()=>o.triggerOnFocusOnly??!1,contentId:l,contentPresent:_,openTooltip:V,hideTooltip:T,cancelOpening:ee,generateId:he(()=>c.id),registerContentId:fe(d),isTargetOnTooltip:q,setTriggerRef:R,setContentRef:k};return u(N.Provider,{value:oe,get children(){return u(Y,b({anchorRef:m,contentRef:P,onCurrentPlacementChange:I},t))}})}function M(a){let s;const n=E(),[c,o]=C(a,["ref","onPointerEnter","onPointerLeave","onPointerDown","onClick","onFocus","onBlur"]);let t=!1,e=!1,l=!1;const d=()=>{t=!1},m=()=>{!n.isOpen()&&(e||l)&&n.openTooltip(l)},R=i=>{n.isOpen()&&!e&&!l&&n.hideTooltip(i)},P=i=>{O(i,c.onPointerEnter),!(i.pointerType==="touch"||n.triggerOnFocusOnly()||n.isDisabled()||i.defaultPrevented)&&(e=!0,m())},k=i=>{O(i,c.onPointerLeave),i.pointerType!=="touch"&&(e=!1,l=!1,n.isOpen()?R():n.cancelOpening())},L=i=>{O(i,c.onPointerDown),t=!0,B(s).addEventListener("pointerup",d,{once:!0})},I=i=>{O(i,c.onClick),e=!1,l=!1,R(!0)},p=i=>{O(i,c.onFocus),!(n.isDisabled()||i.defaultPrevented||t)&&(l=!0,m())},_=i=>{O(i,c.onBlur);const h=i.relatedTarget;n.isTargetOnTooltip(h)||(e=!1,l=!1,R(!0))};return S(()=>{B(s).removeEventListener("pointerup",d)}),u(ge,b({as:"button",ref(i){var h=K(T=>{n.setTriggerRef(T),s=T},c.ref);typeof h=="function"&&h(i)},get"aria-describedby"(){return ie(()=>!!n.isOpen())()?n.contentId():void 0},onPointerEnter:P,onPointerLeave:k,onPointerDown:L,onClick:I,onFocus:p,onBlur:_},()=>n.dataset(),o))}var Re=Object.assign(z,{Arrow:Z,Content:U,Portal:j,Trigger:M});function je(a){const[s,n]=C(a,[]);return u(M,b({"data-slot":"tooltip-trigger"},n,{"bool:n$":!1}))}function ze(a){const[s,n]=C(a,[]);return u(z,b({gutter:4,"data-slot":"tooltip"},n,{"bool:n$":!1}))}function Me(a){a=b({sideOffset:0},a);const[s,n]=C(a,["class","children"]);return u(j,{"data-slot":"tooltip-portal",get children(){return u(U,b({get class(){return Oe(["bg-foreground selection-none text-background animate-in fade-in-0 zoom-in-95 data-[closed]:animate-out data-[closed]:fade-out-0 data-[closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--kb-popover-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance select-none",s.class])},"data-slot":"tooltip-content"},n,{"bool:n$":!1,get children(){return s.children}}))}})}export{ze as T,je as a,Me as b};
