import{s as c,a as u,c as o,m as i,g as x,e as g,f as w,S as v,d as P,u as R,j as C}from"./iframe-DHSEN8D7.js";import{P as d}from"./FLVHQV4A-VgAG7mUH.js";import{_ as k}from"./5WXHJDCZ-DghNgBBa.js";import{L as m}from"./Utils-CzREY3kc.js";var _={};k(_,{Fallback:()=>S,Image:()=>y,Img:()=>I,Root:()=>b,useImageContext:()=>f});var L=x();function f(){const e=R(L);if(e===void 0)throw new Error("[kobalte]: `useImageContext` must be used within an `Image.Root` component");return e}function S(e){const a=f(),[t,s]=u(a.fallbackDelay()===void 0);return g(()=>{const n=a.fallbackDelay();if(n!==void 0){const l=window.setTimeout(()=>s(!0),n);C(()=>window.clearTimeout(l))}}),o(v,{get when(){return P(()=>!!t())()&&a.imageLoadingStatus()!=="loaded"},get children(){return o(d,i({as:"span"},e))}})}function I(e){const a=f(),[t,s]=u("idle");return g(w(()=>e.src,n=>{if(!n){s("error");return}let l=!0;const r=new window.Image,A=h=>()=>{l&&s(h)};s("loading"),e.crossOrigin!==void 0&&(r.crossOrigin=e.crossOrigin),e.referrerPolicy!==void 0&&(r.referrerPolicy=e.referrerPolicy),r.onload=A("loaded"),r.onerror=A("error"),r.src=n,C(()=>{l=!1})})),g(()=>{const n=t();n!=="idle"&&a.onImageLoadingStatusChange(n)}),o(v,{get when(){return t()==="loaded"},get children(){return o(d,i({as:"img"},e))}})}function b(e){const[a,t]=c(e,["fallbackDelay","onLoadingStatusChange"]),[s,n]=u("idle"),l={fallbackDelay:()=>a.fallbackDelay,imageLoadingStatus:s,onImageLoadingStatusChange:r=>{n(r),a.onLoadingStatusChange?.(r)}};return o(L.Provider,{value:l,get children(){return o(d,i({as:"span"},t))}})}var y=Object.assign(b,{Fallback:S,Img:I});function E(e){const[a,t]=c(e,["class"]);return o(b,i({get class(){return m(["relative flex size-8 shrink-0 overflow-hidden rounded-full",a.class])},"data-slot":"avatar"},t,{"bool:n$":!1}))}function F(e){const[a,t]=c(e,["class"]);return o(I,i({get class(){return m(["aspect-square size-full",a.class])},"data-slot":"avatar-image"},t,{"bool:n$":!1}))}function j(e){const[a,t]=c(e,["class"]);return o(S,i({get class(){return m(["flex size-full items-center justify-center bg-muted",a.class])},"data-slot":"avatar-fallback"},t,{"bool:n$":!1}))}export{E as A,b as I,F as a,j as b,I as c};
