import { Meta, Canvas, Stories, ArgTypes, Controls, Title, Story } from '@storybook/addon-docs/blocks';
import * as CommandStories from './Command.stories';
import * as CommandDialogStories from './CommandDialog.stories';
import * as CommandInputs from './CommandInputs.stories';
import * as CommandLists from './CommandLists.stories';
import * as CommandEmptys from './CommandEmptys.stories';
import * as CommandGroups from './CommandGroups.stories';
import * as CommandSeparators from './CommandSeparators.stories';
import * as CommandItems from './CommandItems.stories';
import * as CommandShortcuts from './CommandShortcuts.stories';
import rawCode from '../../../Components/Command.fs?raw';

<Meta of={CommandStories} />
<Title />

Due to name collisions on the end compilation side (as far as I can remember),
the name of the Command components are suffixed with an 's', except for the
root and dialog components.

### Simple Example - The Command Component

Defining some helpers for making static items in this example:

> Note that since the rendered tag will be the variable name, we have to use
> a capital cased name for the icons. However, F# will complain about using
> a capital named case (for good reason usually), so we just prepend it with
> a wildcard which eliminates all issues.

```fsharp
let makeItem (value: string) (_MyIcon: TagValue) =
    CommandItems() {
        // see the docs on TagValues for the `%` operator
        _MyIcon % {| ``class`` = "mr-2 size-4" |}
        span() { value }
    }
let makeItemShortcut (value: string) (_IconValue: TagValue) (shortcut: string) =
    CommandItems() {
        _IconValue % {| ``class`` = "mr-2 size-4" |}
        span() { value }
        CommandShortcuts() { shortcut }
    }
```

And then the command component:

```fsharp
Command(class' = "rounded-lg border shadow-md") {
    CommandInputs(placeholder = "Type a command or search...")
    CommandLists() {
        CommandEmptys() { "No results found" }
        CommandGroups(heading = span() { "Suggestions" }) {
            // See the docs on TagValues for the `!@` operator
            makeItem "Calendar" !@Calendar
            makeItem "Search Emoji" !@Smile
            makeItem "Launch" !@Rocket
        }
        CommandGroups(heading = span() { "Settings" }) {
            makeItemShortcut "Profile" !@User "Ctrl P"
            makeItemShortcut "Mail" !@Mail "Ctrl B"
            makeItemShortcut "Settings" !@Settings "Ctrl S"
        }
    }
}
```

<Canvas of={CommandStories.Example} sourceState="none" withToolbar={true} />

### Common Recipe - The Dialog Component

Normally, you would pair the CommandDialog with a keyboard shortcut.
For the sake of this example, and not having to compete with Storybook for
shortcut controls, we just use a button.

```fsharp
let isOpen,setOpen = createSignal false
Fragment() {
    // we use the `Invoke` method on the signal setter, which accepts
    // a lambda that operates on the previous value of the signal.
    Button(onClick = fun _ -> setOpen.Invoke(not)) { "Click me!" }
    CommandDialog(
      open' = isOpen(),
      onOpenChange = setOpen) {
        CommandInputs(placeholder="Type a command or search...")
        CommandLists() {
            CommandEmptys() { "No results found" }
            CommandGroups(heading = !!"Suggestions") {
                CommandItems() { "Calendar" }
                CommandItems() { "Search Emoji" }
                CommandItems() { "Calculator" }
            }
        }
    }
}
```

<Canvas of={CommandStories.DialogExample} sourceState={"none"} layout={"centered"}/>
<SourceCode code={rawCode}/>

## Components

### Command

<ArgTypes of={CommandStories} />

### CommandDialog

<ArgTypes of={CommandDialogStories} />

### CommandInputs

<ArgTypes of={CommandInputs} />

### CommandLists

<ArgTypes of={CommandLists} />

### CommandEmptys

<ArgTypes of={CommandEmptys} />

### CommandGroups

<ArgTypes of={CommandGroups} />

### CommandSeparators

<ArgTypes of={CommandSeparators} />

### CommandItems

<ArgTypes of={CommandItems} />

### CommandShortcuts

<ArgTypes of={CommandShortcuts} />
